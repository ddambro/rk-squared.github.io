{"version":3,"sources":["data/enlir.ts","actions/dungeons.ts","data/items.ts","api/apiUrls.ts","utils/logger.ts","data/mrP/util.ts","containers/Page.tsx","actions/worlds.ts","data/mrP/types.ts","data/urls.ts","data/index.ts","actions/recordMateria.ts","actions/relicDraws.ts","data/mrP/index.ts","utils/typeUtils.ts","reducers/dungeons.ts","contexts/LangContext.ts","actions/session.ts","utils/textUtils.ts","components/recordMateria/RecordMateriaTableGroup.tsx","selectors/relicDraws.ts","actions/messages.ts","actions/progress.ts","components/recordMateria/StatusIcon.tsx","components/relicDraws/BadRelicDrawMessage.tsx","selectors/characters.ts","data/mrP/status.ts","data/mrP/statusAlias.ts","routes/index.ts","components/DonationInfo.tsx","components/common/BrowserLink.tsx","components/home/AppFeatures.tsx","utils/timeUtils.ts","components/common/CollapsibleCard.tsx","components/dungeons/DungeonBadge.tsx","components/dungeons/DungeonCommon.ts","components/dungeons/DungeonPrizeList.tsx","components/dungeons/PrizeList.tsx","data/series.ts","components/dungeons/ItemTypeChecklist.tsx","actions/prefs.ts","components/shared/LoadMissingPrompt.tsx","reducers/session.ts","proxy/common.ts","sagas/util.ts","components/recordMateria/RecordMateriaTooltip.tsx","components/relicDraws/RelicDrawBannerList.tsx","data/mrP/attack.ts","data/mrP/split.ts","components/soulBreaks/SoulBreakListItem.tsx","index.site.tsx","containers/Root.tsx","containers/Routes.tsx","routes/siteRoutes.ts","containers/AppMoreInfoPage.tsx","components/home/AppMoreInfo.tsx","containers/MessagesList.tsx","components/MessageBox.tsx","containers/Page.scss","containers/DungeonsPage.tsx","components/dungeons/DungeonsList.tsx","components/dungeons/DungeonCategoryList.tsx","components/common/CollapsibleCard.scss","components/common/MaybeWrap.tsx","components/dungeons/DungeonCard.tsx","data/localData.ts","images/ffrk-icons/dark.png","images/ffrk-icons/earth.png","images/ffrk-icons/fire.png","images/ffrk-icons/holy.png","images/ffrk-icons/ice.png","images/ffrk-icons/lightning.png","images/ffrk-icons/poison.png","images/ffrk-icons/water.png","images/ffrk-icons/wind.png","data/dressRecords.ts","components/dungeons/DungeonBadge.scss","components/shared/RelicTooltip.tsx","components/common/BrText.tsx","components/dungeons/PrizeList.scss","components/dungeons/DungeonCard.scss","components/dungeons/DungeonCategoryTitle.tsx","components/dungeons/WorldBadge.tsx","components/dungeons/DungeonCategoryTitle.scss","images/game-icons/white-tower.svg","images/game-icons/book-cover.svg","images/game-icons/lob-arrow.svg","images/game-icons/orb-direction.svg","images/game-icons/triple-yin.svg","images/game-icons/big-egg.svg","images/game-icons/spectre.svg","images/game-icons/swords-emblem.svg","images/game-icons/closed-doors.svg","images/game-icons/galleon.svg","images/game-icons/calendar.svg","images/game-icons/star-formation.svg","images/game-icons/daemon-skull.svg","components/dungeons/WorldPrizeList.tsx","components/common/ModalDialog.tsx","components/common/ModalHeader.tsx","components/dungeons/WorldPrizeList.scss","components/common/ProgressBar.tsx","sagas/loadDungeons.ts","proxy/dungeons.ts","api/schemas/dungeons.ts","containers/DungeonsPage.scss","containers/RecordMateriaPage.tsx","selectors/recordMateriaDetail.ts","containers/RecordMateriaRoutes.tsx","components/recordMateria/AttackReplacement.tsx","components/recordMateria/RecordMateriaTable.tsx","components/recordMateria/RecordMateriaList.tsx","components/recordMateria/byCharacter.ts","components/recordMateria/StatusIcon.scss","components/recordMateria/RecordMateriaList.scss","components/recordMateria/RecordMateriaTable.scss","components/common/BrTextToP.tsx","components/recordMateria/RecordMateriaTooltip.scss","components/recordMateria/AttackReplacementDefinitions.ts","components/recordMateria/DamageHealing.tsx","components/recordMateria/DamageHealingDefinitions.ts","components/recordMateria/Misc.tsx","components/recordMateria/MiscDefinitions.ts","components/recordMateria/RecordMateriaGrid.tsx","components/common/GridContainer.tsx","components/recordMateria/DescriptionCell.tsx","components/recordMateria/StatusCell.tsx","components/recordMateria/StatBuffs.tsx","components/recordMateria/StatBuffsDefinitions.ts","containers/RecordMateriaRoutes.scss","containers/RelicDrawsPage.tsx","components/relicDraws/RelicDrawBannerList.scss","sagas/loadBanners.ts","proxy/relicDraws.ts","containers/RelicDrawBannerPage.tsx","components/relicDraws/RelicDrawBannerContents.tsx","components/relicDraws/RelicDrawBannerTable.tsx","data/mrP/legendMateria.ts","data/mrP/brave.ts","components/soulBreaks/SoulBreakListItem.scss","components/relicDraws/RelicDrawBannerTable.scss","containers/RelicDrawGroupPage.tsx","containers/SiteHomePage.tsx","components/home/SiteHome.tsx","data/resources.ts","components/common/SiteExternalLink.tsx","containers/SoulBreaksPage.tsx","components/soulBreaks/SoulBreakList.tsx","components/soulBreaks/CharacterSoulBreaks.tsx","components/soulBreaks/CharacterSoulBreaks.scss","components/soulBreaks/SoulBreakList.scss","containers/App.tsx","containers/AppLayout.tsx","components/common/GoogleAd250x250.tsx","containers/AppLayout.scss","images/logo.png","globalStyles.ts","store/configureStore.ts","store/configureStore.production.ts","reducers/index.ts","reducers/battle.ts","actions/battle.ts","reducers/characters.ts","actions/characters.ts","reducers/dungeonScores.ts","actions/dungeonScores.ts","reducers/messages.ts","reducers/options.ts","actions/options.ts","reducers/prefs.ts","reducers/progress.ts","reducers/proxy.ts","actions/proxy.ts","reducers/recordMateria.ts","reducers/relicDraws.ts","reducers/worlds.ts"],"names":["_","__webpack_require__","logger_1","exports","allEnlirElements","isEnlirElement","s","indexOf","allEnlirSchools","isEnlirSchool","allEnlirStats","rawData","abilities","braveCommands","burstCommands","characters","legendMateria","magicite","otherSkills","recordMateria","relics","soulBreaks","status","makeCommandsMap","commands","result","_i","commands_1","length","i","character","source","push","makeRelicMap","prop","items","indexedItems","keyBy","name","relics_1","found","id","applyPatch","lookup","check","apply","item","logger","warn","isBraveSoulBreak","sb","tier","effects","match","enlir","abilitiesByName","braveCommandsByCharacter","burstCommandsByCharacter","charactersByName","magicites","otherSkillsByName","soulBreaksByCharacter","items_1","makeCharacterMap","statusByName","relicSoulBreaks","relicLegendMateria","pluto","aria","runicAwakening","heavyBreak","windUltra","waltz","target","stasis","describeRelicStats","relic","filter","map","stats","toUpperCase","join","isCoreJob","realm","enlirStatusAltName","B. M.","IC1","Critical 100%","Cast Speed *999","getEnlirStatusByName","replace","allEnlirElements_1","isSoulBreak","skill","isGlint","isBurstSoulBreak","isBraveCommand","makeSoulBreakAliases","tierAlias","total","seen","makeKey","_a","tierText","forEach","key","sortBy","alias","makeLegendMateriaAliases","lm","typesafe_actions_1","typeUtils_1","getDungeonPrizes","dungeonOrDungeons","includeAll","dungeons","arrayify","addPrizes","prizes","prizes_1","p","amount","__assign","dungeons_1","d","isComplete","firstTime","isMaster","mastery","claimedGrade","unclaimedGrade","sortedPrizes","Object","keys","sort","dungeonChests","sumBy","type","ItemType","DropItem","DropItemId","Chest1Star","formatDifficulty","dungeon","difficulty","toString","hasAvailablePrizes","getAllPrizes","getAvailablePrizes","addWorldDungeons","createAction","worldId","payload","forgetWorldDungeons","updateDungeon","dungeonId","finishWorldDungeons","loadDungeons","worldIds","openDungeonChest","itemTypeDescription","Ability","Arcana","Character","Common","CrystalWater","DarkMatter","DressRecord","GrowthEgg","Orb","Magicite","MemoryCrystal","Mote","Music","RecordMateria","Relic","UpgradeMaterial","ItemTypeLookup","makeItemTypeLookup","formatRelicName","itemsById","zipObject","LangType","baseUrl","Jp","Gl","lang","gachaProbability","bannerId","exchangeShopPrizeList","exchangeShopId","logform_1","winston","error","format","info","message","stack","rawMessage","logFormat","combine","timestamp","colorize","printf","level","createLogger","transports","Console","andList","orList","andOrList","numbers","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety","isNumeric","isNaN","Number","parseNumberString","toLowerCase","split","toMrPFixed","n","toFixed","endsWith","substr","isAllSame","values","iteratee","every","rawSlashMerge","options","opt","splitAt","splitAtPlus","optionParts","maxLength","max","minLength","min","parts","joinString","some","enDashJoin","same","different","mergeParts","undefined","extraParts","slice","lowerCaseFirst","c","parseNumberOccurrence","m","parseThresholdValues","parseFloat","parsePercentageCounts","count","toMrPKilo","toMrPGeneral","startsWith","numberWithCommas","x","slashMerge","standardPlus","standardNoPlus","standard","combinedStats","useCombinedStats","picked","cleanUpSlashedNumbers","isSequential","formatUseCount","times","countMatches","haystack","needle","describeChances","percentChances","andJoin","oxfordComma","percentToMultiplier","percent","React","MessagesList_1","styles","Page","_super","__extends","prototype","render","this","props","className","title","children","footer","createElement","component","content","default","Component","WorldCategory","WorldSortOrder","timeUtils_1","descriptions","Realm","Nightmare","Torment","Event","SpecialEvent","JumpStart","Raid","CrystalTower","PowerUpMote","Newcomer","Renewal","Record","sortOrder","getClosedAt","world","closedAt","FAR_FUTURE","Infinity","getSorter","category","ByReverseId","ByTime","ById","BySeriesId","getSortOrder","worlds","openedAt","updateWorlds","unlockWorld","enlir_1","util_1","SB_BAR_SIZE","damageTypeAbbreviation","damageType","elementShortName","lightning","ne","poison","elementAbbreviation","water","wind","schoolShortName","Black Magic","White Magic","Summoning","shortAliases","jump","physical","non-elemental","getElementShortName","element","getElementAbbreviation","getSchoolShortName","school","getShortName","getAbbreviation","appendElement","f","formatSchoolOrAbilityList","list","apiUrls_1","dressRecords_1","url","subPath","characterImage","dropItemImage","recordMateriaImage","relicImage","rarity","itemImage","dressRecordsById","characterId","relativeUrl","relativeUrlPath","asset","assetPath","magiciteImage","recordMateriaDropImage","seriesIcon","seriesId","Math","floor","crystalTowerFloorIcon","series_1","series","RecordMateriaStatus","levelNeeded","orderOrRecordMateria","order","getStatus","prereqs","isInInventory","isFavorite","isObtained","missingPrereq","obtained","Favorite","statusDescription","Collected","Vault","levelCap","isLowLevel","LockedLowLevel","find","LockedMissingPrereq","Unlocked","Unknown","getPrereqs","allRecordMateria","setRecordMateria","obtainRecordMateria","setRecordMateriaInventory","inventory","favorites","warehouse","updateRecordMateriaInventory","favorite","getOffBannerRelics","banner","probabilities","bannerSet","Set","bannerRelics","byRelic","has","setRelicDrawBanners","banners","setRelicDrawGroups","groups","setRelicDrawProbabilities","setExchangeShopSelections","selections","loadBanners","bannerIds","XRegExp","attack_1","split_1","status_1","statusAlias_1","types_1","appendGroup","outGroup","inGroup","description","checkBurstAndBraveMode","selfOther","formatDamageType","abbreviate","tierOrder","Default","SB","SSB","BSB","Glint","Glint+","OSB","AOSB","USB","AASB","CSB","RW","Shared","healRe","String","raw","templateObject_1","__makeTemplateObject","statusEffectRe","templateObject_2","statModRe","templateObject_3","describeEnlirAttack","attack","damage","statusInfliction","hybridDamageType","isAoE","randomChances","isFixedDamage","isPiercing","hybridDamage","isRanged","isJump","isOverstrike","includeSchool","showNoMiss","isNoMiss","additionalCrit","additionalCritType","additionalCritDamage","scaleToDamage","scaleType","orDamage","orCondition","defaultDamage","minDamage","additionalDamage","additionalDamageType","isSummon","isNat","statusChance","parseEnlirStatus","defaultDuration","duration","statusDuration","chance","chanceDescription","formatMrP","mrP","showTime","burstToggleText","burstToggle","text","chain","other","time","instant","fast","slow","describeMrPTime","describeEnlirSoulBreak","includeSbPoints","prereqStatus","aoeOther","partyOther","detailOther","attackOpts","parseEnlirAttack","thisDamage","thisStatusInfliction","attack2","_b","skillsAndChances","unzip","skills","skillOpt_1","thisSkill","rageTurns","isPureRage","rageSkill","turns","rageSkills","getRageSkills","rageStatus","formatDuration","fieldBonus","RegExp","who","heal","healPercent","damagePercent","healFactor","fixedHp","rank","ifAllyAlive","dispelEsunaRe","exec","effect","verb","statusString","removes","wholeClause","splitSkillStatuses","parseStatusItem","reduce","checkForAndStatuses","sortStatus","thisStatus","thisStatusIndex","statusName","durationUnits","scalesWithUses","stacking","condition","includeStatus","parsed","parseEnlirStatusWithSlashes","isExLike","isDetail","isBurstToggle","isTrance","isVariableDuration","specialDuration","optionCount","fallback","numAttacks","totalChanceFraction","pow","round","formatChance","durationText","atStatus","atStatusCount","describeStats","statMod","revive","resolveStatusAlias","ether","formatRandomEther","type1","type2","upperFirst","trim","formatSmartEther","percentChance","timesNumber","points","ifSuccessful","sbPointsAlias","castTime","splice","burstCommands_1","braveCondition","value","Array","isArray","compareWithUndefined","compare","a","b","u","initialState","byWorld","getDungeonsForWorld","state","worldDungeons","getDungeonsForWorlds","w","flatten","getWorldIdForDungeon","findKey","action","getType","newDungeons","_c","_d","dungeonUpdate_1","updates","update","omit","updateIn","_e","LangContext","createContext","getLang","session","isJp","updateSession","alphabet","fromCharCode","charCodeAt","alphabetize","by","letter","charAt","pluralize","word","pluralWord","RecordMateriaTable_1","RecordMateriaTooltip_1","RecordMateriaTableGroup","isAnonymous","tables","tooltipId","Fragment","t","RecordMateriaTable","table","RecordMateriaTooltip","reselect_1","characters_1","getDupeCount","relicIds","ownedSoulBreaks","ownedLegendMateria","isGroup","getBannerDetails","createSelector","relicDraws","getOwnedSoulBreaks","getOwnedLegendMateria","mapValues","allSelections","totalCount","dupeCount","allRelics","j","getOneBannerDetails","getBannersAndGroups","bannerDetails","group","groupName","g","groupBanners","bannerCount","canPull","canSelect","canPullOrSelectCount","concat","getMissingBanners","missing","delete","from","showMessage","hideMessage","messageIdOrIndex","showDanger","color","setProgress","progress","react_fontawesome_1","recordMateria_1","StatusIcon","FontAwesomeIcon","unknown","icon","fixedWidth","lockedLowLevel","lockedMissingPrereq","unlocked","collected","vault","BadRelicDrawMessage","idsToSet","ids","index_1","finisherText","hitWeaknessTriggerText","formatTriggeredEffect","trigger","hideDuration","isExStatus","isAwokenStatus","checkCustomTrigger","enlirStatus","followUpRe","parseFollowUpEffect","statuses","customSkillSuffix","allEffects","triggerType","takeDamageTrigger","autoInterval","triggerPrereqStatus","realmThresholdCount","realmThresholdType","randomSkills","isDamageTrigger","customTriggerSuffix","isSameTrigger","isFinisherStatus","getFinisherSkillName","isFollowUpStatus","isModeStatus","codedName","forceDetail","isTranceStatus","allTranceStatus","isCustomStatMod","formatTurns","sourceType","describeEnlirStatus","genericStatus","multiplier","doubleAlias","stat","statusAsStatMod","baseStatus","shouldSkipEffect","describeEnlirStatusEffect","followUp","sequence","baseStatusName","thisStatusName","thisEffects","splitStatusEffects","thisStatusFollowUp","getFollowUpStatusSequence","customStatusesDescription","sequence_1","effects_1","splitNumbered","numbered","resolveNumbered","effectAlias","describeMergedSequence","triggerDescription","describeAutoInterval","attackType","extractCount","slashOptionsRe","describeFollowUpTrigger","removeRedundantWho","describeFollowUpStatus","describeFollowUpEffect","suffix","describeFollowUpSkill","describeFollowUp","finisherSkillName","skillName","describeFinisher","preferNumbered","exclusiveStatus","baseName","isStackingStatus","genericEffect","resolveEffectAlias","enlirRankBoost","schoolOrAbility","extraHones","enlirRankBoostRe","rankBoostAlias","stackingSchoolOrAbility","stackingMax","boostedType","maxCount","healHp","start","add","baseEffect","kind","baseAlias","chances","getSlashOptions","describeFollowUpItem","parseWho","statusOptions","skillOptions","lastWho","getSpecialDuration","isEx","isAwoken","forceEffects","describeEffects","mndModifier","makeResult","stat1","stat2","amount_1","makeStat","statusItemRe","statusText","lookaheadWho","duration1","duration2","durationUnits1","durationUnits2","scalesWithUses1","scalesWithUses2","scaleWithUsesSkill1","scaleWithUsesSkill2","prereq","weakness","characterInParty","lookahead","statusSortOrder","Haste","Last Stand","accumulator","currentValue","thisAndThat","addCastSpeedAliases","aliases","fromType","toType","castSpeedAliases_1","to","statusAlias","simple","Astra","Cast speed *2","Quick Cast","Extended Quick Cast","High Quick Cast","Magical Quick Cast","Magical High Quick Cast","Low Regen","Medium Regen","High Regen","Physical Blink Stacking 2","Radiant Shield: 100%","High Retaliate","Heavy Charge =0","Instant KO","No Air Time","Heavy Charge Booster","Sentinel","Runic","High Runic","Unyielding Fist","Haurchefant Cover","Magical Blink","Physical Blink","Quick Cast {X}","High Quick Cast {X}","Instant Cast {X}","Magical Quick Cast {X}","Magical High Quick Cast {X}","Magical Instant Cast {X}","Physical Quick Cast {X}","Physical High Quick Cast {X}","Physical Instant Cast {X}","Magical Blink {X}","Physical Blink {X}","Dual Blink {X}","Stoneskin: {X}%","Reraise: {X}%","Heals +{X}%","Critical Chance {X}%","Critical Damage +{X}%","{X}% Critical","Critical {X}%","{X}% Damage Reduction Barrier 1","{X}% Damage Reduction Barrier 2","{X}% Damage Reduction Barrier 3","Doom: {X}","Ingredients +{X}","Ingredients {X}","HP Stock ({X})","Damage Cap {X}","Status Chance {X}%","Crash {X}%","IC{X}","Soul Break Gauge +{X}","{X} SB points","allEnlirSchools_1","allEnlirElements_2","allEnlirSchools_2","addCastSpeedEffectAliases","cast speed x2.00","cast speed x3.00","cast speed x9999999","cast speed x2.00 for magical damage","cast speed x3.00 for magical damage","critical chance ={X}%","cast speed x{X}","cast speed x{X} for magical damage","allEnlirSchools_3","numberValue","formatter","defaultResolveOptions","resolveAlias","routes","BrowserLink_1","DonationInfo","BrowserLink","href","__rest","AppFeatures","moment","formatTimeT","unix","classnames_1","CollapsibleCard","_this","call","handleClick","setState","hasShown","titleClassName","titleStyle","collapseId","headerId","onClick","style","data-toggle","data-target","aria-expanded","aria-controls","aria-labelledby","data-parent","getClasses","isActive","DungeonBadge","stamina","mastered","hasUnlocked","isUnlocked","classes","completed","totalStamina","rewards","rewardsTitle","anonymousProcessor","getInfo","hasPrizes","getPrizes","standardProcessor","getProcessor","react_redux_1","PrizeList_1","DungeonPrizeList","showItemType","filteredPrizes","PrizeList","showTooltips","connect","prefs","LangContext_1","data_1","urls_1","RelicTooltip_1","Consumer","prize","data-tip","data-for","src","width","height","toLocaleString","RelicTooltip","relicId","place","PureComponent","short","101001","102001","103001","104001","105001","106001","107001","108001","109001","110001","111001","112001","113001","114001","115001","150001","160001","170001","190001","200001","900072","prefs_1","toPairs","itemTypes","ItemTypeChecklist","arguments","handleChange","e","selected","checked","handleChangeAll","fromPairs","show","pick","selectAll","onChange","htmlFor","dispatch","showItemTypes","sprintf_js_1","session_1","textUtils_1","ProgressBar_1","LoadMissingPrompt","preventDefault","onLoad","missingCount","hasSession","missingText","countText","countPluralText","loadingText","missingPrompt","sprintf","role","current","ProgressBar","ownProps","progressKey","hasSessionState","userSession","sessionCookie","isUrlJp","hostname","StartupHandler","getRequestLang","request","axios_1","messages_1","sessionConfig","headers","user-session","cookie","accept","callApi","callback","config","debug","get","then","catch","ReactTooltip","urls","BrTextToP_1","StatusIcon_1","getContent","recordMateriaId","rm","context","enlirRM","gameDescription","BrTextToP","enlirDescription","descriptionOnly","textBlock","iconsBlock","renderStatus","statusBlock","unlockCondition","contextType","react_router_dom_1","relicDraws_1","formatTotalCount","details","formatAvailableCount","formatDupeCount","RelicDrawGroupLink","Link","image","imageUrl","RelicDrawBannerLink","RelicDrawBannerList","groupLink","bannerLink","sbConvergentScaleFactor","otherConvergentScaleFactor","convergentScaleType","describeConvergentDamage","minMultiplier","maxMultiplier","scaleFactor","describeDamage","numberOfEnemies","exp","convergentMultiplier","thresholdJoin","attackMultiplier","includeNumAttacks","describeRandomDamage","damageFunction","randomAttacks","percents","damages","formatThreshold","thresholdValues","thresholdName","units","describeOrCondition","status_2","statusName_1","commandRelatingToStatus","findIndex","describeDamageType","skillOrFormula","formula","describeHybridDamageType","describeAdditionalCritType","additionalCritCharacter","additionalCritStatus","additionalCritScaleWithUses","additionalCritFinisherAttackCount","additionalCritFinisherAttackType","describeAdditionalDamageType","additionalDamageAbilityCount","additionalDamageAbility","attackRe","hasMultiplier","fixedDamage","finisherPercentDamage","attacks","asPercents","percentage","parseRandomAttacks","scaleToAttackMultiplier","numAttacksRange","modifiers","isHybrid","fixedDamage_1","randomMultiplier","altAttackMultiplier","criteria","finisherPercentCriteria","attackMultipliersRange","constant","zip","describeThresholdDamage","hybridAttackMultiplier","followedBy","parentAttackType","numAttacksString","attackMultiplierString","overstrike","describeFollowedByAttack","orMultiplier","orNumAttacksString","withCondition","orNumAttacks","describeOr","sbMultiplierIncrease","maxSbMultiplier","statThreshold","statThresholdValue","lowHpThresholdValue","statusAilmentsThresholdValue","scaleWithUses","finisherAttackThresholdCount","finisherAttackThresholdType","attackThresholdType","attackThresholdCount","simpleAttackThresholdCount","differentAbilityType","differentAbilityValue","statBreakCount","scaleWithSkillUses","statusThreshold","statusThresholdCount","isOwnStatusThreshold","tookHits","tookHitsValue","isConvergent","describeScaleType","defaultMultiplier","noMiss","piercing","isStat","isStatMod","prev","reverse","thisPart","mrP_1","brave_1","getBraveColumns","formatBraveCommands","getBurstColumns","cmd","tierClass","unique","super","burst","ultra","awakening","glint","soulBreakAliases","mrPSoulBreaks","SoulBreakListItem","renderBraveCommands","columns","braveCommand","renderBurstCommands","burstCommand","command","soulBreak","gl","fullClassName","jp","react_dom_1","react_hot_loader_1","Root_1","globalStyles_1","configureStore_1","store","configureStore","rootElement","document","getElementById","initializeGlobalStyles","hasChildNodes","hydrate","AppContainer","Root","history","connected_react_router_1","Routes_1","Provider","ConnectedRouter","Routes","react_router_1","routes_1","App_1","Switch","path","Route","AppMoreInfoPage_1","DungeonsPage_1","RecordMateriaPage_1","RelicDrawsPage_1","SiteHomePage_1","SoulBreaksPage_1","AppMoreInfoPage","DonationInfo_1","AppMoreInfo_1","Page_1","renderFooter","AppMoreInfo","AppFeatures_1","MessageBox_1","MessagesList","messages","messageIds","onClose","MessageBox","aria-label","aria-hidden","module","DungeonsList_1","ItemTypeChecklist_1","LoadMissingPrompt_1","loadDungeons_1","DungeonsPage","handleLoad","missingWorlds","DungeonsList","right","worlds_1","DungeonCategoryList_1","DungeonCategoryList","CollapsibleCard_1","MaybeWrap_1","DungeonCard_1","DungeonCategoryTitle_1","WorldPrizeList_1","bySubcategory","subcategories","subcategory","subcategorySortOrder","isEmpty","sorter","result_1","getSortedWorlds","categoryWorlds","DungeonCategoryTitle","subWorlds","MaybeWrap","test","child","Children","only","localData_1","dungeons_2","DungeonBadge_1","DungeonCommon_1","DungeonPrizeList_1","DungeonCardTitle","titleText","DungeonDetails","DungeonListItem","showDetails","showTooltip","DungeonCard","noMessage","isSeriesIcon","iconUrl","localIcon","localIcons","backgroundImage","darkElement","earthElement","fireElement","holyElement","iceElement","lightningElement","poisonElement","waterElement","windElement","dressRecords","BrText_1","lines","separateWithBr","BrText","lines_1","WorldBadge_1","categoryImages","paddingRight","alt","ModalDialog_1","WorldPrizeList","handleOpen","isOpen","handleClose","ModalDialog","Modal","ModalHeader_1","onRequestClose","overlay","backgroundColor","overflowY","ModalHeader","aria-valuenow","aria-valuemin","aria-valuemax","progress_1","apiUrls","doLoadDungeons","select","sent","put","response","convertWorldDungeons","data","watchLoadDungeons","takeEvery","dungeonsSchemas","common_1","buttonStyleSort","NORMAL","EXTRA","DOOM","effectiveDifficulty","sortDungeonsStandard","dungeonData","dungeonList","sortType","room_of_abyss_assets","button_style","challenge_level","sortDungeons","dungeon_list_nodes","nodes","Map","nextSortOrder","toProcess","root","node","NodeType","Start","set","subtreeRoot","shift","dungeon_id","pathInfo","path_info","nextIds_1","sortDungeonsByNode","sorted","unsorted","convertPrizeItems","num","type_name","convertGradePrizeItems","allPrizes","MinRewardGrade","grade","convert","claimed","is_got_grade_bonus_prize","addRecordDungeonChests","dungeonObject","nodes_1","remaining_treasure_num","forceUnlock","series_id","opened_at","closed_at","is_unlocked","is_clear","is_master","total_stamina","staminaList","stamina_list","completion","RewardType","Completion","FirstTime","Mastery","convertWorld","event","textMaster","seriesShortName","tag","series_formal_name","startCase","checkForWorldIcon","crystalTowerIcons","ability","handleWinBattle","is_dungeon_clear","dungeon_rank","unlock_dungeons","dungeonsHandler","appInitData","newWorlds","events","crystalTowers","worldsById","floor_infos","world_id","floor_icon_id","seenWorlds","totalUnknown","events_1","resultWorld","worlds_2","convertWorlds","crystal_towers","now","Date","describe","summary","master_count","clear_count","summary1","dungeon_status_summary","summary2","dungeon_term_list","newLength","newCompleted","newMastered","oldLength","oldCompleted","oldMastered","isNewComplete","isNewMaster","checkForUpdatedRealmDungeons","getState","has_new_dungeon","checkForUpdatedRecordDungeons","query","win_battle","battle_win","progress_battle_list_gimmick","gimmick_effect","prize_master","user","recordMateriaDetail_1","RecordMateriaRoutes_1","RecordMateriaPage","renderContents","hasInventory","location","RecordMateriaRoutes","getRecordMateriaDetail","AttackReplacement_1","DamageHealing_1","Misc_1","RecordMateriaGrid_1","StatBuffs_1","renderPart","Part","renderAll","RecordMateriaGrid","renderStatBuffs","StatBuffs","renderDamageHealing","DamageHealing","renderAttackReplacement","AttackReplacement","renderMisc","Misc","index","subUrl","NavLink","exact","activeClassName","RecordMateriaTableGroup_1","AttackReplacementDefinitions_1","RecordMateriaList_1","renderCell","row","rowIndex","contents","flatMap","RecordMateriaList","renderRow","scope","header","rows","byCharacter_1","renderItem","characterName","getByCharacter","makeCharacterLookup","memoize","characterLookup","line","3","2","1","DamageHealingDefinitions_1","13","12","11","1_35","1_25","13w","1_4","1_3","1_15","1_2","8w","1_1","15w","20w","MiscDefinitions_1","low","counter","100","50","40","ag_grid_react_1","GridContainer_1","DescriptionCell_1","StatusCell_1","compareByNumberField","fieldName","valueA","valueB","nodeA","nodeB","getField","objectValues","handleGridReady","api","getDisplayedRowCount","handleFilter","currentTarget","getRowNodeId","columnDefs","headerName","field","valueGetter","comparator","cellRendererFramework","DescriptionCell","StatusCell","componentDidUpdate","updateCount","newCount","GridContainer","placeholder","AgGridReact","enableSorting","enableColResize","rowData","quickFilterText","deltaRowDataMode","onGridReady","onViewportChanged","rebuild","onRowDataChanged","onFilterChanged","ID","StatBuffsDefinitions_1","13x","10x","10","15","10-","20","20-","25","20d","20r","10dr","10d","20dr","25d","BadRelicDrawMessage_1","RelicDrawBannerList_1","loadBanners_1","relicDraws_2","RelicDrawBannerPage_1","RelicDrawGroupPage_1","RelicDrawsPage","groupBannerLink","missingBanners","bannersAndGroups","backLink","params","doLoadBanners","allBannerIds","convertRelicDrawProbabilities","probabilitiesResult","exchangeShopId_1","shopSelections","convertExchangeShopSelections","selectionsResult","watchLoadBanners","convertBanner","gacha","priority","box_list","entry_point_list","term_limit_num","purchased_count","total_executable_num","user_exchange_shop_exchanged_num","banner_list","item_id","exchange_shop_id","line_up_image_path","convertRelicDrawBanners","gacha_group","series_list","sortedSeries","processed","process","thisGroup","content_series_ids","gacha_group_1","archiveSeries","is_book_gacha","thisGroup_1","realmRelicDraws","realmRelicDrawId","thisGroup_2","entryPointIds","prob_by_rarity","equipments","byRarity","probability","exchange_shop","item_package","gachaHandler","gacha/show","gacha/probability","exchange_shop/prize_list","shop_id","RelicDrawBannerContents_1","RelicDrawBannerPage","RelicDrawBannerContents","RelicDrawBannerTable_1","sortRelics","renderSelections","renderFeatured","renderOffBanner","offBanner","renderFallback","legendMateria_1","SoulBreakListItem_1","legendMateriaAliases","RelicDrawBannerTable","showProbability","tierClassName","isDupe","commandColumns","rowSpan","dupe","describeMrPLegendMateria","colCount","relicsArray","grouped","colSpan","theseRelics","dmg","whenDescription","when","describeBattleStart","resolveWithHandlers","handlers","handlers_1","re","skillEffectHandlers","simpleSkillHandlers","elements","addedEffects","legendMateriaHandlers","schoolOrElement","bonus","reraiseStatus","critical","statuses1","statuses2","isHeal","bonusSb","statusNames","lastStatus","selfStatus","partyStatus","selfStatusDescription","partyStatusDescription","percentDamage","what","percentBonus","statDest","isUncertain","formatBraveMinLevel","MAX_BRAVE_LEVEL","getBraveDamage","allParts","firstLevel","lastLevel","findLastIndex","filterBraveLevels","overstrikeLevel","heals","healCount","getBraveHeals","combinedEffects","effectIndex","effectLevel","mergedEffects","getBraveEffects","RelicDrawGroupPage","SiteHome_1","SiteHomePage","SiteHome","resources_1","SiteExternalLink_1","SiteExternalLink","gameUrl","ffrkCommunityUrl","misterPUrl","redditUrl","downloadUrl","ffrkCommunityHelp","misterPHelp","react_router_hash_link_1","SoulBreakList_1","soulBreakAnchor","SoulBreaksPage","HashLink","letterAnchor","CharacterSoulBreaks_1","SoulBreakList","CharacterSoulBreaks","owned","unowned","AppLayout_1","App","AppLayout","GoogleAd250x250_1","logo","nav","ad","GoogleAd250x250","componentDidMount","window","adsbygoogle","console","log","display","data-ad-client","data-ad-slot","fontawesome_svg_core_1","faArchive_1","faArrowDown_1","faCheck_1","faCoffeeTogo_1","faEllipsisH_1","faExternalLink_1","faLock_1","faLockOpen_1","faQuestion_1","faStar_1","faUnlock_1","$","jQuery","library","faArchive","faArrowDown","faCheck","faCoffeeTogo","faEllipsisH","faExternalLink","faLock","faLockOpen","faQuestion","faStar","faUnlock","rootNode","setAppElement","redux_1","history_1","redux_thunk_1","reducers_1","createBrowserHistory","router","routerMiddleware","enhancer","applyMiddleware","createStore","createRootReducer","battle_1","dungeonScores_1","options_1","proxy_1","combineReducers","battle","dungeonScores","proxy","connectRouter","_persist","blacklist","dropItems","setDropItems","clearDropItems","immer_1","produce","draft","setCharacter","setCharacters","updateCharacter","assign","setSoulBreaks","setLegendMateria","soulBreakIds","legendMateriaIds","scores","setDungeonScore","score","updateDungeonScore","newScore","isScoreBetterThan","DungeonScoreType","formatTime","hundredths","seconds","minutes","formatPercent","totalDamage","maxHp","compareScore","scoreA","scoreB","ClearTime","lt","TotalDamage","gt","PercentHpOrClearTime","won","estimateScore","unclaimed","timePrizes","percentPrizes","sum","maxHpByDifficulty","240","280","0","totalSeen","timePrizes_1","percentPrizes_1","isSub30","formatScore","formatEstimatedScore","maybe","op","shouldUseEstimatedScore","estimatedScore","newMessages","messageIdOrIndex_1","defaultOptions","setOption","alwaysShowTimer","staticBattleBackground","saveTrafficCaptures","hideNewcomerBanners","newOptions","updateProxyStatus","updateLastTraffic","lastTraffic","toSet","ids_1","ids_2","ids_3","all","all_1","newBanners_1","pickBy"],"mappings":"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","file":"static/js/main.9c6936c1.chunk.js","sourcesContent":["import * as _ from 'lodash';\nimport { logger } from '../utils/logger';\n\n// TODO: Try removing duplicating in unions and arrays - see https://stackoverflow.com/a/45486495/25507\n\nexport type EnlirElement =\n  | 'Fire'\n  | 'Ice'\n  | 'Lightning'\n  | 'Earth'\n  | 'Wind'\n  | 'Water'\n  | 'Holy'\n  | 'Dark'\n  | 'Poison'\n  | 'NE';\nexport const allEnlirElements: EnlirElement[] = [\n  'Fire',\n  'Ice',\n  'Lightning',\n  'Earth',\n  'Wind',\n  'Water',\n  'Holy',\n  'Dark',\n  'Poison',\n  'NE',\n];\nexport const isEnlirElement = (s: string): s is EnlirElement =>\n  allEnlirElements.indexOf(s as EnlirElement) !== -1;\n\nexport type EnlirFormula = 'Physical' | 'Magical' | 'Hybrid' | '?';\n\nexport type EnlirSchool =\n  | '?'\n  | 'Bard'\n  | 'Black Magic'\n  | 'Celerity'\n  | 'Combat'\n  | 'Dancer'\n  | 'Darkness'\n  | 'Dragoon'\n  | 'Heavy'\n  | 'Knight'\n  | 'Machinist'\n  | 'Monk'\n  | 'Ninja'\n  | 'Samurai'\n  | 'Sharpshooter'\n  | 'Special'\n  | 'Spellblade'\n  | 'Summoning'\n  | 'Support'\n  | 'Thief'\n  | 'White Magic'\n  | 'Witch';\nexport const allEnlirSchools: EnlirSchool[] = [\n  '?',\n  'Bard',\n  'Black Magic',\n  'Celerity',\n  'Combat',\n  'Dancer',\n  'Darkness',\n  'Dragoon',\n  'Heavy',\n  'Knight',\n  'Machinist',\n  'Monk',\n  'Ninja',\n  'Samurai',\n  'Sharpshooter',\n  'Special',\n  'Spellblade',\n  'Summoning',\n  'Support',\n  'Thief',\n  'White Magic',\n  'Witch',\n];\nexport const isEnlirSchool = (s: string): s is EnlirSchool =>\n  allEnlirSchools.indexOf(s as EnlirSchool) !== -1;\n\nexport type EnlirSkillType = 'BLK' | 'NAT' | 'NIN' | 'PHY' | 'SUM' | 'WHT' | '?';\n\nexport type EnlirSoulBreakTier =\n  | 'Default'\n  | 'SB'\n  | 'SSB'\n  | 'BSB'\n  | 'OSB'\n  | 'USB'\n  | 'CSB'\n  | 'Glint'\n  | 'AOSB'\n  | 'AASB'\n  | 'Glint+'\n  | 'RW'\n  | 'Shared';\n\n// FIXME: Interfaces for remaining Enlir types\n\nexport type EnlirStat = 'atk' | 'def' | 'mag' | 'res' | 'mnd' | 'acc' | 'eva';\nexport const allEnlirStats: EnlirStat[] = ['atk', 'def', 'mag', 'res', 'mnd', 'acc', 'eva'];\n\ninterface EnlirRelicStats {\n  rarity: number;\n  level: number;\n  atk: null | number;\n  def: null | number;\n  mag: null | number;\n  res: null | number;\n  mnd: null | number;\n  acc: null | number;\n  eva: null | number;\n}\n\nexport interface EnlirGenericSkill {\n  name: string;\n  type: EnlirSkillType | null;\n  target: string;\n  formula: EnlirFormula | null;\n  multiplier: number | null;\n  element: EnlirElement[] | null;\n  time: number | null;\n  effects: string;\n  counter: boolean;\n  autoTarget: string;\n  id: number;\n  gl: boolean;\n}\n\nexport interface EnlirAbility extends EnlirGenericSkill {\n  rarity: number;\n  sb: number;\n  uses: number;\n  max: number;\n  orbs: { [orbName: string]: number[] };\n  introducingEvent: string | string;\n  nameJp: string;\n}\n\nexport interface EnlirBraveCommand extends EnlirGenericSkill {\n  character: string;\n  source: string;\n  brave: 0 | 1 | 2 | 3;\n  school: EnlirSchool;\n  sb: number;\n  braveCondition: Array<EnlirElement | EnlirSchool>;\n  nameJp: string;\n}\n\nexport interface EnlirBurstCommand extends EnlirGenericSkill {\n  character: string;\n  source: string;\n  sb: number;\n  school: EnlirSchool;\n  nameJp: string;\n}\n\nexport interface EnlirCharacter {\n  realm: string;\n  name: string;\n  introducingEventLv50: string;\n  lv50: { [key: string]: number };\n  introducingEventLv65: string;\n  lv65: { [key: string]: number };\n  introducingEventLv80: string;\n  lv80: { [key: string]: number };\n  introducingEventLv99: string;\n  lv99: { [key: string]: number };\n  introducingEventRecordSpheres: string;\n  recordSpheres: { [key: string]: number };\n  introducingEventLegendSpheres: string;\n  legendSpheres: { [key: string]: number };\n  equipment: { [key: string]: boolean };\n  skills: { [key: string]: number };\n  id: number;\n  gl: boolean;\n}\n\nexport interface EnlirLegendMateria {\n  realm: string;\n  character: string;\n  name: string;\n  effect: string;\n  master: string | null;\n  relic: string | null;\n  nameJp: string;\n  id: number;\n  gl: boolean;\n}\n\nexport interface EnlirOtherSkill extends EnlirGenericSkill {\n  sourceType: string;\n  source: string;\n  sb: number;\n  school: EnlirSchool;\n}\n\nexport interface EnlirRecordMateria {\n  realm: string;\n  character: string;\n  name: string;\n  effect: string;\n  unlockCriteria: string;\n  nameJp: string;\n  id: number;\n  gl: boolean;\n}\n\nexport interface EnlirRelic {\n  name: string;\n  realm: string;\n  type: string;\n  rarity: number;\n  stats: EnlirRelicStats;\n  effect: null | string;\n  character: null | string;\n  soulBreak: null | string;\n  legendMateria: null | string;\n  baseStats: EnlirRelicStats;\n  maxStats: EnlirRelicStats;\n  id: number;\n  gl: boolean;\n}\n\nexport interface EnlirSoulBreak extends EnlirGenericSkill {\n  realm: string;\n  character: string;\n  points: number;\n  tier: EnlirSoulBreakTier;\n  master: string | null;\n  relic: string;\n  nameJp: string;\n}\n\nexport interface EnlirStatus {\n  id: number;\n  name: string;\n  effects: string;\n  defaultDuration: number | null;\n  mndModifier: number | null;\n  mndModifierIsOpposed: boolean;\n  exclusiveStatus: string[] | null;\n  codedName: string;\n  notes: string | null;\n}\n\nexport type EnlirSkill =\n  | EnlirAbility\n  | EnlirBraveCommand\n  | EnlirBurstCommand\n  | EnlirOtherSkill\n  | EnlirSoulBreak;\n\nconst rawData = {\n  abilities: require('./enlir/abilities.json') as EnlirAbility[],\n  braveCommands: require('./enlir/brave.json') as EnlirBraveCommand[],\n  burstCommands: require('./enlir/burst.json') as EnlirBurstCommand[],\n  characters: require('./enlir/characters.json') as EnlirCharacter[],\n  legendMateria: require('./enlir/legendMateria.json') as EnlirLegendMateria[],\n  magicite: require('./enlir/magicite.json'),\n  otherSkills: require('./enlir/otherSkills.json') as EnlirOtherSkill[],\n  recordMateria: require('./enlir/recordMateria.json') as EnlirRecordMateria[],\n  relics: require('./enlir/relics.json') as EnlirRelic[],\n  soulBreaks: require('./enlir/soulBreaks.json') as EnlirSoulBreak[],\n  status: require('./enlir/status.json') as EnlirStatus[],\n};\n\n// FIXME: Properly update rawData outside of app\n\ninterface CharacterMap<T> {\n  [character: string]: T[];\n}\n\ninterface Command extends EnlirGenericSkill {\n  character: string;\n  source: string;\n}\n\ninterface CommandsMap<T> {\n  [character: string]: {\n    [soulBreak: string]: T[];\n  };\n}\n\nfunction makeCharacterMap<T extends { character: string }>(items: T[]): CharacterMap<T> {\n  const result: CharacterMap<T> = {};\n  for (const i of items) {\n    result[i.character] = result[i.character] || [];\n    result[i.character].push(i);\n  }\n  return result;\n}\n\nfunction makeCommandsMap<T extends Command>(commands: T[]): CommandsMap<T> {\n  const result: CommandsMap<T> = {};\n  for (const i of commands) {\n    result[i.character] = result[i.character] || {};\n    result[i.character][i.source] = result[i.character][i.source] || [];\n    result[i.character][i.source].push(i);\n  }\n  return result;\n}\n\n/**\n * Maps from relic IDs (equipment IDs) to soul breaks or legend materia.\n *\n * NOTE: Does not include shared soul breaks.\n */\nfunction makeRelicMap<T extends { character: string; name: string }>(\n  relics: EnlirRelic[],\n  prop: keyof EnlirRelic,\n  items: T[],\n): { [relicId: number]: T } {\n  const result: { [relicId: number]: T } = {};\n  const indexedItems = _.keyBy(items, i => i.character + ':' + i.name);\n  for (const i of relics) {\n    if (i[prop] && i.character) {\n      const found = indexedItems[i.character + ':' + i[prop]];\n      if (found) {\n        result[i.id] = found;\n      }\n    }\n  }\n  return result;\n}\n\nexport const enlir = {\n  abilities: _.keyBy(rawData.abilities, 'id'),\n  abilitiesByName: _.keyBy(rawData.abilities, 'name'),\n  braveCommands: _.keyBy(rawData.braveCommands, 'id'),\n  braveCommandsByCharacter: makeCommandsMap(rawData.braveCommands),\n  burstCommands: _.keyBy(rawData.burstCommands, 'id'),\n  burstCommandsByCharacter: makeCommandsMap(rawData.burstCommands),\n  characters: _.keyBy(rawData.characters, 'id'),\n  charactersByName: _.keyBy(rawData.characters, 'name'),\n  legendMateria: _.keyBy(rawData.legendMateria, 'id'),\n  magicites: _.keyBy(rawData.magicite, 'id'),\n\n  // NOTE: Other Skills' names are not unique, and they often lack IDs, so\n  // expose the array.\n  otherSkills: rawData.otherSkills,\n  otherSkillsByName: _.keyBy(rawData.otherSkills, 'name'),\n\n  relics: _.keyBy(rawData.relics, 'id'),\n  recordMateria: _.keyBy(rawData.recordMateria, 'id'),\n  soulBreaks: _.keyBy(rawData.soulBreaks, 'id'),\n  soulBreaksByCharacter: makeCharacterMap(rawData.soulBreaks),\n  statusByName: _.keyBy(rawData.status, 'name'),\n  relicSoulBreaks: makeRelicMap(rawData.relics, 'soulBreak', rawData.soulBreaks),\n  relicLegendMateria: makeRelicMap(rawData.relics, 'legendMateria', rawData.legendMateria),\n};\n\nfunction applyPatch<T>(\n  lookup: { [s: string]: T },\n  name: string,\n  check: (item: T) => boolean,\n  apply: (item: T) => void,\n) {\n  if (!lookup[name]) {\n    logger.warn(`Failed to patch ${name}: could not find item`);\n    return;\n  }\n  const item = lookup[name];\n  if (!check(item)) {\n    logger.warn(`Failed to patch ${name}: item does not match expected contents`);\n    return;\n  }\n  apply(item);\n}\n\n/**\n * HACK: Patch Enlir data to make it easier for our text processing.\n */\nfunction patchEnlir() {\n  // Pluto Knight Triblade is a very difficult effect to parse.  By revising its\n  // wording, we can let our slash-merge feature take care of it.\n  applyPatch(\n    enlir.statusByName,\n    'Pluto Knight Triblade Follow-Up',\n    pluto =>\n      pluto.effects ===\n      'Casts Pluto Knight Triblade and grants Minor Buff Fire, Minor Buff Lightning and Minor Buff Ice after exploiting elemental weakness',\n    pluto => {\n      pluto.effects =\n        'Casts Pluto Knight Triblade and grants Minor Buff Fire/Lightning/Ice after exploiting elemental weakness';\n    },\n  );\n\n  // Sarah's USB3 is pure madness.  I have no shame in whatever hacks it takes\n  // to process it.\n  applyPatch(\n    enlir.soulBreaks,\n    '22300009',\n    aria =>\n      aria.effects ===\n      'Restores HP (85), grants Regenga, grants Quick Cast to the user. Grants Minor Buff Holy/Dark if Warrior of Light/Garland is in the party, grants Medium Buff Holy and Medium Buff Dark if both are in the party',\n    aria => {\n      aria.effects =\n        'Restores HP (85), grants Regenga, grants Quick Cast to the user, ' +\n        'grants Minor Buff Holy if Warrior of Light is in the party, ' +\n        'grants Minor Buff Dark if Garland is in the party, ' +\n        'grants Medium Buff Holy/Dark if Warrior of Light & Garland are in the party';\n    },\n  );\n\n  // A purely conditional attack - we may not even have an Enlir format for\n  // this.  The format chosen by the spreadsheet is probably actually intended\n  // for threshold attacks, but we'll make it work.\n  applyPatch(\n    enlir.otherSkillsByName,\n    'Runic Awakening',\n    runicAwakening =>\n      runicAwakening.effects ===\n      'Grants Magical Blink 2 to the user, five single attacks (0.52 each) if user has Magical Blink 1/2',\n    runicAwakening => {\n      runicAwakening.effects =\n        'Five single attacks (0.52 each) if user has Magical Blink 1/2, grants Magical Blink 2 to the user';\n    },\n  );\n\n  // Abbreviations - I don't know if it's best to update Enlir to remove these\n  // or not.  Where possible, we update our code to handle abbreviations, but\n  // some are too hard.\n  applyPatch(\n    enlir.burstCommands,\n    '30512822',\n    heavyBreak =>\n      heavyBreak.effects ===\n      'Four single attacks (0.58 each), ATK and MAG -20/30/50% for 15 seconds at Heavy Charge 0/1/2, Heavy Charge =0 to the user',\n    heavyBreak => {\n      // Insert 'causes' - it's too big to fit on one line, but too much of our\n      // processing keys off of it.\n      heavyBreak.effects =\n        'Four single attacks (0.58 each), ATK and MAG -20/30/50% for 15 seconds at Heavy Charge 0/1/2, causes Heavy Charge =0 to the user';\n    },\n  );\n  applyPatch(\n    enlir.soulBreaks,\n    '20660006',\n    windUltra =>\n      windUltra.effects ===\n      'Ten random attacks (0.68 each), Imperil Wind 20% for 25 seconds, grants ATK and DEF +30% for 25 seconds, Quick Cast 1 and Wind Quick Cycle to the user',\n    windUltra => {\n      // Insert 'causes' - same as above\n      windUltra.effects =\n        'Ten random attacks (0.68 each), causes Imperil Wind 20% for 25 seconds, grants ATK and DEF +30% for 25 seconds, Quick Cast 1 and Wind Quick Cycle to the user';\n    },\n  );\n\n  // These may be inconsistencies in the spreadsheet - Enlir normally instead\n  // lists such things as \"All enemies,\" with the stat mods first.\n  // TODO: Verify these against JSON and, where possible, update spreadsheet to make them unnecessary\n  applyPatch(\n    enlir.soulBreaks,\n    '23350002',\n    waltz =>\n      waltz.target === 'All allies' &&\n      waltz.effects ===\n        'Grants HP Stock (2000), ATK, DEF, MAG and RES -40% to all enemies for 25 seconds, grants Haste and Burst Mode to the user',\n    waltz => {\n      waltz.target = 'All enemies';\n      waltz.effects =\n        'ATK, DEF, MAG and RES -40% for 25 seconds, grants HP Stock (2000) to all allies, grants Haste and Burst Mode to the user';\n    },\n  );\n  applyPatch(\n    enlir.soulBreaks,\n    '23330001',\n    stasis =>\n      stasis.target === 'All allies' &&\n      stasis.effects ===\n        'Grants Magical Blink 1 and Instant Cast 1, ATK, DEF, MAG and RES -70% to all enemies for 8 seconds',\n    stasis => {\n      stasis.target = 'All enemies';\n      stasis.effects =\n        'ATK, DEF, MAG and RES -70% for 8 seconds, grants Magical Blink 1 and Instant Cast 1 to all allies';\n    },\n  );\n}\npatchEnlir();\n\nexport function describeRelicStats(relic: EnlirRelic): string {\n  return _.filter(\n    allEnlirStats.map(i => (relic.stats[i] ? `${i.toUpperCase()} ${relic.stats[i]}` : '')),\n  ).join(', ');\n}\n\nexport function isCoreJob(character: EnlirCharacter): boolean {\n  return (\n    character.realm === 'Core' &&\n    character.name !== 'Tyro' &&\n    character.id < enlir.charactersByName['Elarra'].id\n  );\n}\n\n/**\n * Handle statuses for which the FFRK Community spreadsheet is inconsistent.\n *\n * NOTE: These are unconfirmed.  (If they were confirmed, we'd just update\n * the spreadsheet.)  Some may be intentional abbreviations.\n *\n * TODO: Try to clean up alternate status names.\n */\nexport const enlirStatusAltName: { [status: string]: EnlirStatus } = {\n  'B. M.': enlir.statusByName['Burst Mode'],\n  IC1: enlir.statusByName['Instant Cast 1'],\n  'Critical 100%': enlir.statusByName['100% Critical'],\n  'Cast Speed *999': enlir.statusByName['Instant Cast 1'],\n};\n\n/**\n * Retrieves an EnlirStatus by name, including support for generic numbers and\n * elements.\n */\nexport function getEnlirStatusByName(status: string): EnlirStatus | undefined {\n  if (enlir.statusByName[status]) {\n    return enlir.statusByName[status];\n  }\n\n  if (enlirStatusAltName[status]) {\n    return enlirStatusAltName[status];\n  }\n\n  status = status.replace(/(\\d+\\??|\\?)/, 'X');\n  if (enlir.statusByName[status]) {\n    return enlir.statusByName[status];\n  }\n\n  status = status.replace(/-X/, '+X');\n  if (enlir.statusByName[status]) {\n    return enlir.statusByName[status];\n  }\n\n  for (const i of allEnlirElements) {\n    status = status.replace(i, '[Element]');\n  }\n  if (enlir.statusByName[status]) {\n    return enlir.statusByName[status];\n  }\n\n  return undefined;\n}\n\nexport function isSoulBreak(skill: EnlirSkill): skill is EnlirSoulBreak {\n  return 'tier' in skill;\n}\n\nexport function isGlint(sb: EnlirSoulBreak): boolean {\n  return sb.tier === 'Glint' || sb.tier === 'Glint+';\n}\n\nexport function isBraveSoulBreak(sb: EnlirSoulBreak): boolean {\n  return sb.tier === 'USB' && sb.effects.match(/Brave Mode/) != null;\n}\n\nexport function isBurstSoulBreak(sb: EnlirSoulBreak): boolean {\n  return sb.tier === 'BSB';\n}\n\nexport function isBraveCommand(skill: EnlirSkill): skill is EnlirBraveCommand {\n  return 'brave' in skill;\n}\n\nexport function makeSoulBreakAliases(\n  soulBreaks: _.Dictionary<EnlirSoulBreak>,\n  tierAlias?: { [s in EnlirSoulBreakTier]: string },\n): { [id: number]: string } {\n  const total: { [key: string]: number } = {};\n  const seen: { [key: string]: number } = {};\n  const makeKey = ({ character, tier }: EnlirSoulBreak) => character + '-' + tier;\n  const tierText = tierAlias\n    ? (tier: EnlirSoulBreakTier) => tierAlias[tier]\n    : (tier: EnlirSoulBreakTier) => tier as string;\n  _.forEach(soulBreaks, sb => {\n    const key = makeKey(sb);\n    total[key] = total[key] || 0;\n    total[key]++;\n  });\n\n  const result: { [id: number]: string } = {};\n  _.sortBy(soulBreaks, 'id').forEach(sb => {\n    const key = makeKey(sb);\n    seen[key] = seen[key] || 0;\n    seen[key]++;\n\n    let alias = tierText(sb.tier);\n    if (isBraveSoulBreak(sb)) {\n      alias = 'B' + alias;\n    } else if (total[key] > 1 && sb.tier !== 'SB' && sb.tier !== 'RW' && sb.tier !== 'Shared') {\n      // Skip numbers for unique SB tier - those are too old to be of interest.\n      alias += seen[key];\n    }\n    result[sb.id] = alias;\n  });\n\n  // Special-case a few soul breaks.\n  // Bartz - seemed like a good idea, but they're too big...\n  /*\n  result[20400009] = tierText('BSB') + '-wa';\n  result[20400011] = tierText('BSB') + '-e';\n  result[20400012] = tierText('BSB') + '-wi';\n  result[20400013] = tierText('BSB') + '-f';\n  */\n  // Onion Knight\n  result[22460006] = 'm-' + tierText('USB');\n  result[22460007] = 'p-' + tierText('USB');\n\n  return result;\n}\n\nexport function makeLegendMateriaAliases(\n  legendMateria: _.Dictionary<EnlirLegendMateria>,\n): { [id: number]: string } {\n  const total: { [key: string]: number } = {};\n  const seen: { [key: string]: number } = {};\n  const makeKey = ({ character, relic }: EnlirLegendMateria) => character + (relic ? '-R' : '-LD');\n  _.forEach(legendMateria, lm => {\n    const key = makeKey(lm);\n    total[key] = total[key] || 0;\n    total[key]++;\n  });\n\n  const result: { [id: number]: string } = {};\n  _.sortBy(legendMateria, 'id').forEach(lm => {\n    const key = makeKey(lm);\n    seen[key] = seen[key] || 0;\n    seen[key]++;\n\n    let alias: string;\n    if (lm.relic) {\n      alias = 'LMR';\n    } else {\n      alias = 'LM';\n    }\n    if (total[key] > 1) {\n      alias += seen[key];\n    }\n    result[lm.id] = alias;\n  });\n\n  return result;\n}\n","import { createAction } from 'typesafe-actions';\nimport { DropItemId, ItemType } from '../data/items';\nimport { TimeT } from '../utils/timeUtils';\n\nimport * as _ from 'lodash';\nimport { arrayify } from '../utils/typeUtils';\n\nexport interface PrizeItem {\n  type: ItemType;\n  amount: number;\n  name: string;\n  id: number;\n}\n\nexport interface Dungeon {\n  name: string;\n  id: number;\n\n  openedAt: TimeT;\n  closedAt: TimeT;\n  seriesId: number;\n\n  isUnlocked: boolean;\n  isComplete: boolean;\n  isMaster: boolean;\n\n  difficulty: number;\n  totalStamina: number;\n  staminaList: number[];\n  dungeonChests?: number | undefined; // Unclaimed record dungeon chests\n\n  prizes: {\n    completion: PrizeItem[];\n    firstTime: PrizeItem[];\n    mastery: PrizeItem[];\n    claimedGrade?: PrizeItem[]; // One-time grade-based prizes\n    unclaimedGrade?: PrizeItem[]; // (speed, damage done, etc.)\n  };\n}\n\nexport function formatDifficulty(dungeon: Dungeon): string {\n  return dungeon.difficulty === 0 ? '???' : dungeon.difficulty.toString();\n}\n\nfunction makeDungeonChestPrizeItem(amount: number): PrizeItem {\n  return {\n    type: ItemType.DropItem,\n    amount,\n    id: DropItemId.Chest1Star,\n    name: '??? Dungeon Chest',\n  };\n}\n\nexport function hasAvailablePrizes(dungeon: Dungeon): boolean {\n  const unclaimedGrade = dungeon.prizes.unclaimedGrade || [];\n  return (\n    !dungeon.isComplete ||\n    !dungeon.isMaster ||\n    unclaimedGrade.length !== 0 ||\n    (dungeon.dungeonChests || 0) !== 0\n  );\n}\n\nexport function getDungeonPrizes(\n  dungeonOrDungeons: Dungeon | Dungeon[],\n  includeAll: boolean,\n): PrizeItem[] {\n  const dungeons = arrayify(dungeonOrDungeons);\n\n  const result: { [id: number]: PrizeItem } = {};\n\n  function addPrizes(prizes?: PrizeItem[]) {\n    if (!prizes) {\n      return;\n    }\n    for (const p of prizes) {\n      if (result[p.id]) {\n        result[p.id].amount += p.amount;\n      } else {\n        result[p.id] = { ...p };\n      }\n    }\n  }\n\n  for (const d of dungeons) {\n    if (includeAll || !d.isComplete) {\n      addPrizes(d.prizes.firstTime);\n    }\n    if (includeAll || !d.isMaster) {\n      addPrizes(d.prizes.mastery);\n    }\n    if (includeAll) {\n      addPrizes(d.prizes.claimedGrade);\n    }\n    addPrizes(d.prizes.unclaimedGrade);\n  }\n\n  const ids = Object.keys(result).sort();\n  const sortedPrizes = ids.map(i => result[+i]);\n\n  // Hack: FFRK doesn't report number of treasure chests found, so we often\n  // don't have this information.  Therefore, if includeAll is requested, then\n  // consistently omit all treasure chest information, since we can't\n  // consistently include all of it.\n  if (!includeAll) {\n    const dungeonChests = _.sumBy(dungeons, i => i.dungeonChests || 0);\n    if (dungeonChests) {\n      sortedPrizes.push(makeDungeonChestPrizeItem(dungeonChests));\n    }\n  }\n\n  return sortedPrizes;\n}\n\nexport function getAllPrizes(dungeonOrDungeons: Dungeon | Dungeon[]): PrizeItem[] {\n  return getDungeonPrizes(dungeonOrDungeons, true);\n}\n\nexport function getAvailablePrizes(dungeonOrDungeons: Dungeon | Dungeon[]): PrizeItem[] {\n  return getDungeonPrizes(dungeonOrDungeons, false);\n}\n\n/**\n * Add (replace) the list of dungeons for a world.\n */\nexport const addWorldDungeons = createAction(\n  'ADD_WORLD_DUNGEONS',\n  (worldId: number, dungeons: Dungeon[]) => ({\n    type: 'ADD_WORLD_DUNGEONS',\n    payload: {\n      worldId,\n      dungeons,\n    },\n  }),\n);\n\n/**\n * Remove (forget) the list of dungeons for a world.\n */\nexport const forgetWorldDungeons = createAction('FORGET_WORLD_DUNGEONS', (worldId: number) => ({\n  type: 'FORGET_WORLD_DUNGEONS',\n  payload: worldId,\n}));\n\n/**\n * Update the information on a single known dungeon.\n */\nexport const updateDungeon = createAction(\n  'UPDATE_DUNGEON',\n  (dungeonId: number, dungeon: Partial<Dungeon>) => ({\n    type: 'UPDATE_DUNGEON',\n    payload: {\n      dungeonId,\n      dungeon,\n    },\n  }),\n);\n\n/**\n * Mark an entire world's dungeons as completed and/or mastered.\n */\nexport const finishWorldDungeons = createAction(\n  'FINISH_WORLD_DUNGEONS',\n  (worldId: number, { isComplete, isMaster }: { isComplete?: boolean; isMaster?: boolean }) => ({\n    type: 'FINISH_WORLD_DUNGEONS',\n    payload: {\n      worldId,\n      isComplete,\n      isMaster,\n    },\n  }),\n);\n\n/**\n * Instruct the app to load all unknown dungeons from the FFRK servers.\n */\nexport const loadDungeons = createAction('LOAD_DUNGEONS', (worldIds: number[]) => ({\n  type: 'LOAD_DUNGEONS',\n  payload: {\n    worldIds,\n  },\n}));\n\nexport const openDungeonChest = createAction('OPEN_DUNGEON_CHEST', (dungeonId: number) => ({\n  type: 'OPEN_DUNGEON_CHEST',\n  payload: {\n    dungeonId,\n  },\n}));\n\nexport type DungeonsAction = ReturnType<\n  | typeof addWorldDungeons\n  | typeof finishWorldDungeons\n  | typeof forgetWorldDungeons\n  | typeof openDungeonChest\n  | typeof updateDungeon\n  | typeof loadDungeons\n>;\n","import * as _ from 'lodash';\n\nexport enum ItemType {\n  Ability = 'ability',\n  Arcana = 'beast_food',\n  Character = 'buddy',\n  Common = 'common',\n  CrystalWater = 'record_tear',\n  DarkMatter = 'equipment_hyper_evolve_material',\n  DressRecord = 'dress_record',\n  GrowthEgg = 'grow_egg',\n  Orb = 'ability_material',\n  Magicite = 'beast',\n  MemoryCrystal = 'memory_crystal',\n  Mote = 'sphere_material',\n  Music = 'music_ticket',\n  RecordMateria = 'record_materia',\n  Relic = 'equipment',\n  UpgradeMaterial = 'equipment_sp_material',\n\n  // Special case: Not a normal item, but useful for cases like dungeon chests\n  DropItem = 'drop_item',\n}\nexport type ItemTypeName =\n  | 'ABILITY'\n  | 'ABILITY_MATERIAL'\n  | 'BEAST'\n  | 'BEAST_FOOD'\n  | 'BUDDY'\n  | 'COMMON'\n  | 'DRESS_RECORD'\n  | 'EQUIPMENT'\n  | 'EQUIPMENT_HYPER_EVOLVE_MATERIAL'\n  | 'EQUIPMENT_SP_MATERIAL'\n  | 'GROW_EGG'\n  | 'MEMORY_CRYSTAL'\n  | 'MUSIC_TICKET'\n  | 'RECORD_MATERIA'\n  | 'RECORD_TEAR'\n  | 'SPHERE_MATERIAL';\n\nexport enum DropItemId {\n  Chest1Star = 100007,\n}\n\nexport const itemTypeDescription: { [t in ItemType]: string } = {\n  [ItemType.Ability]: 'Abilities',\n  [ItemType.Arcana]: 'Arcana',\n  [ItemType.Character]: 'Characters',\n  [ItemType.Common]: 'Mythril, MC Nodes, etc.',\n  [ItemType.CrystalWater]: 'Crystal Water',\n  [ItemType.DarkMatter]: 'Dark Matter',\n  [ItemType.DressRecord]: 'Dress Records',\n  [ItemType.DropItem]: 'Item Drops',\n  [ItemType.GrowthEgg]: 'Growth Eggs',\n  [ItemType.Orb]: 'Orbs',\n  [ItemType.Magicite]: 'Magicite',\n  [ItemType.MemoryCrystal]: 'Memory Crystals',\n  [ItemType.Mote]: 'Motes',\n  [ItemType.Music]: 'Music Records',\n  [ItemType.RecordMateria]: 'Record Materia',\n  [ItemType.Relic]: 'Relics',\n  [ItemType.UpgradeMaterial]: 'Upgrades',\n};\n\n// Looks up from internal type names to ItemType enum values\nfunction makeItemTypeLookup() {\n  const result: { [s: string]: ItemType } = {};\n  for (const i of Object.keys(ItemType)) {\n    result[ItemType[i as any]] = i as ItemType;\n    result[ItemType[i as any].toUpperCase()] = i as ItemType;\n  }\n  return result;\n}\nexport const ItemTypeLookup = makeItemTypeLookup();\n\nexport function formatRelicName({ name, realm }: { name: string; realm: string | null }): string {\n  return realm && realm !== '-' ? `${name} (${realm})` : name;\n}\n\nexport const items = [\n  {\n    name: 'Dark Matter (1★)',\n    type: ItemType.DarkMatter,\n    id: 25096001,\n  },\n  {\n    name: 'Dark Matter (2★)',\n    type: ItemType.DarkMatter,\n    id: 25096002,\n  },\n  {\n    name: 'Dark Matter (3★)',\n    type: ItemType.DarkMatter,\n    id: 25096003,\n  },\n  {\n    name: 'Dark Matter (4★)',\n    type: ItemType.DarkMatter,\n    id: 25096004,\n  },\n  {\n    name: 'Dark Matter (5★)',\n    type: ItemType.DarkMatter,\n    id: 25096005,\n  },\n  {\n    name: 'Dark Matter (6★)',\n    type: ItemType.DarkMatter,\n    id: 25096006,\n  },\n\n  {\n    name: 'Rosetta Stone',\n    type: ItemType.UpgradeMaterial,\n    id: 25097001,\n  },\n  {\n    name: 'Rainbow Crystal',\n    type: ItemType.UpgradeMaterial,\n    id: 25097002,\n  },\n  {\n    name: 'Tiny Scarletite',\n    type: ItemType.UpgradeMaterial,\n    id: 25098001,\n  },\n  {\n    name: 'Small Scarletite',\n    type: ItemType.UpgradeMaterial,\n    id: 25098002,\n  },\n  {\n    name: 'Scarletite',\n    type: ItemType.UpgradeMaterial,\n    id: 25098003,\n  },\n  {\n    name: 'Large Scarletite',\n    type: ItemType.UpgradeMaterial,\n    id: 25098004,\n  },\n  {\n    name: 'Giant Scarletite',\n    type: ItemType.UpgradeMaterial,\n    id: 25098005,\n  },\n  {\n    name: 'Tiny Adamantite',\n    type: ItemType.UpgradeMaterial,\n    id: 25099001,\n  },\n  {\n    name: 'Small Adamantite',\n    type: ItemType.UpgradeMaterial,\n    id: 25099002,\n  },\n  {\n    name: 'Adamantite',\n    type: ItemType.UpgradeMaterial,\n    id: 25099003,\n  },\n  {\n    name: 'Large Adamantite',\n    type: ItemType.UpgradeMaterial,\n    id: 25099004,\n  },\n  {\n    name: 'Giant Adamantite',\n    type: ItemType.UpgradeMaterial,\n    id: 25099005,\n  },\n\n  {\n    name: 'Minor Power Orb',\n    type: ItemType.Orb,\n    id: 40000001,\n  },\n  {\n    name: 'Lesser Power Orb',\n    type: ItemType.Orb,\n    id: 40000002,\n  },\n  {\n    name: 'Power Orb',\n    type: ItemType.Orb,\n    id: 40000003,\n  },\n  {\n    name: 'Greater Power Orb',\n    type: ItemType.Orb,\n    id: 40000004,\n  },\n  {\n    name: 'Major Power Orb',\n    type: ItemType.Orb,\n    id: 40000005,\n  },\n  {\n    name: 'Minor White Orb',\n    type: ItemType.Orb,\n    id: 40000006,\n  },\n  {\n    name: 'Lesser White Orb',\n    type: ItemType.Orb,\n    id: 40000007,\n  },\n  {\n    name: 'White Orb',\n    type: ItemType.Orb,\n    id: 40000008,\n  },\n  {\n    name: 'Greater White Orb',\n    type: ItemType.Orb,\n    id: 40000009,\n  },\n  {\n    name: 'Major White Orb',\n    type: ItemType.Orb,\n    id: 40000010,\n  },\n  {\n    name: 'Minor Black Orb',\n    type: ItemType.Orb,\n    id: 40000011,\n  },\n  {\n    name: 'Lesser Black Orb',\n    type: ItemType.Orb,\n    id: 40000012,\n  },\n  {\n    name: 'Black Orb',\n    type: ItemType.Orb,\n    id: 40000013,\n  },\n  {\n    name: 'Greater Black Orb',\n    type: ItemType.Orb,\n    id: 40000014,\n  },\n  {\n    name: 'Major Black Orb',\n    type: ItemType.Orb,\n    id: 40000015,\n  },\n  {\n    name: 'Minor Blue Orb',\n    type: ItemType.Orb,\n    id: 40000016,\n  },\n  {\n    name: 'Lesser Blue Orb',\n    type: ItemType.Orb,\n    id: 40000017,\n  },\n  {\n    name: 'Blue Orb',\n    type: ItemType.Orb,\n    id: 40000018,\n  },\n  {\n    name: 'Greater Blue Orb',\n    type: ItemType.Orb,\n    id: 40000019,\n  },\n  {\n    name: 'Major Blue Orb',\n    type: ItemType.Orb,\n    id: 40000020,\n  },\n  {\n    name: 'Minor Summon Orb',\n    type: ItemType.Orb,\n    id: 40000021,\n  },\n  {\n    name: 'Lesser Summon Orb',\n    type: ItemType.Orb,\n    id: 40000022,\n  },\n  {\n    name: 'Summon Orb',\n    type: ItemType.Orb,\n    id: 40000023,\n  },\n  {\n    name: 'Greater Summon Orb',\n    type: ItemType.Orb,\n    id: 40000024,\n  },\n  {\n    name: 'Major Summon Orb',\n    type: ItemType.Orb,\n    id: 40000025,\n  },\n  {\n    name: 'Minor Non-Elemental Orb',\n    type: ItemType.Orb,\n    id: 40000026,\n  },\n  {\n    name: 'Lesser Non-Elemental Orb',\n    type: ItemType.Orb,\n    id: 40000027,\n  },\n  {\n    name: 'Non-Elemental Orb',\n    type: ItemType.Orb,\n    id: 40000028,\n  },\n  {\n    name: 'Greater Non-Elemental Orb',\n    type: ItemType.Orb,\n    id: 40000029,\n  },\n  {\n    name: 'Major Non-Elemental Orb',\n    type: ItemType.Orb,\n    id: 40000030,\n  },\n  {\n    name: 'Minor Fire Orb',\n    type: ItemType.Orb,\n    id: 40000031,\n  },\n  {\n    name: 'Lesser Fire Orb',\n    type: ItemType.Orb,\n    id: 40000032,\n  },\n  {\n    name: 'Fire Orb',\n    type: ItemType.Orb,\n    id: 40000033,\n  },\n  {\n    name: 'Greater Fire Orb',\n    type: ItemType.Orb,\n    id: 40000034,\n  },\n  {\n    name: 'Major Fire Orb',\n    type: ItemType.Orb,\n    id: 40000035,\n  },\n  {\n    name: 'Minor Ice Orb',\n    type: ItemType.Orb,\n    id: 40000036,\n  },\n  {\n    name: 'Lesser Ice Orb',\n    type: ItemType.Orb,\n    id: 40000037,\n  },\n  {\n    name: 'Ice Orb',\n    type: ItemType.Orb,\n    id: 40000038,\n  },\n  {\n    name: 'Greater Ice Orb',\n    type: ItemType.Orb,\n    id: 40000039,\n  },\n  {\n    name: 'Major Ice Orb',\n    type: ItemType.Orb,\n    id: 40000040,\n  },\n  {\n    name: 'Minor Lightning Orb',\n    type: ItemType.Orb,\n    id: 40000041,\n  },\n  {\n    name: 'Lesser Lightning Orb',\n    type: ItemType.Orb,\n    id: 40000042,\n  },\n  {\n    name: 'Lightning Orb',\n    type: ItemType.Orb,\n    id: 40000043,\n  },\n  {\n    name: 'Greater Lightning Orb',\n    type: ItemType.Orb,\n    id: 40000044,\n  },\n  {\n    name: 'Major Lightning Orb',\n    type: ItemType.Orb,\n    id: 40000045,\n  },\n  {\n    name: 'Minor Earth Orb',\n    type: ItemType.Orb,\n    id: 40000046,\n  },\n  {\n    name: 'Lesser Earth Orb',\n    type: ItemType.Orb,\n    id: 40000047,\n  },\n  {\n    name: 'Earth Orb',\n    type: ItemType.Orb,\n    id: 40000048,\n  },\n  {\n    name: 'Greater Earth Orb',\n    type: ItemType.Orb,\n    id: 40000049,\n  },\n  {\n    name: 'Major Earth Orb',\n    type: ItemType.Orb,\n    id: 40000050,\n  },\n  {\n    name: 'Minor Wind Orb',\n    type: ItemType.Orb,\n    id: 40000051,\n  },\n  {\n    name: 'Lesser Wind Orb',\n    type: ItemType.Orb,\n    id: 40000052,\n  },\n  {\n    name: 'Wind Orb',\n    type: ItemType.Orb,\n    id: 40000053,\n  },\n  {\n    name: 'Greater Wind Orb',\n    type: ItemType.Orb,\n    id: 40000054,\n  },\n  {\n    name: 'Major Wind Orb',\n    type: ItemType.Orb,\n    id: 40000055,\n  },\n  {\n    name: 'Minor Holy Orb',\n    type: ItemType.Orb,\n    id: 40000056,\n  },\n  {\n    name: 'Lesser Holy Orb',\n    type: ItemType.Orb,\n    id: 40000057,\n  },\n  {\n    name: 'Holy Orb',\n    type: ItemType.Orb,\n    id: 40000058,\n  },\n  {\n    name: 'Greater Holy Orb',\n    type: ItemType.Orb,\n    id: 40000059,\n  },\n  {\n    name: 'Major Holy Orb',\n    type: ItemType.Orb,\n    id: 40000060,\n  },\n  {\n    name: 'Minor Dark Orb',\n    type: ItemType.Orb,\n    id: 40000061,\n  },\n  {\n    name: 'Lesser Dark Orb',\n    type: ItemType.Orb,\n    id: 40000062,\n  },\n  {\n    name: 'Dark Orb',\n    type: ItemType.Orb,\n    id: 40000063,\n  },\n  {\n    name: 'Greater Dark Orb',\n    type: ItemType.Orb,\n    id: 40000064,\n  },\n  {\n    name: 'Major Dark Orb',\n    type: ItemType.Orb,\n    id: 40000065,\n  },\n  {\n    name: 'Power Crystal',\n    type: ItemType.Orb,\n    id: 40000066,\n  },\n  {\n    name: 'White Crystal',\n    type: ItemType.Orb,\n    id: 40000067,\n  },\n  {\n    name: 'Black Crystal',\n    type: ItemType.Orb,\n    id: 40000068,\n  },\n  {\n    name: 'Blue Crystal',\n    type: ItemType.Orb,\n    id: 40000069,\n  },\n  {\n    name: 'Summoning Crystal',\n    type: ItemType.Orb,\n    id: 40000070,\n  },\n  {\n    name: 'Non-Elemental Crystal',\n    type: ItemType.Orb,\n    id: 40000071,\n  },\n  {\n    name: 'Fire Crystal',\n    type: ItemType.Orb,\n    id: 40000072,\n  },\n  {\n    name: 'Ice Crystal',\n    type: ItemType.Orb,\n    id: 40000073,\n  },\n  {\n    name: 'Lightning Crystal',\n    type: ItemType.Orb,\n    id: 40000074,\n  },\n  {\n    name: 'Earth Crystal',\n    type: ItemType.Orb,\n    id: 40000075,\n  },\n  {\n    name: 'Wind Crystal',\n    type: ItemType.Orb,\n    id: 40000076,\n  },\n  {\n    name: 'Holy Crystal',\n    type: ItemType.Orb,\n    id: 40000077,\n  },\n  {\n    name: 'Dark Crystal',\n    type: ItemType.Orb,\n    id: 40000078,\n  },\n\n  {\n    name: 'Ultima Record',\n    type: ItemType.Orb,\n    id: 40000079,\n  },\n  {\n    name: 'Crushdown Record',\n    type: ItemType.Orb,\n    id: 40000080,\n  },\n  {\n    name: 'Reraise Record',\n    type: ItemType.Orb,\n    id: 40000081,\n  },\n  {\n    name: 'Neo Bahamut Record',\n    type: ItemType.Orb,\n    id: 40000082,\n  },\n  {\n    name: 'Quadruple Foul Record',\n    type: ItemType.Orb,\n    id: 40000083,\n  },\n  {\n    name: 'Northern Cross Record',\n    type: ItemType.Orb,\n    id: 40000084,\n  },\n  {\n    name: 'Meltdown Record',\n    type: ItemType.Orb,\n    id: 40000085,\n  },\n  {\n    name: 'Curada Record',\n    type: ItemType.Orb,\n    id: 40000086,\n  },\n  {\n    name: 'Affliction Break Record',\n    type: ItemType.Orb,\n    id: 40000087,\n  },\n  {\n    name: 'Dervish Record',\n    type: ItemType.Orb,\n    id: 40000088,\n  },\n  {\n    name: 'Valigarmanda Record',\n    type: ItemType.Orb,\n    id: 40000089,\n  },\n  {\n    name: 'Omega Drive Record',\n    type: ItemType.Orb,\n    id: 40000090,\n  },\n  {\n    name: 'Blastspell Strike Record',\n    type: ItemType.Orb,\n    id: 40000099,\n  },\n  {\n    name: 'Stormspell Strike Record',\n    type: ItemType.Orb,\n    id: 40000100,\n  },\n  {\n    name: 'Inferno Assault Record',\n    type: ItemType.Orb,\n    id: 40000101,\n  },\n  {\n    name: 'Voltech Record',\n    type: ItemType.Orb,\n    id: 40000102,\n  },\n  {\n    name: 'Chain Firaja Record',\n    type: ItemType.Orb,\n    id: 40000103,\n  },\n  {\n    name: 'Chain Thundaja Record',\n    type: ItemType.Orb,\n    id: 40000104,\n  },\n  {\n    name: 'Chain Stoneja Record',\n    type: ItemType.Orb,\n    id: 40000105,\n  },\n  {\n    name: 'Ironfist Earth Record',\n    type: ItemType.Orb,\n    id: 40000106,\n  },\n  {\n    name: 'Ironfist Fire Record',\n    type: ItemType.Orb,\n    id: 40000107,\n  },\n  {\n    name: 'Flash Disaster Record',\n    type: ItemType.Orb,\n    id: 40000108,\n  },\n  {\n    name: 'Fire Assault Record',\n    type: ItemType.Orb,\n    id: 40000109,\n  },\n  {\n    name: 'Storm Assault Record',\n    type: ItemType.Orb,\n    id: 40000110,\n  },\n  {\n    name: 'Lunar Leviathan Record',\n    type: ItemType.Orb,\n    id: 40000111,\n  },\n  {\n    name: 'Sapphire Bullet Record',\n    type: ItemType.Orb,\n    id: 40000112,\n  },\n  {\n    name: 'Chain Waterja Record',\n    type: ItemType.Orb,\n    id: 40000113,\n  },\n  {\n    name: 'Dark Valefor Record',\n    type: ItemType.Orb,\n    id: 40000114,\n  },\n  {\n    name: 'Lunatic Thunder Record',\n    type: ItemType.Orb,\n    id: 40000115,\n  },\n  {\n    name: 'Tremor Assault Record',\n    type: ItemType.Orb,\n    id: 40000116,\n  },\n  {\n    name: 'Healing Smite Record',\n    type: ItemType.Orb,\n    id: 40000117,\n  },\n  {\n    name: 'Fire-Touched Blade Record',\n    type: ItemType.Orb,\n    id: 40000118,\n  },\n  {\n    name: 'Burnt Offering Record',\n    type: ItemType.Orb,\n    id: 40000119,\n  },\n  {\n    name: 'Lunar Ifrit Record',\n    type: ItemType.Orb,\n    id: 40000120,\n  },\n  {\n    name: 'Frost-Touched Blade Record',\n    type: ItemType.Orb,\n    id: 40000121,\n  },\n  {\n    name: 'Icy Offering Record',\n    type: ItemType.Orb,\n    id: 40000122,\n  },\n  {\n    name: 'Chilling Blizzard Record',\n    type: ItemType.Orb,\n    id: 40000123,\n  },\n  {\n    name: \"Demon's Cross Record\",\n    type: ItemType.Orb,\n    id: 40000124,\n  },\n  {\n    name: 'Necro Countdown Record',\n    type: ItemType.Orb,\n    id: 40000125,\n  },\n  {\n    name: 'Holyja Record',\n    type: ItemType.Orb,\n    id: 40000126,\n  },\n\n  {\n    name: 'Minor Growth Egg',\n    type: ItemType.GrowthEgg,\n    id: 70000001,\n  },\n  {\n    name: 'Lesser Growth Egg',\n    type: ItemType.GrowthEgg,\n    id: 70000002,\n  },\n  {\n    name: 'Growth Egg',\n    type: ItemType.GrowthEgg,\n    id: 70000003,\n  },\n  {\n    name: 'Greater Growth Egg',\n    type: ItemType.GrowthEgg,\n    id: 70000004,\n  },\n  {\n    name: 'Major Growth Egg',\n    type: ItemType.GrowthEgg,\n    id: 70000005,\n  },\n\n  {\n    name: 'Life Crystal Water',\n    type: ItemType.CrystalWater,\n    id: 71000101,\n  },\n  {\n    name: 'Power Crystal Water',\n    type: ItemType.CrystalWater,\n    id: 71000201,\n  },\n  {\n    name: 'Aegis Crystal Water',\n    type: ItemType.CrystalWater,\n    id: 71000301,\n  },\n  {\n    name: 'Magic Crystal Water',\n    type: ItemType.CrystalWater,\n    id: 71000401,\n  },\n  {\n    name: 'Null Crystal Water',\n    type: ItemType.CrystalWater,\n    id: 71000501,\n  },\n  {\n    name: 'Spirit Crystal Water',\n    type: ItemType.CrystalWater,\n    id: 71000601,\n  },\n\n  {\n    name: 'Mythril',\n    type: ItemType.Common,\n    id: 91000000,\n  },\n  {\n    name: 'Gil',\n    type: ItemType.Common,\n    id: 92000000,\n  },\n  {\n    name: 'Stamina Shard',\n    type: ItemType.Common,\n    id: 94000000,\n  },\n  {\n    name: 'Soul of a Hero',\n    type: ItemType.Common,\n    id: 95001011,\n  },\n  {\n    name: 'Memory Crystal Lode',\n    type: ItemType.Common,\n    id: 95001012,\n  },\n  {\n    name: 'Memory Crystal II Lode',\n    type: ItemType.Common,\n    id: 95001013,\n  },\n  {\n    name: 'Gysahl Greens',\n    type: ItemType.Common,\n    id: 95001014,\n  },\n  {\n    name: 'Memory Crystal III Lode',\n    type: ItemType.Common,\n    id: 95001020,\n  },\n  {\n    name: 'Prismatic Seed',\n    type: ItemType.Common,\n    id: 95001029,\n  },\n  {\n    name: 'Present',\n    type: ItemType.Common,\n    id: 95001075,\n  },\n  {\n    name: 'Record Rubies',\n    type: ItemType.Common,\n    id: 95001080,\n  },\n\n  // Items 95003001 through 95003009 are apparently internal virtual items used\n  // to track whether Acolyte Archive relic draws are available.\n\n  // Items only in JP - unconfirmed in GL\n  {\n    name: 'Anima Lens Lv1',\n    type: ItemType.Common,\n    id: 95004001,\n  },\n  {\n    name: 'Anima Lens Lv2',\n    type: ItemType.Common,\n    id: 95004002,\n  },\n  {\n    name: 'Anima Lens Lv3',\n    type: ItemType.Common,\n    id: 95004003,\n  },\n  {\n    name: 'Sacred Lithograph',\n    type: ItemType.Common,\n    id: 98000000,\n  },\n\n  {\n    name: 'Spirit Mote (3★)',\n    type: ItemType.Mote,\n    id: 130100100,\n  },\n  {\n    name: 'Spirit Mote (4★)',\n    type: ItemType.Mote,\n    id: 130100200,\n  },\n  {\n    name: 'Spirit Mote (5★)',\n    type: ItemType.Mote,\n    id: 130100300,\n  },\n  {\n    name: 'Dexterity Mote (3★)',\n    type: ItemType.Mote,\n    id: 130200100,\n  },\n  {\n    name: 'Dexterity Mote (4★)',\n    type: ItemType.Mote,\n    id: 130200200,\n  },\n  {\n    name: 'Dexterity Mote (5★)',\n    type: ItemType.Mote,\n    id: 130200300,\n  },\n  {\n    name: 'Vitality Mote (3★)',\n    type: ItemType.Mote,\n    id: 130300100,\n  },\n  {\n    name: 'Vitality Mote (4★)',\n    type: ItemType.Mote,\n    id: 130300200,\n  },\n  {\n    name: 'Vitality Mote (5★)',\n    type: ItemType.Mote,\n    id: 130300300,\n  },\n  {\n    name: 'Wisdom Mote (3★)',\n    type: ItemType.Mote,\n    id: 130400100,\n  },\n  {\n    name: 'Wisdom Mote (4★)',\n    type: ItemType.Mote,\n    id: 130400200,\n  },\n  {\n    name: 'Wisdom Mote (5★)',\n    type: ItemType.Mote,\n    id: 130400300,\n  },\n  {\n    name: 'Bravery Mote (3★)',\n    type: ItemType.Mote,\n    id: 130500100,\n  },\n  {\n    name: 'Bravery Mote (4★)',\n    type: ItemType.Mote,\n    id: 130500200,\n  },\n  {\n    name: 'Bravery Mote (5★)',\n    type: ItemType.Mote,\n    id: 130500300,\n  },\n  {\n    name: 'Spellblade Mote (5★)',\n    type: ItemType.Mote,\n    id: 131004300,\n  },\n  {\n    name: 'Dragoon Mote (5★)',\n    type: ItemType.Mote,\n    id: 131008300,\n  },\n  {\n    name: 'Monk Mote (5★)',\n    type: ItemType.Mote,\n    id: 131009300,\n  },\n  {\n    name: 'Thief Mote (5★)',\n    type: ItemType.Mote,\n    id: 131010300,\n  },\n  {\n    name: 'Knight Mote (5★)',\n    type: ItemType.Mote,\n    id: 131011300,\n  },\n  {\n    name: 'Samurai Mote (5★)',\n    type: ItemType.Mote,\n    id: 131012300,\n  },\n  {\n    name: 'Ninja Mote (5★)',\n    type: ItemType.Mote,\n    id: 131013300,\n  },\n  {\n    name: 'Bard Mote (5★)',\n    type: ItemType.Mote,\n    id: 131014300,\n  },\n  {\n    name: 'Machinist Mote (5★)',\n    type: ItemType.Mote,\n    id: 131016300,\n  },\n  {\n    name: 'Onion Knight Mote (5★)',\n    type: ItemType.Mote,\n    id: 132001300,\n  },\n  {\n    name: 'Eiko Mote (5★)',\n    type: ItemType.Mote,\n    id: 132002300,\n  },\n\n  {\n    name: 'Lesser Arcana',\n    type: ItemType.Arcana,\n    id: 190000002,\n  },\n  {\n    name: 'Arcana',\n    type: ItemType.Arcana,\n    id: 190000003,\n  },\n  {\n    name: 'Greater Arcana',\n    type: ItemType.Arcana,\n    id: 190000004,\n  },\n  {\n    name: 'Major Arcana',\n    type: ItemType.Arcana,\n    id: 190000005,\n  },\n];\n\nexport const itemsById = _.zipObject(items.map(i => i.id), items);\n","/**\n * @file\n * URLs for FFRK APIs\n */\n\nexport enum LangType {\n  Gl = 'gl',\n  Jp = 'jp',\n}\n\nexport type BaseUrl = { [lang in LangType]: string };\n\nconst baseUrl: BaseUrl = {\n  [LangType.Jp]: 'http://dff.sp.mbga.jp/dff/',\n  [LangType.Gl]: 'http://ffrk.denagames.com/dff/',\n};\n\nexport const dungeons = (lang: LangType, worldId: number) =>\n  `${baseUrl[lang]}world/dungeons?world_id=${worldId}`;\n\nexport const gachaProbability = (lang: LangType, bannerId: number) =>\n  `${baseUrl[lang]}gacha/probability?series_id=${bannerId}`;\n\nexport const exchangeShopPrizeList = (lang: LangType, exchangeShopId: number) =>\n  `${baseUrl[lang]}exchange_shop/prize_list?shop_id=${exchangeShopId}`;\n","import { format, TransformableInfo } from 'logform';\nimport * as winston from 'winston';\n\n/**\n * Allows logging of bare Error objects.  Calling JSON.stringify on an Error\n * results in an empty object.  Calling printf results in just the message, so\n * it loses the exception name and the stack trace. This method converts the\n * error object to preserve all of its info.\n */\nconst error = format((info: TransformableInfo) => {\n  if (info.message && info.name && info.stack) {\n    return {\n      ...info,\n      message: `${info.name}: ${info.message}\\n${info.stack}`,\n      rawMessage: info.message,\n      name: info.name,\n      stack: info.stack,\n    };\n  }\n  return info;\n});\n\nconst logFormat = winston.format.combine(\n  error(),\n  winston.format.timestamp(),\n\n  winston.format.colorize(),\n  winston.format.printf(info => `${info.timestamp} ${info.level}: ${info.message}`),\n  // Or use winston.format.json() for pure JSON.\n);\n\nconst logger = winston.createLogger({\n  level: 'debug',\n  format: logFormat,\n  transports: [new winston.transports.Console()],\n});\n\nexport { logger };\n","/**\n * @file\n *\n * Utility functions for MrP code.  Most of this is text-processing logic that\n * could perhaps be part of a general text utility module, but it's written for\n * and optimized for parsing Enlir and outputting MrP.\n */\n\nimport * as _ from 'lodash';\n\nexport const andList = /,? and |, /;\nexport const orList = /,? or |, /;\nexport const andOrList = /,? and |,? or |, /;\n\nconst numbers: { [s: string]: number } = {\n  one: 1,\n  two: 2,\n  three: 3,\n  four: 4,\n  five: 5,\n  six: 6,\n  seven: 7,\n  eight: 8,\n  nine: 9,\n  ten: 10,\n  eleven: 11,\n  twelve: 12,\n  thirteen: 13,\n  fourteen: 14,\n  fifteen: 15,\n  sixteen: 16,\n  seventeen: 17,\n  eighteen: 18,\n  nineteen: 19,\n  twenty: 20,\n  thirty: 30,\n  forty: 40,\n  fifty: 50,\n  sixty: 60,\n  seventy: 70,\n  eighty: 80,\n  ninety: 90,\n};\n\nexport function isNumeric(s: string): boolean {\n  return !isNaN(Number(s));\n}\n\nexport function lowerCaseFirst(s: string): string {\n  return s.replace(/^([A-Z])/, c => c.toLowerCase());\n}\n\n/**\n * Parses a numeric string like \"one\" or \"twenty-two\"\n */\nexport function parseNumberString(s: string): number | null {\n  if (isNumeric(s)) {\n    return +s;\n  }\n  let result = 0;\n  for (const i of s.toLowerCase().split('-')) {\n    if (numbers[i] == null) {\n      return null;\n    }\n    result += numbers[i];\n  }\n  return result;\n}\n\nexport function parseNumberOccurrence(s: string): number | null {\n  if (s === 'once') {\n    return 1;\n  } else if (s === 'twice') {\n    return 2;\n  }\n  const m = s.match(/(.*) times/);\n  if (m) {\n    return parseNumberString(m[1]);\n  }\n  return null;\n}\n\nexport function parseThresholdValues(s: string): number[] {\n  return s.split('/').map(parseFloat);\n}\n\nexport function parsePercentageCounts(s: string): Array<[number, number]> | null {\n  const result: Array<[number, number]> = [];\n  for (const i of s.split(orList)) {\n    const m = i.match(/([A-Za-z\\-]+) \\((\\d+)%\\)/);\n    if (!m) {\n      return null;\n    }\n    const count = parseNumberString(m[1]);\n    if (count == null) {\n      return null;\n    }\n    result.push([count, +m[2]]);\n  }\n  return result;\n}\n\nexport function toMrPFixed(n: number): string {\n  if (isNaN(n)) {\n    return '?';\n  }\n  let result = n.toFixed(2);\n  if (result.endsWith('0')) {\n    result = result.substr(0, result.length - 1);\n  }\n  return result;\n}\n\nexport function toMrPKilo(n: number): string {\n  return n / 1000 + 'k';\n}\n\n/**\n * General-purpose formatting for a term that might be number-like\n */\nexport function toMrPGeneral(s: string): string {\n  if (!isNumeric(s)) {\n    return s;\n  } else {\n    let result: string;\n    if (s.indexOf('.') !== -1) {\n      result = toMrPFixed(+s);\n    } else {\n      result = s;\n    }\n    return (s.startsWith('+') ? '+' : '') + result;\n  }\n}\n\n// https://stackoverflow.com/a/2901298/25507\nexport function numberWithCommas(x: number): string {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\nexport function isAllSame<T>(values: T[], iteratee: (value: T) => any): boolean {\n  return _.every(values, i => iteratee(i) === iteratee(values[0]));\n}\n\nexport const enDashJoin = ' – ';\n\ninterface SlashMergeOptions {\n  join?: string;\n}\n\ninterface InternalSlashMergeOptions extends SlashMergeOptions {\n  splitAtPlus: boolean;\n}\n\nfunction rawSlashMerge(options: string[], opt: InternalSlashMergeOptions) {\n  // We normally break at plus signs, so, e.g., f+n / wa+n / wi+n / e+n can\n  // become f/wa/wi/e+n.  But there are times when it works out better to\n  // instead treat plus-separated terms as units.\n  const splitAt = opt.splitAtPlus ? /([,? +])/ : /([,? ])/;\n\n  const optionParts = options.map(i => i.split(splitAt));\n  const maxLength = _.max(optionParts.map(i => i.length))!;\n  const minLength = _.min(optionParts.map(i => i.length))!;\n\n  const join = (parts: string[]) => {\n    let joinString: string;\n    if (opt.join) {\n      joinString = opt.join;\n    } else {\n      joinString = _.some(parts, s => s.match('/')) ? enDashJoin : '/';\n    }\n    return parts.join(joinString);\n  };\n\n  let result = '';\n  let same = 0;\n  let different = 0;\n  for (let i = 0; i < minLength; i++) {\n    if (isAllSame(optionParts, parts => parts[i])) {\n      result += optionParts[0][i];\n      same++;\n    } else {\n      const mergeParts = optionParts.filter(parts => parts[i] !== undefined).map(parts => parts[i]);\n      // Merge with slashes if the parts don't have slashes themselves.  Merge\n      // with en dashes otherwise.\n      result += join(mergeParts);\n      different++;\n    }\n  }\n\n  // Try taking left-over parts and appending them to the end.\n  if (maxLength !== minLength) {\n    let extraParts = optionParts.map(i => i.slice(minLength));\n\n    // Special case: Extra parts start with \", \".\n    if (_.every(extraParts, i => i.length === 0 || (i[0] === ',' && i[1] === '' && i[2] === ' '))) {\n      result += ', ';\n      extraParts = extraParts.map(i => i.slice(3));\n    } else {\n      result += ' ';\n    }\n\n    result += join(extraParts.map(i => (i.length ? i.join('') : '0̸')));\n    different += maxLength - minLength;\n  }\n\n  return { result, same, different };\n}\n\nexport function slashMerge(options: string[], opt: SlashMergeOptions = {}): string {\n  const standardPlus = rawSlashMerge(options, { ...opt, splitAtPlus: true });\n  const standardNoPlus = rawSlashMerge(options, { ...opt, splitAtPlus: false });\n  const useNoPlus = standardNoPlus.different < standardPlus.different;\n  const standard = useNoPlus ? standardNoPlus : standardPlus;\n\n  // Try it again, without splitting up stat mods.\n  const optionsWithCombinedStats = options.map(i => i.replace(/(\\d+%) ([A-Z]{3})/g, '$1\\u00A0$2'));\n  const combinedStats = rawSlashMerge(optionsWithCombinedStats, { ...opt, splitAtPlus: true });\n\n  // If combining pieces of stat mods lets us combine more parts, then we'll\n  // allow that.\n  const useCombinedStats = combinedStats.different < standard.different;\n  const picked = useCombinedStats ? combinedStats : standard;\n  let result = picked.result;\n\n  if (useCombinedStats) {\n    result = result.replace(/\\u00A0/gu, ' ');\n  }\n\n  // Check if values are too different to practically combine.  If they are,\n  // fall back to separating the whole list with en dashes.  (Should we instead\n  // use slashes here?  Unfortunately, MrP isn't completely consistent - a lot\n  // depends on whether the clauses we're separating use slashes or hyphens\n  // internally.)\n  if (picked.same < picked.different) {\n    result = options.join(enDashJoin);\n  }\n\n  return result;\n}\n\n/**\n * Cleans up a slashed numbers list by summarizing longer ranges.\n */\nexport function cleanUpSlashedNumbers(s: string): string {\n  const values = s.split('/').map(i => +i);\n\n  let isSequential = true;\n  for (let i = 1; i < values.length; i++) {\n    if (values[i] !== values[i - 1] + 1) {\n      isSequential = false;\n      break;\n    }\n  }\n\n  if (isSequential && values.length > 4) {\n    return values[0] + '-' + values[values.length - 1];\n  } else {\n    return s;\n  }\n}\n\nexport function formatUseCount(count: number | undefined): string {\n  if (!count) {\n    return 'w/ uses';\n  } else if (count > 4) {\n    return 'w/ 0…' + (count - 1) + ' uses';\n  } else {\n    return 'w/ ' + _.times(count).join('-') + ' uses';\n  }\n}\n\nexport function countMatches(haystack: string, needle: RegExp): number {\n  return (haystack.match(needle) || []).length;\n}\n\nexport function describeChances(\n  options: string[],\n  percentChances: number[],\n  join = '-',\n): [string | undefined, string] {\n  const allSamePercentage = _.every(percentChances, i => i === percentChances[0]);\n  if (allSamePercentage) {\n    return [undefined, options.join(' or ')];\n  } else {\n    return [percentChances.join('-') + '%', options.join(join)];\n  }\n}\n\nexport function andJoin(s: string[], oxfordComma: boolean): string {\n  if (s.length === 1) {\n    return s[0];\n  }\n  return s.slice(0, s.length - 1).join(', ') + (oxfordComma ? ',' : '') + ' and ' + s[s.length - 1];\n}\n\nexport function percentToMultiplier(percent: number | string): string {\n  if (typeof percent === 'string') {\n    percent = parseFloat(percent);\n  }\n  return toMrPFixed(1 + percent / 100);\n}\n","import * as React from 'react';\n\nimport MessagesList from './MessagesList';\n\nconst styles = require('./Page.scss');\n\ninterface Props {\n  className?: string;\n  title?: string;\n  children: any;\n  footer?: () => any;\n}\n\nexport class Page extends React.Component<Props> {\n  render() {\n    const { className, title, children, footer } = this.props;\n    return (\n      <div className={'container ' + styles.component + ' ' + (className || '')}>\n        {title && <h2 className=\"row\">{title}</h2>}\n        <div className={styles.content}>\n          <MessagesList />\n          {children}\n        </div>\n        {footer && <div className={styles.footer}>{footer()}</div>}\n      </div>\n    );\n  }\n}\n","import { createAction } from 'typesafe-actions';\n\nimport * as _ from 'lodash';\n\nimport { FAR_FUTURE, TimeT } from '../utils/timeUtils';\n\nexport enum WorldCategory {\n  Realm,\n  Nightmare,\n  Magicite,\n  Torment,\n  Event,\n  SpecialEvent,\n  JumpStart,\n  Raid,\n  CrystalTower,\n  PowerUpMote,\n  Newcomer,\n  Renewal,\n  Record,\n}\n\nexport const descriptions = {\n  [WorldCategory.Realm]: 'Realm Dungeons',\n  [WorldCategory.Nightmare]: 'Nightmare',\n  [WorldCategory.Magicite]: 'Magicite',\n  [WorldCategory.Torment]: 'Torments',\n  [WorldCategory.Event]: 'Events',\n  [WorldCategory.SpecialEvent]: 'Special Events',\n  [WorldCategory.JumpStart]: 'Jump Start',\n  [WorldCategory.Raid]: 'Raids',\n  [WorldCategory.CrystalTower]: 'Crystal Tower',\n  [WorldCategory.PowerUpMote]: 'Power Up & Mote Dungeons',\n  [WorldCategory.Newcomer]: \"Newcomers' Dungeons\",\n  [WorldCategory.Renewal]: 'Renewal Dungeons',\n  [WorldCategory.Record]: 'Record Dungeons',\n};\n\nexport const sortOrder = [\n  WorldCategory.Renewal,\n  WorldCategory.Event,\n  WorldCategory.JumpStart,\n  WorldCategory.SpecialEvent,\n  WorldCategory.Raid,\n  WorldCategory.CrystalTower,\n  WorldCategory.Realm,\n  WorldCategory.Record,\n  WorldCategory.Nightmare,\n  WorldCategory.Magicite,\n  WorldCategory.Torment,\n  WorldCategory.PowerUpMote,\n  WorldCategory.Newcomer,\n];\n\n// FIXME: Add eventId - and track \"enter\" requests to mark dungeons as unlocked - and unit test all of it\nexport interface World {\n  category: WorldCategory;\n  subcategory?: string;\n  subcategorySortOrder?: number;\n  name: string;\n  id: number;\n  openedAt: TimeT;\n  closedAt: TimeT;\n  seriesId: number;\n  isUnlocked: boolean;\n\n  /**\n   * Optional URL (see data/urls) to an image icon for this world\n   */\n  iconUrl?: string;\n\n  /**\n   * Optional key of a localIcon (see data/localData)\n   */\n  localIcon?: string;\n}\n\nenum WorldSortOrder {\n  ById,\n  ByReverseId,\n  ByTime,\n  BySeriesId,\n}\n\nfunction getSortOrder(category: WorldCategory) {\n  switch (category) {\n    case WorldCategory.Renewal:\n      return WorldSortOrder.ByReverseId;\n    case WorldCategory.Event:\n    case WorldCategory.SpecialEvent:\n    case WorldCategory.Raid:\n      return WorldSortOrder.ByTime;\n    case WorldCategory.Torment:\n      // Old torments were sorted by series, but Neo Torments are listed by\n      // time.\n      return WorldSortOrder.ByTime;\n    case WorldCategory.CrystalTower:\n    case WorldCategory.Realm:\n    case WorldCategory.Record:\n    case WorldCategory.Nightmare:\n    case WorldCategory.Magicite:\n    case WorldCategory.PowerUpMote:\n    case WorldCategory.Newcomer:\n      return WorldSortOrder.ById;\n    case WorldCategory.JumpStart:\n      // Jump Starts were ByTime, but, once they were all open, by series\n      // makes more sense.\n      return WorldSortOrder.BySeriesId;\n  }\n}\n\n/**\n * Far-future timestamps indicate a world that never closes - but different\n * worlds may have different far-future timestamps.  (E.g., the FF15 torment's\n * is a bit before the FF13 torment's.)  We want these to sort the same, so\n * special-case far-future timestamps to accommodate.\n */\nconst getClosedAt = (world: any) => (world.closedAt > FAR_FUTURE ? Infinity : world.closedAt);\n\nexport function getSorter(category: WorldCategory): (worlds: World[]) => World[] {\n  switch (getSortOrder(category)) {\n    case WorldSortOrder.BySeriesId:\n      return worlds => _.sortBy(worlds, 'seriesId');\n    case WorldSortOrder.ById:\n      return worlds => _.sortBy(worlds, 'id');\n    case WorldSortOrder.ByReverseId:\n      return worlds => _.sortBy(worlds, i => -i.id);\n    case WorldSortOrder.ByTime:\n      return worlds =>\n        _.sortBy(worlds, [(i: any) => -getClosedAt(i), (i: any) => -i.openedAt, 'id']);\n  }\n}\n\nexport const updateWorlds = createAction('UPDATE_WORLDS', (worlds: { [id: number]: World }) => ({\n  type: 'UPDATE_WORLDS',\n  payload: {\n    worlds,\n  },\n}));\n\nexport const unlockWorld = createAction('UNLOCK_WORLD', (worldId: number) => ({\n  type: 'UNLOCK_WORLD',\n  payload: worldId,\n}));\n\nexport type WorldAction = ReturnType<typeof updateWorlds | typeof unlockWorld>;\n","import { arrayify } from '../../utils/typeUtils';\nimport { EnlirElement, EnlirSchool, isEnlirElement, isEnlirSchool } from '../enlir';\nimport { andOrList } from './util';\n\nexport interface XRegExpNamedGroups {\n  [groupName: string]: string;\n}\n\nexport const SB_BAR_SIZE = 250;\n\nexport type MrPDamageType = 'phys' | 'white' | 'magic' | '?';\n\nexport const damageTypeAbbreviation = (damageType: MrPDamageType) => damageType[0];\n\nconst elementShortName: { [element: string]: string } = {\n  lightning: 'lgt',\n  ne: 'non',\n  poison: 'bio',\n};\n\nconst elementAbbreviation: { [element: string]: string } = {\n  water: 'wa',\n  wind: 'wi',\n  poison: 'b',\n};\n\nconst schoolShortName: { [school in EnlirSchool]?: string } = {\n  'Black Magic': 'B.Mag',\n  'White Magic': 'W.Mag',\n  Summoning: 'Summon',\n};\n\nconst shortAliases: { [s: string]: string } = {\n  jump: 'jump',\n  physical: 'phys',\n\n  // Note the oddity: 'NE' as shown as an EnlirElement gets changed to 'non',\n  // while 'Non-Elemental' in effect text gets changed to 'non-elem.'  (E.g.,\n  // '1.1x non-elem dmg').\n  'non-elemental': 'non-elem',\n};\n\nexport function getElementShortName(element: EnlirElement | EnlirElement[]): string {\n  element = arrayify(element);\n  return element.map(i => elementShortName[i.toLowerCase()] || i.toLowerCase()).join('+');\n}\n\nexport function getElementAbbreviation(element: EnlirElement | EnlirElement[]): string {\n  element = arrayify(element);\n  return element.map(i => elementAbbreviation[i.toLowerCase()] || i[0].toLowerCase()).join('+');\n}\n\nexport function getSchoolShortName(school: EnlirSchool): string {\n  return schoolShortName[school] || school;\n}\n\nexport function getShortName(s: string): string {\n  return isEnlirElement(s)\n    ? getElementShortName(s)\n    : isEnlirSchool(s)\n    ? getSchoolShortName(s)\n    : shortAliases[s.toLowerCase()] || s;\n}\n\nexport function getAbbreviation(s: string): string {\n  return isEnlirElement(s)\n    ? getElementAbbreviation(s)\n    : isEnlirSchool(s)\n    ? getSchoolShortName(s)\n    : s;\n}\n\nexport function appendElement(\n  element: EnlirElement[] | null,\n  f: (element: EnlirElement[]) => string,\n): string {\n  return element && element.length ? ' ' + f(element) : '';\n}\n\nexport function formatSchoolOrAbilityList(list: string): string {\n  return (\n    list\n      .split(andOrList)\n      .map(getShortName)\n      .join('/')\n      // Hack: Special-case the list of all elements, as observed in Ovelia's\n      // and Relm's LM2 and the Elemental Boost status effect.\n      .replace('fire/ice/lgt/earth/wind/water/holy/dark/bio', 'elem')\n  );\n}\n","/**\n * @file\n * URLs for static data and assets\n */\n\nimport { BaseUrl, LangType } from '../api/apiUrls';\nimport { dressRecordsById } from './dressRecords';\nimport { enlir } from './enlir';\nimport { ItemType } from './items';\n\nconst baseUrl: BaseUrl = {\n  [LangType.Jp]: 'http://dff.sp.mbga.jp/dff/static/lang/',\n  [LangType.Gl]: 'http://ffrk.denagames.com/dff/static/lang/ww/compile/en/',\n};\n\nexport function url(lang: LangType, subPath: string): string {\n  return baseUrl[lang] + subPath;\n}\n\nexport function relativeUrl(lang: LangType, relativeUrlPath: string): string {\n  return url(lang, relativeUrlPath.replace('/dff/static/lang/', ''));\n}\n\nexport function asset(lang: LangType, assetPath?: string): string | undefined {\n  return assetPath == null\n    ? undefined\n    : url(lang, assetPath.replace(/^\\/Content\\/lang\\/(ww\\/compile\\/[a-z]+\\/)?/, ''));\n}\n\nexport function characterImage(lang: LangType, id: number): string {\n  return url(lang, `image/buddy/${id}/${id}.png`);\n}\n\nexport function dropItemImage(lang: LangType, id: number): string {\n  return url(lang, `ab/battle/drop_icon/${id}.png`);\n}\n\nexport function magiciteImage(lang: LangType, id: number): string {\n  // Magicite skill image: purple circle background\n  // return url(lang, `image/beast_active_skill/${id}1/${id}1_128.png`);\n  // Item image: brown circle in a square, with element and rarity overlay icons\n  return itemImage(lang, id, ItemType.Magicite);\n}\n\n// Record materia with an item background, as shown when it first drops\nexport function recordMateriaDropImage(lang: LangType, id: number): string {\n  return url(lang, `image/record_materia/${id}/${id}_112.png`);\n}\n\n// Normal record materia image, as shown on the character screen\nexport function recordMateriaImage(lang: LangType, id: number): string {\n  return url(lang, `image/record_materia/${id}/${id}_128.png`);\n}\n\nexport function relicImage(lang: LangType, id: number, rarity: number): string {\n  return url(lang, `image/equipment/${id}/${id}_0${rarity}_112.png`);\n}\n\nexport function itemImage(lang: LangType, id: number, type: ItemType): string {\n  switch (type) {\n    case ItemType.Common:\n      return url(lang, `image/common_item/${id}.png`);\n    case ItemType.GrowthEgg:\n      return url(lang, `image/growegg/${id}/${id}_112.png`);\n    case ItemType.Ability:\n    case ItemType.Arcana:\n    case ItemType.CrystalWater:\n    case ItemType.DarkMatter:\n    case ItemType.Magicite:\n    case ItemType.MemoryCrystal:\n    case ItemType.Mote:\n    case ItemType.Orb:\n    case ItemType.UpgradeMaterial:\n      return url(lang, `image/${type}/${id}/${id}_112.png`);\n    case ItemType.Relic: {\n      const relic = enlir.relics[id];\n\n      // For Octopath Traveler, a new collaboration event resulted in a 5*\n      // accessory that wasn't in Enlir.  It's probably safe to assume that any\n      // unknown relics are of that sort and that JP foresight will take care\n      // of the rest.\n      const rarity = relic ? relic.rarity : 5;\n\n      return relicImage(lang, id, rarity);\n    }\n    case ItemType.Character:\n      return characterImage(lang, id);\n    case ItemType.DressRecord:\n      // Dress record URLs embed the character ID, but tracking and passing\n      // that through to here would complicate the code, so we instead maintain\n      // a list of known dress record IDs.\n      //\n      // Fall back to dress record ID if it's an unknown dress record.\n      // This will fail but will avoid an error.\n      const buddyId = dressRecordsById[id] ? dressRecordsById[id].characterId : id;\n      return url(lang, `image/buddy/${buddyId}/${id}/${id}.png`);\n    case ItemType.RecordMateria:\n      return recordMateriaImage(lang, id);\n    case ItemType.DropItem:\n      return dropItemImage(lang, id);\n    case ItemType.Music:\n      return url(lang, 'image/music_ticket/music_ticket.png');\n  }\n}\n\nexport function seriesIcon(lang: LangType, seriesId: number): string | null {\n  if (seriesId >= 101001 && seriesId <= 115001 && seriesId % 1000 === 1) {\n    const series = Math.floor((seriesId - 100000) / 1000);\n    return url(lang, `image/event_intro/common/pict/icon_series_${series}.png`);\n  } else if (seriesId === 150001) {\n    return url(lang, `image/event_intro/common/pict/icon_series_fft.png`);\n  } else if (seriesId === 160001) {\n    return url(lang, `image/event_intro/common/pict/icon_series_type0.png`);\n  } else {\n    return null;\n  }\n}\n\nexport function crystalTowerFloorIcon(lang: LangType, id: number): string {\n  return url(lang, `image/crystal_tower/floor_icon/${id}.png`);\n}\n","export { enlir } from './enlir';\nexport { series } from './series';\n","import { createAction } from 'typesafe-actions';\n\nimport { SeriesId } from '../data/series';\nimport { Character } from './characters';\n\nimport * as _ from 'lodash';\n\nexport type Step = 1 | 2 | 3 | 4;\nexport type Order = '1' | '1a' | '1b' | '2' | '3';\n\nexport enum RecordMateriaStatus {\n  // Unknown materia, or unobtained for unknown reason (e.g., missing character\n  // info because the character is not yet obtained)\n  Unknown,\n\n  // Locked due to level or level cap too low\n  LockedLowLevel,\n\n  // Locked due to missing prerequisite\n  LockedMissingPrereq,\n\n  // Unlocked but not yet collected\n  Unlocked,\n\n  // Collected / obtained and in inventory\n  Collected,\n\n  // Collected, in inventory, and starred\n  Favorite,\n\n  // Collected and stashed in vault\n  Vault,\n}\n\nexport interface RecordMateria {\n  name: string;\n  id: number;\n  description: string;\n  condition: string;\n  characterId: number;\n  characterName: string;\n  seriesId: SeriesId;\n  obtained: boolean;\n  step: Step;\n  order: Order;\n  prereqs?: number[]; // IDs of prerequisite record materia\n}\n\n/**\n * Record materia, including calculated values\n */\nexport interface RecordMateriaDetail extends RecordMateria {\n  status: RecordMateriaStatus;\n  statusDescription: string;\n}\n\nfunction isLowLevel(recordMateria: RecordMateria, character: Character) {\n  switch (recordMateria.order) {\n    case '1':\n    case '1a':\n    case '1b':\n      return character.levelCap <= 50;\n    case '2':\n      return character.levelCap <= 65;\n    case '3':\n      return character.level < 99;\n  }\n}\n\nfunction levelNeeded(orderOrRecordMateria: Order | RecordMateria) {\n  const order =\n    typeof orderOrRecordMateria === 'object' ? orderOrRecordMateria.order : orderOrRecordMateria;\n  switch (order) {\n    case '1':\n    case '1a':\n    case '1b':\n      return 50;\n    case '2':\n      return 65;\n    case '3':\n      return 99;\n  }\n}\n\n/**\n * Gets the record materia status.\n *\n * @param recordMateria\n * @param character\n * @param prereqs\n * @param isInInventory\n *   Is this in inventory, as reported by party list?  See\n *   RecordMateriaState.inventory.\n * @param isFavorite\n *   Is this a favorite (starred), as reported by party list?  See\n *   RecordMateriaState.inventory.\n * @param isObtained\n *   Is this obtained, as reported by party list?  See\n *   RecordMateriaState.inventory.\n */\nexport function getStatus(\n  recordMateria: RecordMateria,\n  character: Character | undefined,\n  prereqs: RecordMateria[],\n  isInInventory: boolean | undefined,\n  isFavorite: boolean | undefined,\n  isObtained: boolean | undefined,\n): { status: RecordMateriaStatus; statusDescription: string } {\n  let missingPrereq: RecordMateria | undefined;\n  if (recordMateria.obtained || isObtained) {\n    if (!isInInventory) {\n      return {\n        status: RecordMateriaStatus.Vault,\n        statusDescription: 'Vault',\n      };\n    } else if (isFavorite) {\n      return {\n        status: RecordMateriaStatus.Favorite,\n        statusDescription: 'Favorite',\n      };\n    } else {\n      return {\n        status: RecordMateriaStatus.Collected,\n        statusDescription: 'Collected',\n      };\n    }\n  } else if (!character) {\n    // We can't really distinguish between out-of-date character info that's\n    // missing characters, or botched static data within our app, or a\n    // character who's not yet obtained - but a character who's not yet\n    // obtained is far more likely.  Display text accordingly.\n    return {\n      status: RecordMateriaStatus.Unknown,\n      statusDescription: 'Character not yet obtained',\n    };\n  } else if (isLowLevel(recordMateria, character)) {\n    return {\n      status: RecordMateriaStatus.LockedLowLevel,\n      statusDescription: `Low level (${character.level}/${levelNeeded(recordMateria)})`,\n    };\n  } else if ((missingPrereq = _.find(prereqs, i => !i.obtained)) != null) {\n    return {\n      status: RecordMateriaStatus.LockedMissingPrereq,\n      statusDescription: `Missing RM ${missingPrereq.order}`,\n    };\n  } else {\n    return {\n      status: RecordMateriaStatus.Unlocked,\n      statusDescription: 'Unlocked',\n    };\n  }\n}\n\nexport function getPrereqs(\n  recordMateria: RecordMateria,\n  allRecordMateria: { [id: number]: RecordMateria },\n) {\n  return _.map(recordMateria.prereqs, i => allRecordMateria[i]);\n}\n\n/// Sets the master list of all record materia from the Library page\nexport const setRecordMateria = createAction(\n  'SET_RECORD_MATERIA',\n  (recordMateria: { [id: number]: RecordMateria }) => ({\n    type: 'SET_RECORD_MATERIA',\n    payload: {\n      recordMateria,\n    },\n  }),\n);\n\n/// Obtained one or more record materia (for example, from winning a battle)\nexport const obtainRecordMateria = createAction(\n  'OBTAIN_RECORD_MATERIA',\n  (id: number | number[]) => ({\n    type: 'OBTAIN_RECORD_MATERIA',\n    payload: {\n      id,\n    },\n  }),\n);\n\n/// Sets the list of record materia currently in inventory and record materia favorites\nexport const setRecordMateriaInventory = createAction(\n  'SET_RECORD_MATERIA_INVENTORY',\n  (inventory: number[], favorites: number[], warehouse: number[]) => ({\n    type: 'SET_RECORD_MATERIA_INVENTORY',\n    payload: {\n      inventory,\n      favorites,\n      warehouse,\n    },\n  }),\n);\n\n/// Updates a single record materia's inventory and favorite status\nexport const updateRecordMateriaInventory = createAction(\n  'UPDATE_RECORD_MATERIA_INVENTORY',\n  (id: number, { inventory, favorite }: { inventory?: boolean; favorite?: boolean }) => ({\n    type: 'UPDATE_RECORD_MATERIA_INVENTORY',\n    payload: {\n      id,\n      inventory,\n      favorite,\n    },\n  }),\n);\n\nexport type RecordMateriaAction = ReturnType<\n  | typeof obtainRecordMateria\n  | typeof setRecordMateria\n  | typeof setRecordMateriaInventory\n  | typeof updateRecordMateriaInventory\n>;\n","import { createAction } from 'typesafe-actions';\n\nimport * as _ from 'lodash';\n\nimport { TimeT } from '../utils/timeUtils';\n\nexport interface RelicDrawBanner {\n  id: number;\n  imageUrl: string;\n  openedAt: TimeT;\n  closedAt: TimeT;\n  sortOrder: number;\n\n  canPull: boolean;\n  canSelect: boolean;\n\n  exchangeShopId?: number;\n\n  group?: string;\n  bannerRelics?: number[];\n}\n\nexport interface RelicDrawGroup {\n  groupName: string; // internal (not human-friendly) group name\n  imageUrl: string;\n  sortOrder: number;\n}\n\nexport interface RelicDrawProbabilities {\n  byRarity: {\n    [rarity: number]: number;\n  };\n  byRelic: {\n    [relicId: number]: number;\n  };\n}\n\nexport type ExchangeShopSelections = number[][];\n\nexport function getOffBannerRelics(\n  banner: RelicDrawBanner,\n  probabilities: RelicDrawProbabilities,\n): number[] {\n  const bannerSet = new Set<number>(banner.bannerRelics);\n  return _.keys(probabilities.byRelic)\n    .map(i => +i)\n    .filter(i => !bannerSet.has(i));\n}\n\nexport const setRelicDrawBanners = createAction(\n  'SET_RELIC_DRAW_BANNERS',\n  (banners: RelicDrawBanner[]) => ({\n    type: 'SET_RELIC_DRAW_BANNERS',\n    payload: banners,\n  }),\n);\n\nexport const setRelicDrawGroups = createAction(\n  'SET_RELIC_DRAW_GROUPS',\n  (groups: RelicDrawGroup[]) => ({\n    type: 'SET_RELIC_DRAW_GROUPS',\n    payload: groups,\n  }),\n);\n\nexport const setRelicDrawProbabilities = createAction(\n  'SET_RELIC_DRAW_PROBABILITIES',\n  (bannerId: number, probabilities: RelicDrawProbabilities) => ({\n    type: 'SET_RELIC_DRAW_PROBABILITIES',\n    payload: {\n      bannerId,\n      probabilities,\n    },\n  }),\n);\n\nexport const setExchangeShopSelections = createAction(\n  'SET_EXCHANGE_SHOP_SELECTIONS',\n  (exchangeShopId: number, selections: ExchangeShopSelections) => ({\n    type: 'SET_EXCHANGE_SHOP_SELECTIONS',\n    payload: {\n      exchangeShopId,\n      selections,\n    },\n  }),\n);\n\n/**\n * Instruct the app to load all missing relic probabilities and exchange shop\n * selections from the FFRK servers.\n */\nexport const loadBanners = createAction('LOAD_BANNERS', (bannerIds: number[]) => ({\n  type: 'LOAD_BANNERS',\n  payload: {\n    bannerIds,\n  },\n}));\n\nexport type RelicDrawAction = ReturnType<\n  | typeof loadBanners\n  | typeof setRelicDrawBanners\n  | typeof setRelicDrawGroups\n  | typeof setRelicDrawProbabilities\n  | typeof setExchangeShopSelections\n>;\n","import * as _ from 'lodash';\nimport * as XRegExp from 'xregexp';\n\nimport {\n  enlir,\n  EnlirBurstCommand,\n  EnlirElement,\n  EnlirSchool,\n  EnlirSkill,\n  EnlirSoulBreakTier,\n  isBraveCommand,\n  isBraveSoulBreak,\n  isBurstSoulBreak,\n  isEnlirElement,\n  isGlint,\n  isSoulBreak,\n} from '../enlir';\nimport { ParsedEnlirAttack, parseEnlirAttack } from './attack';\nimport { splitSkillStatuses } from './split';\nimport {\n  checkForAndStatuses,\n  describeStats,\n  formatDuration,\n  getRageSkills,\n  includeStatus,\n  parseEnlirStatus,\n  parseEnlirStatusWithSlashes,\n  parseStatusItem,\n  sortStatus,\n} from './status';\nimport {\n  formatRandomEther,\n  formatSmartEther,\n  resolveStatusAlias,\n  sbPointsAlias,\n} from './statusAlias';\nimport {\n  appendElement,\n  damageTypeAbbreviation,\n  getElementAbbreviation,\n  getElementShortName,\n  getSchoolShortName,\n  getShortName,\n  MrPDamageType,\n  XRegExpNamedGroups,\n} from './types';\nimport {\n  countMatches,\n  describeChances,\n  formatUseCount,\n  isAllSame,\n  orList,\n  parseNumberOccurrence,\n  toMrPFixed,\n  toMrPKilo,\n} from './util';\n\nexport const tierOrder: { [t in EnlirSoulBreakTier]: number } = {\n  Default: 0,\n  SB: 1,\n  SSB: 2,\n  BSB: 3,\n  Glint: 4,\n  'Glint+': 5,\n  OSB: 6,\n  AOSB: 7,\n  USB: 8,\n  AASB: 9,\n  CSB: 10,\n  RW: 100,\n  Shared: 101,\n};\n\nexport interface MrPSoulBreak {\n  // Time markers.  We could simply pass the time value itself, but this lets\n  // us pull out how it's displayed.\n  instant?: boolean;\n  fast?: boolean;\n  slow?: boolean;\n\n  chain?: string;\n  damage?: string;\n  other?: string;\n  school?: EnlirSchool;\n\n  /**\n   * If set, this indicates whether this is a burst command that toggles the\n   * burst status ON or OFF.\n   */\n  burstToggle?: boolean;\n\n  burstCommands?: MrPSoulBreak[];\n  braveCondition?: Array<EnlirElement | EnlirSchool>;\n  braveCommands?: MrPSoulBreak[];\n}\n\nfunction appendGroup(outGroup: string[], inGroup: string[], description?: string) {\n  if (inGroup.length) {\n    outGroup.push((description ? description + ' ' : '') + inGroup.join(', '));\n  }\n}\n\ninterface StatusInfliction {\n  description: string;\n  chance: number;\n  chanceDescription: string;\n}\n\nfunction formatStatusInfliction(status: StatusInfliction[]): string {\n  if (isAllSame(status, i => i.chance)) {\n    return status[0].chanceDescription + ' ' + status.map(i => i.description).join('/');\n  } else {\n    return status.map(i => i.chanceDescription + ' ' + i.description).join(', ');\n  }\n}\n\nfunction formatChance(chance: number, attack?: ParsedEnlirAttack | null): string {\n  const fallback = `${chance}%`;\n  if (chance === 100 || !attack) {\n    return fallback;\n  }\n\n  if (attack.numAttacks) {\n    if (attack.numAttacks === 1) {\n      return fallback;\n    } else {\n      const totalChanceFraction = 1 - (1 - chance / 100) ** attack.numAttacks;\n      const totalChance = Math.round(totalChanceFraction * 100);\n      return `${totalChance}% (${chance}% × ${attack.numAttacks})`;\n    }\n  }\n\n  if (countMatches(attack.damage, /\\//g)) {\n    // Looks like variable number of hits\n    return `${chance}%/hit`;\n  }\n\n  return fallback;\n}\n\n/**\n * Enlir lists Burst Mode and Haste for all BSBs and lists Brave Mode for all\n * Brave Ultra Soul Breaks, but MrP's format doesn't.\n */\nfunction checkBurstAndBraveMode(selfOther: string[]): string[] {\n  selfOther = _.filter(selfOther, i => i !== 'Brave Mode');\n  return selfOther.indexOf('Burst Mode') !== -1\n    ? _.filter(selfOther, i => i !== 'Burst Mode' && i !== 'Haste')\n    : selfOther;\n}\n\nfunction formatDamageType(damageType: MrPDamageType, abbreviate: boolean): string {\n  return abbreviate ? damageTypeAbbreviation(damageType) : damageType + ' ';\n}\n\nconst healRe = XRegExp(\n  String.raw`\n  [Rr]estores\\ #\n  (?:HP\\ \\((?<healFactor>(?:\\d+\\/)*\\d+)\\)\n  |(?<fixedHp>\\d+)\\ HP)\n  (?<who>\\ to\\ the\\ user|\\ to\\ all\\ allies|\\ to\\ the\\ lowest\\ HP%\\ ally)?\n  (?<rank>\\ at\\ rank\\ 1\\/2\\/3\\/4\\/5\\ of\\ the\\ triggering\\ ability)?\n  (?:\\ if\\ (?<ifAllyAlive>.*?)\\ is\\ alive)?\n  `,\n  'x',\n);\n\nconst statusEffectRe = XRegExp(\n  String.raw`\n  (?<verb>[Gg]rants|[Cc]auses|[Rr]emoves)\\ #\n\n  (?<statusString>(?:.*?(?:,?\\ and\\ |,\\ ))*?(?:.*?))\n\n  # Anchor the regex to end at anything that looks like the beginning of a new effect.\n  (?=\n    ,\\ grants|,\\ causes|,\\ removes|,\\ restores\\ HP\\ |\n    ,\\ damages\\ the\\ user\\ |\n    ,\\ heals\\ the\\ user\\ |\n    ,\\ casts\\ the\\ last\\ ability\\ used\\ by\\ an\\ ally\\b|\n  $)\n  `,\n  'x',\n);\n\nconst statModRe = XRegExp(\n  String.raw`\n  # Anchor the stat matching to the beginning of a clause.\n  (?:,\\ |^)\n\n  (?<stats>(?:[A-Z]{3}(?:,?\\ and\\ |,\\ ))*[A-Z]{3})\n  \\ (?<percent>[+-]\\ ?(?:\\d+/)*\\d+)%\n  (?<scalesWithUses>\\ scaling\\ with\\ uses)?\n  (?<who>\\ to\\ the\\ user|\\ to\\ all\\ allies)?\n  \\ for\\ (?<duration>\\d+)\\ seconds\n  (?:\\ at\\ (?<atStatus>.*?)\\ (?<atStatusCount>(\\d+/)*\\d))?\n`,\n  'x',\n);\n\ninterface DescribeOptions {\n  abbreviate: boolean;\n  showNoMiss: boolean;\n  includeSchool: boolean;\n  includeSbPoints: boolean;\n\n  prereqStatus: string | undefined;\n  burstCommands: EnlirBurstCommand[] | undefined;\n}\n\nfunction describeEnlirAttack(\n  skill: EnlirSkill,\n  attack: ParsedEnlirAttack,\n  opt: DescribeOptions,\n): [string, StatusInfliction[]] {\n  let damage = '';\n  const statusInfliction: StatusInfliction[] = [];\n\n  const abbreviate = opt.abbreviate || !!attack.hybridDamageType;\n  damage += attack.isAoE ? 'AoE ' : '';\n  damage += attack.randomChances ? attack.randomChances + ' ' : '';\n  damage += !attack.isFixedDamage ? formatDamageType(attack.damageType, abbreviate) : '';\n  damage += attack.isPiercing ? '^' : '';\n  damage += attack.damage;\n\n  if (attack.hybridDamageType) {\n    damage += ' or ';\n    damage += formatDamageType(attack.hybridDamageType, abbreviate);\n    damage += attack.hybridDamage;\n  }\n\n  damage += appendElement(\n    attack.element,\n    opt.abbreviate ? getElementAbbreviation : getElementShortName,\n  );\n  damage += attack.isRanged ? ' rngd' : '';\n  damage += attack.isJump ? ' jump' : '';\n  damage += attack.isOverstrike ? ' overstrike' : '';\n  damage +=\n    opt.includeSchool && attack.school && attack.school !== '?' && attack.school !== 'Special'\n      ? ' ' + getSchoolShortName(attack.school)\n      : '';\n  damage += opt.showNoMiss && attack.isNoMiss ? ' no miss' : '';\n  if (attack.additionalCrit && !attack.additionalCritType) {\n    // If critical hits might depend on the entire attack's scaling, process\n    // them now.\n    damage += ' @ +' + attack.additionalCrit.join(' - ') + '% crit';\n  }\n  if (attack.additionalCritDamage) {\n    damage += ` @ +${attack.additionalCritDamage}% crit dmg`;\n  }\n  if (!attack.scaleToDamage && attack.scaleType) {\n    // Rank chase / threshold / etc.\n    damage += ' ' + attack.scaleType;\n  }\n  if (attack.orDamage && attack.orCondition) {\n    damage +=\n      ', or ' +\n      damageTypeAbbreviation(attack.damageType) +\n      attack.orDamage +\n      ' ' +\n      attack.orCondition;\n  }\n  if (attack.scaleToDamage && attack.scaleType) {\n    // Damage scaling\n    damage +=\n      ', up to ' +\n      damageTypeAbbreviation(attack.damageType) +\n      attack.scaleToDamage +\n      ' ' +\n      attack.scaleType;\n  }\n  if (attack.defaultDamage) {\n    damage += ', default ' + damageTypeAbbreviation(attack.damageType) + attack.defaultDamage;\n  }\n  if (attack.minDamage) {\n    damage += `, min dmg ${attack.minDamage}`;\n  }\n  if (attack.additionalDamage) {\n    damage +=\n      ' @ ' +\n      (attack.additionalDamage[0] > 0 ? '+' : '') +\n      attack.additionalDamage.join(' - ') +\n      '% dmg';\n    damage += ' ' + attack.additionalDamageType;\n  }\n  if (attack.additionalCrit && attack.additionalCritType) {\n    damage += ' @ +' + attack.additionalCrit.join(' - ') + '% crit';\n    damage += ' ' + attack.additionalCritType;\n  }\n  // Omit ' (SUM)' for Summoning school; it seems redundant.\n  damage += attack.isSummon && attack.school !== 'Summoning' ? ' (SUM)' : '';\n  damage += attack.isNat && !attack.isFixedDamage ? ' (NAT)' : '';\n\n  if (attack.status && attack.statusChance) {\n    const { description, defaultDuration } = parseEnlirStatus(attack.status, skill);\n    const duration = attack.statusDuration || defaultDuration;\n    // Semi-hack: Attack statuses are usually or always imperils, and text\n    // like '35% +10% fire vuln.' looks weird.  Like MrP, we insert a 'for'\n    // to make it a bit clearer.\n    statusInfliction.push({\n      description: 'for ' + description + (duration ? ` ${duration}s` : ''),\n      chance: attack.statusChance,\n      chanceDescription: attack.statusChance + '%',\n    });\n  }\n\n  // Hack: In case a \"followed by\" attack left a trailing comma that we ended\n  // up not needing.\n  damage = damage.replace(/,$/, '');\n  return [damage, statusInfliction];\n}\n\n// FIXME: Rename to indicate broader usage (not just soul breaks now) and move out of index?\nexport function describeEnlirSoulBreak(\n  sb: EnlirSkill,\n  options: Partial<DescribeOptions> = {},\n): MrPSoulBreak {\n  const opt: DescribeOptions = {\n    abbreviate: false,\n    showNoMiss: true,\n    includeSchool: true,\n    includeSbPoints: true,\n    prereqStatus: undefined,\n    burstCommands: undefined,\n    ...options,\n  };\n\n  let m: RegExpMatchArray | null;\n  let chain: string | undefined;\n  let damage = '';\n\n  const statusInfliction: StatusInfliction[] = [];\n\n  // The components of MrPSoulBreak.other, as lists.  We break them up like\n  // this so that we can sort general items (e.g., elemental infuse), then\n  // self statuses, then party statuses, then \"details\" (e.g., EX modes).\n  //\n  // We may start returning these as is so callers can deal with them.\n  let burstToggle: boolean | undefined;\n  const other: string[] = [];\n  const aoeOther: string[] = [];\n  const selfOther: string[] = [];\n  const partyOther: string[] = [];\n  const detailOther: string[] = [];\n\n  const attackOpts = {\n    prereqStatus: opt.prereqStatus,\n    burstCommands: opt.burstCommands,\n  };\n  const attack = parseEnlirAttack(sb.effects, sb, attackOpts);\n  if (attack) {\n    const [thisDamage, thisStatusInfliction] = describeEnlirAttack(sb, attack, opt);\n    damage = thisDamage;\n    statusInfliction.push(...thisStatusInfliction);\n  }\n\n  // Check for additional / separate attacks.\n  if ((m = sb.effects.match(/\\. +Additional (.*)/))) {\n    const attack2 = parseEnlirAttack(m[1], sb, attackOpts);\n    if (attack2) {\n      const [thisDamage, thisStatusInfliction] = describeEnlirAttack(sb, attack2, opt);\n      if (damage) {\n        damage += ', then ';\n      }\n      damage += thisDamage;\n      statusInfliction.push(...thisStatusInfliction);\n    }\n  }\n\n  // A single attack with random fixed damage - this is too hard and weird to\n  // fit into parseEnlirAttack.\n  if ((m = sb.effects.match(/Randomly deals ((?:\\d+, )*\\d+,? or \\d+) damage/))) {\n    damage = m[1] + ' fixed dmg';\n  }\n\n  // Random effects.  In practice, these are always pure damage, so list as\n  // damage.\n  if ((m = sb.effects.match(/Randomly casts (.*)/))) {\n    const skillsAndChances = _.unzip(\n      m[1]\n        .split(orList)\n        .map(i => i.match(/^(.*?)(?: \\((\\d+)%\\))?$/))\n        .map((i: RegExpMatchArray) => [i[1], i[2] ? +i[2] : 1]),\n    ) as [string[], number[]];\n\n    let skills = skillsAndChances[0];\n\n    // Resolve skill effects, if it looks like it won't be too verbose.\n    if (skills.length <= 3) {\n      const skillOpt = { abbreviate: true, includeSchool: false };\n      skills = skillsAndChances[0].map(i => {\n        const thisSkill = enlir.abilitiesByName[i];\n        if (thisSkill) {\n          return i + ' (' + formatMrP(describeEnlirSoulBreak(thisSkill, skillOpt)) + ')';\n        } else {\n          return i;\n        }\n      });\n    }\n    damage = _.filter(describeChances(skills, skillsAndChances[1], ' / ')).join(' ');\n  }\n\n  if (damage && sb.effects.match(/ATK increases as HP decreases/)) {\n    // MrP and random comments on Reddit suggest that Cecil gets up to +1500\n    // and Locke gets +11-40%.  Without confirmation in Enlir, I'll omit for\n    // now.\n    damage += ', uses +ATK as HP falls';\n  }\n\n  // Hack / special case: Rage skills whose rage effects match the main effect.\n  let isPureRage = false;\n  let rageTurns: number | undefined;\n  if (\n    (m = sb.effects.match(/^Casts a random (.*) attack, grants Rage to the user for (\\d+) turns?/))\n  ) {\n    const [, rageSkill, turns] = m;\n    if (rageSkill === sb.name) {\n      isPureRage = true;\n      rageTurns = +turns;\n    }\n  } else if ((m = sb.effects.match(/^(.*), grants Rage to the user for (\\d+) turns?/))) {\n    const [, effects, turns] = m;\n    const rageSkills = getRageSkills(sb);\n    if (rageSkills.length === 1 && rageSkills[0].effects === effects) {\n      isPureRage = true;\n      rageTurns = +turns;\n    }\n  }\n  if (isPureRage && rageTurns) {\n    const rageStatus = parseEnlirStatus('Rage', sb);\n    const description = formatDuration(rageTurns + 1, 'turn') + ': ' + rageStatus.description;\n\n    // Hack: We're taking advantage of our knowledge of which rage skills exist\n    // here - only Gau's BSB's cmd2 is non-damaging.\n    const isNonDamage = 'school' in sb && sb.school === 'Special';\n    if (isNonDamage) {\n      other.push(description);\n    } else {\n      damage = description;\n    }\n  }\n\n  if ((m = sb.effects.match(/Activates (.*?) Chain \\(max (\\d+), field \\+(\\d+)%\\)/))) {\n    const [, type, max, fieldBonus] = m;\n\n    // Realm names should remain uppercase, but elements should not.\n    chain = (isEnlirElement(type) ? getElementShortName(type) : type) + ' chain';\n    chain += ' ' + toMrPFixed(1 + +fieldBonus / 100) + 'x';\n    chain += ` (max ${max})`;\n  }\n\n  if (\n    opt.burstCommands &&\n    _.some(opt.burstCommands, i =>\n      i.effects.match(new RegExp(' (scaling|scal\\\\.) with ' + sb.name + ' uses')),\n    )\n  ) {\n    // Hack: In practice, it's always command 1 that does the powering up.\n    other.push('powers up cmd 2');\n  }\n\n  if (\n    (m = sb.effects.match(\n      /[Rr]estores HP( to all allies| to the user| to the lowest HP% ally)? for (\\d+)% of (?:their|the target's|the user's) max\\.?(:?imum)? HP/i,\n    ))\n  ) {\n    const [, who, healPercent] = m;\n    const heal = `heal ${healPercent}% HP`;\n    if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n      partyOther.push(heal);\n    } else if (who === ' to the user' || (!who && sb.target === 'Self')) {\n      selfOther.push(heal);\n    } else if (who === ' to the lowest HP% ally') {\n      other.push('ally ' + heal);\n    } else {\n      // Fallback\n      other.push(heal);\n    }\n  }\n\n  if ((m = sb.effects.match(/(?:heals|restores HP to) the user for (\\d+)% of the damage dealt/))) {\n    const [, healPercent] = m;\n    selfOther.push(`heal ${healPercent}% of dmg`);\n  }\n\n  if ((m = sb.effects.match(/damages the user for ([0-9.]+)% max\\.?(?:imum)? HP/))) {\n    const [, damagePercent] = m;\n    selfOther.push(`lose ${damagePercent}% max HP`);\n  }\n\n  XRegExp.forEach(sb.effects, healRe, match => {\n    const {\n      healFactor,\n      fixedHp,\n      who,\n      rank,\n      ifAllyAlive,\n    } = (match as unknown) as XRegExpNamedGroups;\n    let heal = healFactor ? 'h' + healFactor : `heal ${toMrPKilo(+fixedHp)}`;\n    if (healFactor && sb.type === 'NAT') {\n      heal += ' (NAT)';\n    }\n    if (rank) {\n      heal += ' @ rank 1-5'; // rank-based healing chase - used by Lenna's AASB\n    }\n    if (ifAllyAlive) {\n      heal += ' if ' + ifAllyAlive + ' alive';\n    }\n    if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n      partyOther.push(heal);\n    } else if (who === ' to the user' || (!who && sb.target === 'Self')) {\n      selfOther.push(heal);\n    } else if (who === ' to the lowest HP% ally') {\n      other.push('ally ' + heal);\n    } else if (isSoulBreak(sb) && sb.target.startsWith('Single')) {\n      // Because medica soul breaks are so common, we'll call out when a SB\n      // only heals one person.\n      other.push('ally ' + heal);\n    } else {\n      // Fallback\n      other.push(heal);\n    }\n  });\n\n  const dispelEsunaRe = /[Rr]emoves (positive|negative) (?:status )?effects( to all allies| to a random ally with negative(?: status)? effects)?/g;\n  while ((m = dispelEsunaRe.exec(sb.effects))) {\n    const [, dispelOrEsuna, who] = m;\n    const effect = dispelOrEsuna === 'positive' ? 'Dispel' : 'Esuna';\n    if (!who && attack) {\n      // No need to list an explicit target - it's the same as the attack\n      other.push(effect);\n    } else if (!who && sb.target === 'All enemies') {\n      aoeOther.push(effect);\n    } else if (!who && sb.target.startsWith('Single')) {\n      other.push(effect);\n    } else if (who && who.startsWith(' to a random ally')) {\n      other.push('ally ' + effect);\n    } else if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n      partyOther.push(effect);\n    } else {\n      // Fallback\n      other.push(effect);\n    }\n  }\n\n  XRegExp.forEach(sb.effects, statusEffectRe, match => {\n    const { verb, statusString } = (match as unknown) as XRegExpNamedGroups;\n    const removes = verb.toLowerCase() === 'removes';\n    const wholeClause = match[0];\n    const status = splitSkillStatuses(statusString)\n      .map(i => parseStatusItem(i, wholeClause))\n      .reduce(checkForAndStatuses, [])\n      .sort(sortStatus);\n    status.forEach((thisStatus, thisStatusIndex) => {\n      // tslint:disable: prefer-const\n      let {\n        statusName,\n        duration,\n        durationUnits,\n        who,\n        chance,\n        scalesWithUses,\n        rank,\n        stacking,\n        condition,\n      } = thisStatus;\n      // tslint:enable: prefer-const\n\n      if (!includeStatus(statusName, { removes })) {\n        return;\n      }\n\n      if (statusName === 'Rage' && isPureRage) {\n        return;\n      }\n\n      const parsed = parseEnlirStatusWithSlashes(statusName, sb);\n      // tslint:disable: prefer-const\n      let {\n        description,\n        isExLike,\n        isDetail,\n        isBurstToggle,\n        isTrance,\n        defaultDuration,\n        isVariableDuration,\n        specialDuration,\n        optionCount,\n      } = parsed;\n      // tslint:enable: prefer-const\n\n      if (isBurstToggle) {\n        burstToggle = verb.toLowerCase() !== 'removes';\n        if (description === '') {\n          return;\n        }\n        // Special case: A burst toggle with an effect of its own.  If we're\n        // switching it ON, show it with a custom duration.  If switching OFF,\n        // show nothing.\n        if (burstToggle) {\n          specialDuration = 'until OFF';\n        } else {\n          return;\n        }\n      }\n\n      // Status removal.  In practice, only a few White Magic abilities hit\n      // this; the rest are special cased (Esuna, burst toggles, etc.).\n      //\n      // Hack: Text like \"removes negative effects, +100% DEF\" is actually\n      // a removes then grants.  There are no occurrences of \"removes A, B\" in\n      // the spreadsheet, so we can key off of the status index to handle that.\n      if (removes && thisStatusIndex === 0) {\n        description = 'remove ' + description;\n      }\n\n      if (isTrance) {\n        description = 'Trance: ' + description;\n      }\n      if (scalesWithUses) {\n        description += ' ' + formatUseCount(optionCount);\n      }\n      if (stacking) {\n        description = 'stacking ' + description;\n      }\n      if (rank) {\n        description += ' @ rank 1-5';\n      }\n      if (condition) {\n        description += ' ' + condition;\n      }\n\n      if (!duration && defaultDuration) {\n        duration = defaultDuration;\n        durationUnits = 'second';\n      }\n\n      const chanceDescription = chance ? formatChance(chance, attack) : '';\n\n      if ((duration || specialDuration) && !isVariableDuration) {\n        const durationText = specialDuration || formatDuration(duration!, durationUnits!);\n        if (isExLike) {\n          description = durationText + ': ' + description;\n        } else {\n          description = description + ' ' + durationText;\n        }\n      }\n\n      if (chance) {\n        statusInfliction.push({ description, chanceDescription, chance });\n      } else if (isDetail) {\n        // (Always?) has implied 'self'\n        detailOther.push(description);\n      } else if (!who && attack) {\n        // No need to list an explicit target - it's the same as the attack\n        other.push(description);\n      } else if (!who && sb.target === 'All enemies') {\n        aoeOther.push(description);\n      } else if (who === ' to the user' || (!who && sb.target === 'Self')) {\n        selfOther.push(description);\n      } else if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n        partyOther.push(description);\n      } else if (who && who.match(/random ally/)) {\n        other.push('ally ' + description);\n      } else {\n        other.push(description);\n      }\n    });\n  });\n\n  // Process stat mods.  Stop at the first \"Grants\" or \"Causes\" text; any stat\n  // mods there are handled along with status effects above.\n  XRegExp.forEach(\n    sb.effects.replace(/([Gg]rants|[Cc]auses|[Rr]emoves) .*/, ''),\n    statModRe,\n    ({ stats, percent, who, duration, scalesWithUses, atStatus, atStatusCount }: any) => {\n      const combinedStats = describeStats(stats.match(/[A-Z]{3}/g)!);\n      let statMod = percent.replace(' ', '') + '% ';\n      statMod += combinedStats;\n      if (scalesWithUses) {\n        statMod += ' ' + formatUseCount(countMatches(percent, /\\//g) + 1);\n      }\n      statMod += ` ${duration}s`;\n      if (atStatus) {\n        statMod += ' at ' + atStatus + ' ' + atStatusCount;\n      }\n\n      if (who === ' to the user' || (!who && sb.target === 'Self')) {\n        selfOther.push(statMod);\n      } else if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n        partyOther.push(statMod);\n      } else if (!who && attack) {\n        // No need to list an explicit target - it's the same as the attack\n        other.push(statMod);\n      } else if (sb.target === 'All enemies') {\n        aoeOther.push(statMod);\n      } else {\n        // Fallback - may not always be correct\n        other.push(statMod);\n      }\n    },\n  );\n\n  if ((m = sb.effects.match(/[Rr]emoves KO \\((\\d+)% HP\\)( to all allies)?/))) {\n    const [, percent, who] = m;\n    const revive = `revive @ ${percent}% HP`;\n    if (!who && sb.target.startsWith('Single')) {\n      other.push(revive);\n    } else if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n      partyOther.push(revive);\n    } else {\n      // Fallback\n      other.push(revive);\n    }\n  }\n\n  if ((m = sb.effects.match(/Attach (\\w+) Stacking/))) {\n    const [, element] = m;\n    other.push(resolveStatusAlias(`Attach ${element} Stacking`) + ' 25s');\n  }\n\n  if ((m = sb.effects.match(/Attach (\\w+)(?: |,|$)(?! Stacking)/))) {\n    const [, element] = m;\n    other.push(resolveStatusAlias(`Attach ${element}`) + ' 25s');\n  }\n\n  if (\n    (m = sb.effects.match(/[Rr]estores (\\d+) consumed ability use( to the user| to all allies)?/))\n  ) {\n    const [, amount, who] = m;\n    const ether = formatRandomEther(amount);\n    if (who === ' to the user' || (!who && sb.target === 'Self')) {\n      selfOther.push(ether);\n    } else if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n      partyOther.push(ether);\n    } else {\n      // Fallback\n      other.push(ether);\n    }\n  }\n  if ((m = sb.effects.match(/(\\w+ )?[Ss]mart (\\w+ )?ether (\\S+)( to the user| to all allies)?/))) {\n    const [, type1, type2, amount, who] = m;\n\n    // Process type (e.g., \"smart summoning ether\").  FFRK Community is\n    // inconsistent - sometimes \"Summoning smart ether,\" sometimes\n    // \"smart summoning ether.\"\n    // TODO: Fix that inconsistency\n    let type = type1 && type1 !== 'and ' ? type1 : type2;\n    if (type) {\n      type = getShortName(_.upperFirst(type.trim()));\n    }\n\n    const ether = formatSmartEther(amount, type);\n    if (who === ' to the user' || (!who && sb.target === 'Self')) {\n      selfOther.push(ether);\n    } else if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n      partyOther.push(ether);\n    } else {\n      // Fallback\n      other.push(ether);\n    }\n  }\n\n  if (\n    (m = sb.effects.match(\n      /(?:(\\d+)% chance to )?[Cc]asts? the last ability used by an ally(.*)?, default ability \\(PHY: single, 1.50 physical\\)/,\n    ))\n  ) {\n    const [, percentChance, times] = m;\n    let description = 'Mimic';\n    const timesNumber = (times && parseNumberOccurrence(times.trim())) || 1;\n\n    // For brave commands in particular, we'll want to compare with other\n    // numbers, so always include the count.\n    if (timesNumber !== 1 || isBraveCommand(sb)) {\n      description += ` ${timesNumber}x`;\n    }\n\n    if (percentChance) {\n      description = `${percentChance}% chance of ` + description;\n    }\n\n    other.push(description);\n  }\n\n  if (\n    (m = sb.effects.match(\n      /(\\d+) (?:SB|Soul Break) points( to the user| to all allies)?( if successful)?/,\n    ))\n  ) {\n    const [, points, who, ifSuccessful] = m;\n    let description = sbPointsAlias(points);\n    if (ifSuccessful) {\n      description += ' on success';\n    }\n    if (who === ' to all allies' || (!who && sb.target === 'All allies')) {\n      partyOther.push(description);\n    } else if (who === ' to the user' || (!who && sb.target === 'Self')) {\n      // Unlike most effects, use other, not selfOther, here - SB points may\n      // be assumed to be self, so listing self seems redundant.\n      other.push(description);\n    } else if (sb.target.startsWith('Single')) {\n      other.push('ally ' + description);\n    } else {\n      // Fallback\n      other.push(description);\n    }\n  }\n  if ('sb' in sb) {\n    if (opt.includeSbPoints && sb.sb === 0) {\n      // If we weren't asked to suppress SB points (which we are for follow-ups\n      // and finishers, since those don't generate gauge), then call out\n      // anything that doesn't generate gauge.\n      other.push('no SB pts');\n    } else if (sb.sb >= 150) {\n      // If this skill grants an abnormally high number of SB points, show it.\n      // We set a flat rate of 150 (to get Lifesiphon and Wrath) instead of\n      // trying to track what's normal at each rarity level.\n      other.push(sbPointsAlias(sb.sb.toString()));\n    }\n  }\n\n  if ((m = sb.effects.match(/cast time ([-+]?[0-9.]+) for each previous use/))) {\n    const [, castTime] = m;\n    other.push('cast time ' + castTime + 's per use');\n  }\n  if ((m = sb.effects.match(/cast time ((:?[0-9.]+\\/)+[0-9.]+) scaling with uses/))) {\n    const [, castTime] = m;\n    other.push('cast time ' + castTime + ' ' + formatUseCount(castTime.split(/\\//).length));\n  }\n\n  if (statusInfliction.length) {\n    other.splice(0, 0, formatStatusInfliction(statusInfliction));\n  }\n\n  if (\n    isSoulBreak(sb) &&\n    isGlint(sb) &&\n    !damage &&\n    !other.length &&\n    !aoeOther.length &&\n    !partyOther.length &&\n    !detailOther.length\n  ) {\n    // If it's a glint with only self effects, then \"self\" is redundant.\n    other.push(...checkBurstAndBraveMode(selfOther));\n  } else {\n    appendGroup(other, aoeOther, 'AoE');\n    appendGroup(other, partyOther, 'party');\n    appendGroup(other, checkBurstAndBraveMode(selfOther), 'self');\n    appendGroup(other, detailOther);\n  }\n\n  if (sb.effects.endsWith(', reset')) {\n    other.push('reset count');\n  }\n\n  const result: MrPSoulBreak = {\n    damage: damage || undefined,\n    other: other.length ? other.join(', ') : undefined,\n  };\n\n  if (sb.time != null) {\n    if (sb.time <= 0.01) {\n      result.instant = true;\n    } else if (sb.time < 1.2 || (isSoulBreak(sb) && sb.time && sb.time <= 1.25)) {\n      result.fast = true;\n    } else if (!isSoulBreak(sb) && sb.time && sb.time > 2) {\n      result.slow = true;\n    }\n  }\n\n  if (chain) {\n    result.chain = chain;\n  }\n  if ('school' in sb) {\n    result.school = sb.school;\n  }\n  if (burstToggle != null) {\n    result.burstToggle = burstToggle;\n  }\n\n  if (\n    isSoulBreak(sb) &&\n    isBurstSoulBreak(sb) &&\n    enlir.burstCommandsByCharacter[sb.character] &&\n    enlir.burstCommandsByCharacter[sb.character][sb.name]\n  ) {\n    const burstCommands = enlir.burstCommandsByCharacter[sb.character][sb.name];\n    result.burstCommands = burstCommands.map(i =>\n      describeEnlirSoulBreak(i, { abbreviate: true, includeSchool: false, burstCommands }),\n    );\n  }\n  if (\n    isSoulBreak(sb) &&\n    isBraveSoulBreak(sb) &&\n    enlir.braveCommandsByCharacter[sb.character] &&\n    enlir.braveCommandsByCharacter[sb.character][sb.name]\n  ) {\n    const braveCommands = enlir.braveCommandsByCharacter[sb.character][sb.name];\n    result.braveCondition = braveCommands[0].braveCondition;\n    result.braveCommands = braveCommands.map(i =>\n      describeEnlirSoulBreak(i, { abbreviate: true, includeSchool: false }),\n    );\n  }\n  return result;\n}\n\ninterface FormatOptions {\n  showTime: boolean;\n}\n\nfunction describeMrPTime({ instant, fast, slow }: MrPSoulBreak): string | null {\n  if (instant) {\n    return 'instant';\n  } else if (fast) {\n    return 'fast';\n  } else if (slow) {\n    return 'slow';\n  } else {\n    return null;\n  }\n}\n\nexport function formatMrP(mrP: MrPSoulBreak, options: Partial<FormatOptions> = {}): string {\n  const opt: FormatOptions = {\n    showTime: true,\n    ...options,\n  };\n\n  const burstToggleText = mrP.burstToggle == null ? '' : mrP.burstToggle ? 'ON' : 'OFF';\n  let text = _.filter([burstToggleText, mrP.chain, mrP.damage, mrP.other]).join(', ');\n  if (text && opt.showTime) {\n    const time = describeMrPTime(mrP);\n    text = (time ? time + ' ' : '') + text;\n  }\n  return text;\n}\n\n// TODO: Hide min damage?  Hide school for percent-based finishers?\n// TODO: Handle element '?' - it's not a valid EnlirElement and so is rejected by our schemas, even thought it can appear in the data\n// TODO: Slash-combine items like Amarant lightning+fire vuln. or Celes' element boosts - and ideally remove patchEnlir\n// TODO: Use × for times; make Unicode selectable?\n// TODO: Redo percent random attacks to match MrP's Fujin?\n","export const arrayify = <T>(value: T | T[]) => (Array.isArray(value) ? value : [value]);\n\nexport function compareWithUndefined<T>(compare: (a: T, b: T) => number) {\n  return (a: T | undefined, b: T | undefined) => {\n    if (a == null && b == null) {\n      return 0;\n    } else if (a == null) {\n      return -1;\n    } else if (b == null) {\n      return 1;\n    } else {\n      return compare(a, b);\n    }\n  };\n}\n","import { getType } from 'typesafe-actions';\n\nimport {\n  addWorldDungeons,\n  Dungeon,\n  DungeonsAction,\n  finishWorldDungeons,\n  forgetWorldDungeons,\n  openDungeonChest,\n  updateDungeon,\n} from '../actions/dungeons';\nimport { World } from '../actions/worlds';\n\nimport * as _ from 'lodash';\n\nconst u = require('updeep');\n\nexport interface DungeonState {\n  dungeons: {\n    [id: number]: Dungeon;\n  };\n  byWorld: {\n    [id: number]: number[];\n  };\n}\n\nconst initialState = {\n  dungeons: {},\n  byWorld: {},\n};\n\nexport function getDungeonsForWorld(state: DungeonState, worldId: number) {\n  const worldDungeons = state.byWorld[worldId];\n  return worldDungeons ? worldDungeons.map((i: number) => state.dungeons[i]) : undefined;\n}\n\nexport function getDungeonsForWorlds(state: DungeonState, worlds: World[]) {\n  const worldDungeons: Array<Dungeon[] | undefined> = worlds.map(w =>\n    getDungeonsForWorld(state, w.id),\n  );\n  return _.flatten((_.filter(worldDungeons) as any) as Dungeon[][]);\n}\n\nexport function getWorldIdForDungeon(state: DungeonState, dungeonId: number): number | undefined {\n  const result = _.findKey(state.byWorld, i => i.indexOf(dungeonId) !== -1);\n  return result ? +result : undefined;\n}\n\nexport function dungeons(state: DungeonState = initialState, action: DungeonsAction): DungeonState {\n  switch (action.type) {\n    case getType(addWorldDungeons):\n      const newDungeons: { [id: number]: Dungeon } = { ...state.dungeons };\n      for (const i of action.payload.dungeons) {\n        newDungeons[i.id] = i;\n      }\n\n      return {\n        dungeons: newDungeons,\n        byWorld: {\n          ...state.byWorld,\n          [action.payload.worldId]: action.payload.dungeons.map((i: Dungeon) => i.id),\n        },\n      };\n\n    case getType(finishWorldDungeons): {\n      const { worldId, isComplete, isMaster } = action.payload;\n\n      const dungeonUpdate: Partial<Dungeon> = {};\n      if (isComplete) {\n        dungeonUpdate.isComplete = true;\n      }\n      if (isMaster) {\n        dungeonUpdate.isMaster = true;\n      }\n\n      const updates = _.zipObject(\n        state.byWorld[worldId],\n        _.times(state.byWorld[worldId].length, () => dungeonUpdate),\n      );\n      return {\n        ...state,\n        dungeons: u.update(updates, state.dungeons),\n      };\n    }\n\n    case getType(forgetWorldDungeons):\n      if (!state.byWorld[action.payload]) {\n        return state;\n      }\n      return {\n        dungeons: _.omit(state.dungeons, state.byWorld[action.payload]),\n        byWorld: _.omit(state.byWorld, action.payload),\n      };\n\n    case getType(openDungeonChest): {\n      const { dungeonId } = action.payload;\n      const dungeon = state.dungeons[dungeonId] || {};\n      if (!dungeon.dungeonChests) {\n        return state;\n      }\n      return u.updateIn(['dungeons', dungeonId, 'dungeonChests'], dungeon.dungeonChests - 1, state);\n    }\n\n    case getType(updateDungeon): {\n      const { dungeonId, dungeon } = action.payload;\n      if (!state.dungeons[dungeonId]) {\n        // Missing dungeon info - no sense in storing incomplete info.\n        return state;\n      }\n      return {\n        ...state,\n        dungeons: {\n          ...state.dungeons,\n          [dungeonId]: {\n            ...state.dungeons[dungeonId],\n            ...dungeon,\n          },\n        },\n      };\n    }\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","import * as React from 'react';\n\nimport { LangType } from '../api/apiUrls';\n\nexport const LangContext = React.createContext(LangType.Gl);\n","import { createAction } from 'typesafe-actions';\n\nimport { LangType } from '../api/apiUrls';\n\nexport interface Session {\n  // User ID.  A very large (~50 bit) integer.\n  userId?: string;\n\n  // Is this user using the Japanese (JP) version instead of global (GL)?\n  isJp?: boolean;\n\n  // User session - 32 character hexadecimal string\n  userSession?: string;\n\n  // http_session_sid cookie\n  sessionCookie?: string;\n}\n\nexport const getLang = (session: Session): LangType => (session.isJp ? LangType.Jp : LangType.Gl);\n\nexport const updateSession = createAction('UPDATE_SESSION', (session: Session) => ({\n  type: 'UPDATE_SESSION',\n  payload: session,\n}));\n\nexport type SessionAction = ReturnType<typeof updateSession>;\n","import * as _ from 'lodash';\n\nexport const alphabet = _.times(26, i => String.fromCharCode('A'.charCodeAt(0) + i));\n\nexport function alphabetize<T>(items: T[], by: (item: T) => string): { [letter: string]: T[] } {\n  const result: { [letter: string]: T[] } = {};\n  _.sortBy(items, by).map(i => {\n    const letter = by(i)\n      .charAt(0)\n      .toUpperCase();\n    result[letter] = result[letter] || [];\n    result[letter].push(i);\n  });\n  return result;\n}\n\nexport function pluralize(n: number, word: string, pluralWord?: string) {\n  pluralWord = pluralWord || word + 's';\n  return n === 1 ? word : pluralWord;\n}\n","import * as React from 'react';\n\nimport { RecordMateriaProps } from './RecordMateriaList';\nimport { RecordMateriaTable } from './RecordMateriaTable';\nimport { TableDefinition } from './RecordMateriaTableDefinitions';\nimport { RecordMateriaTooltip } from './RecordMateriaTooltip';\n\ninterface Props extends RecordMateriaProps {\n  id: string;\n  tables: TableDefinition[];\n}\n\nexport class RecordMateriaTableGroup extends React.Component<Props> {\n  render() {\n    const { id, recordMateria, isAnonymous, tables } = this.props;\n    const tooltipId = `${id}-tooltips`;\n    return (\n      <>\n        {tables.map((t, i) => (\n          <RecordMateriaTable\n            key={i}\n            tooltipId={tooltipId}\n            table={t}\n            recordMateria={recordMateria}\n            isAnonymous={isAnonymous}\n          />\n        ))}\n        <RecordMateriaTooltip id={tooltipId} recordMateria={recordMateria} isAnonymous={isAnonymous} />\n      </>\n    );\n  }\n}\n","import { createSelector } from 'reselect';\n\nimport * as _ from 'lodash';\n\nimport {\n  ExchangeShopSelections,\n  RelicDrawBanner,\n  RelicDrawGroup,\n  RelicDrawProbabilities,\n} from '../actions/relicDraws';\nimport { enlir } from '../data/enlir';\nimport { IState } from '../reducers';\nimport { RelicDrawState } from '../reducers/relicDraws';\nimport { getOwnedLegendMateria, getOwnedSoulBreaks } from './characters';\n\nexport interface RelicDrawBannerDetails extends RelicDrawBanner {\n  totalCount?: number;\n  dupeCount?: number;\n  selections?: ExchangeShopSelections;\n}\n\nexport interface RelicDrawGroupDetails extends RelicDrawGroup {\n  bannerCount: number;\n  canPull: boolean;\n  canSelect: boolean;\n  canPullOrSelectCount: number;\n}\n\nexport type RelicDrawBannerOrGroup = RelicDrawBannerDetails | RelicDrawGroupDetails;\n\nexport function isGroup(item: RelicDrawBannerOrGroup): item is RelicDrawGroupDetails {\n  return 'groupName' in item;\n}\n\nfunction getDupeCount(\n  relicIds: number[],\n  ownedSoulBreaks: Set<number> | undefined,\n  ownedLegendMateria: Set<number> | undefined,\n): number | undefined {\n  if (!ownedSoulBreaks || !ownedLegendMateria) {\n    return undefined;\n  }\n\n  return (\n    _.filter(\n      relicIds,\n      i => enlir.relicSoulBreaks[i] && ownedSoulBreaks.has(enlir.relicSoulBreaks[i].id),\n    ).length +\n    _.filter(\n      relicIds,\n      i => enlir.relicLegendMateria[i] && ownedLegendMateria.has(enlir.relicLegendMateria[i].id),\n    ).length\n  );\n}\n\nexport interface RelicDrawBannersAndGroups {\n  // Indexed by group name - 'undefined' if no group\n  [group: string]: RelicDrawBannerOrGroup[];\n}\n\nfunction getOneBannerDetails(\n  banner: RelicDrawBanner,\n  probabilities: RelicDrawProbabilities | undefined,\n  allSelections: { [exchangeShopId: number]: ExchangeShopSelections },\n  ownedSoulBreaks: Set<number> | undefined,\n  ownedLegendMateria: Set<number> | undefined,\n): RelicDrawBannerDetails {\n  const selections =\n    banner.exchangeShopId && allSelections ? allSelections[banner.exchangeShopId] : undefined;\n\n  if (banner.bannerRelics && banner.bannerRelics.length !== 0) {\n    return {\n      ...banner,\n      selections,\n      totalCount: banner.bannerRelics.length,\n      dupeCount: getDupeCount(banner.bannerRelics, ownedSoulBreaks, ownedLegendMateria),\n    };\n  } else if (probabilities) {\n    const allRelics = _.keys(probabilities.byRelic).map(j => +j);\n    return {\n      ...banner,\n      selections,\n      totalCount: allRelics.length,\n      dupeCount: getDupeCount(allRelics, ownedSoulBreaks, ownedLegendMateria),\n    };\n  } else if (selections) {\n    return {\n      ...banner,\n      selections,\n    };\n  } else {\n    return banner;\n  }\n}\n\nexport const getBannerDetails = createSelector<\n  IState,\n  RelicDrawState,\n  Set<number> | undefined,\n  Set<number> | undefined,\n  { [bannerId: number]: RelicDrawBannerDetails }\n>(\n  (state: IState) => state.relicDraws,\n  getOwnedSoulBreaks,\n  getOwnedLegendMateria,\n  ({ banners, probabilities, selections }, ownedSoulBreaks, ownedLegendMateria) => {\n    return _.mapValues(banners, (banner: RelicDrawBanner) =>\n      getOneBannerDetails(\n        banner,\n        probabilities[banner.id],\n        selections,\n        ownedSoulBreaks,\n        ownedLegendMateria,\n      ),\n    );\n  },\n);\n\nexport const getBannersAndGroups = createSelector<\n  IState,\n  RelicDrawState,\n  { [bannerId: number]: RelicDrawBannerDetails },\n  RelicDrawBannersAndGroups\n>(\n  (state: IState) => state.relicDraws,\n  getBannerDetails,\n  ({ banners, groups }, bannerDetails) => {\n    const result: { [group: string]: RelicDrawBannerOrGroup[] } = {};\n\n    for (const group of [..._.keys(groups), undefined]) {\n      const groupName = '' + group;\n\n      result[groupName] = _.filter(bannerDetails, i => i.group === group);\n\n      // If this is the root (undefined) group, then extend with all child groups.\n      if (!group) {\n        result[groupName].push(\n          ..._.values(groups).map(g => {\n            const groupBanners = _.filter(banners, i => i.group === g.groupName);\n            return {\n              ...g,\n              bannerCount: groupBanners.length,\n              canPull: _.some(groupBanners, i => i.canPull),\n              canSelect: _.some(groupBanners, i => i.canSelect),\n              canPullOrSelectCount: _.sumBy(groupBanners, i => +(i.canPull || i.canSelect)),\n            };\n          }),\n        );\n      }\n\n      result[groupName] = _.sortBy(result[groupName], i => -i.sortOrder);\n    }\n\n    return result;\n  },\n);\n\nexport const getMissingBanners = createSelector<IState, RelicDrawState, number[]>(\n  (state: IState) => state.relicDraws,\n  ({ banners, probabilities, selections }) => {\n    // Start with all banner IDs.\n    const missing = new Set(_.keys(banners).map(i => +i));\n\n    // Remove banner IDs for which we have probabilities and don't need selections.\n    const needsSelection = (bannerId: number) =>\n      banners[bannerId] &&\n      banners[bannerId].exchangeShopId != null &&\n      !selections[banners[bannerId].exchangeShopId!];\n    _.keys(probabilities)\n      .filter(i => !needsSelection(+i))\n      .forEach(i => missing.delete(+i));\n\n    return Array.from(missing);\n  },\n);\n","import { createAction } from 'typesafe-actions';\n\nexport type MessageColor =\n  | 'primary'\n  | 'secondary'\n  | 'success'\n  | 'danger'\n  | 'warning'\n  | 'info'\n  | 'light'\n  | 'dark';\n\nexport interface Message {\n  id?: string;\n  text: string;\n  color: MessageColor;\n}\n\nexport const showMessage = createAction('SHOW_MESSAGE', (message: Message) => ({\n  type: 'SHOW_MESSAGE',\n  payload: message,\n}));\n\n/**\n * Hides a message with the given ID.\n *\n * Message IDs are simply sequential index numbers; they change as messages\n * are shown and hidden.\n */\nexport const hideMessage = createAction('HIDE_MESSAGE', (messageIdOrIndex: number | string) => ({\n  type: 'HIDE_MESSAGE',\n  payload: messageIdOrIndex,\n}));\n\nexport const showDanger = (text: string) => showMessage({ text, color: 'danger' });\n\nexport type MessagesAction = ReturnType<typeof showMessage | typeof hideMessage>;\n","import { createAction } from 'typesafe-actions';\n\nexport interface Progress {\n  current: number;\n  max: number;\n}\n\nexport const setProgress = createAction('SET_PROGRESS', (key: string, progress?: Progress) => ({\n  type: 'SET_PROGRESS',\n  payload: {\n    key,\n    progress\n  }\n}));\n\nexport type ProgressAction = ReturnType<typeof setProgress>;\n","import * as React from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { RecordMateriaStatus } from '../../actions/recordMateria';\n\nconst styles = require('./StatusIcon.scss');\n\nexport class StatusIcon extends React.Component<{ status: RecordMateriaStatus }> {\n  render() {\n    const { status } = this.props;\n    switch (status) {\n      case RecordMateriaStatus.Unknown:\n        return <FontAwesomeIcon className={styles.unknown} icon=\"question\" fixedWidth />;\n      case RecordMateriaStatus.LockedLowLevel:\n        return <FontAwesomeIcon className={styles.lockedLowLevel} icon=\"arrow-down\" fixedWidth />;\n      case RecordMateriaStatus.LockedMissingPrereq:\n        return (\n          <FontAwesomeIcon className={styles.lockedMissingPrereq} icon=\"ellipsis-h\" fixedWidth />\n        );\n      case RecordMateriaStatus.Unlocked:\n        return <FontAwesomeIcon className={styles.unlocked} icon=\"lock-open\" fixedWidth />;\n      case RecordMateriaStatus.Collected:\n        return <FontAwesomeIcon className={styles.collected} icon=\"check\" fixedWidth />;\n      case RecordMateriaStatus.Favorite:\n        return <FontAwesomeIcon className={styles.favorite} icon=\"star\" fixedWidth />;\n      case RecordMateriaStatus.Vault:\n        return <FontAwesomeIcon className={styles.vault} icon=\"archive\" fixedWidth />;\n    }\n  }\n}\n","import * as React from 'react';\n\nexport const BadRelicDrawMessage = () => (\n  <>\n    <p>Relic draw details are not available, or this banner selection has expired.</p>\n    <p>Please restart FFRK then go under Relic Draws.</p>\n  </>\n);\n","import { createSelector } from 'reselect';\n\nimport { IState } from '../reducers';\n\nconst idsToSet = (ids: number[] | undefined) => (ids ? new Set<number>(ids) : undefined);\n\nexport const getOwnedLegendMateria = createSelector<\n  IState,\n  number[] | undefined,\n  Set<number> | undefined\n>(\n  (state: IState) => state.characters.legendMateria,\n  idsToSet,\n);\n\nexport const getOwnedSoulBreaks = createSelector<\n  IState,\n  number[] | undefined,\n  Set<number> | undefined\n>(\n  (state: IState) => state.characters.soulBreaks,\n  idsToSet,\n);\n","import * as _ from 'lodash';\nimport * as XRegExp from 'xregexp';\n\nimport { logger } from '../../utils/logger';\nimport { enlir, EnlirOtherSkill, EnlirSkill, EnlirStatus, getEnlirStatusByName } from '../enlir';\nimport { describeEnlirSoulBreak, formatMrP } from './index';\nimport { splitStatusEffects } from './split';\nimport {\n  doubleAlias,\n  effectAlias,\n  enlirRankBoost,\n  enlirRankBoostRe,\n  formatSmartEther,\n  rankBoostAlias,\n  resolveEffectAlias,\n  resolveNumbered,\n  resolveStatusAlias,\n  splitNumbered,\n} from './statusAlias';\nimport {\n  formatSchoolOrAbilityList,\n  getAbbreviation,\n  getShortName,\n  XRegExpNamedGroups,\n} from './types';\nimport {\n  andJoin,\n  andList,\n  cleanUpSlashedNumbers,\n  describeChances,\n  enDashJoin,\n  lowerCaseFirst,\n  orList,\n  parseNumberString,\n  percentToMultiplier,\n  slashMerge,\n  toMrPFixed,\n  toMrPKilo,\n} from './util';\n\nconst finisherText = 'Finisher: ';\nexport const hitWeaknessTriggerText = 'hit weak';\nexport const formatTriggeredEffect = (trigger: string, description: string, percent?: string) =>\n  '(' + trigger + ' ⤇ ' + (percent ? `${percent}% for ` : '') + description + ')';\n\n/**\n * Status effects which should be omitted from the regular status list\n */\nexport function includeStatus(status: string, { removes } = { removes: false }): boolean {\n  return (\n    // En-Element is listed separately by our functions, following MrP's\n    // example.\n    !status.startsWith('Attach ') &&\n    // Smart Ether and \"reset\" aren't real statuses.\n    !status.match(/\\b[Ss]mart\\b.*\\bether\\b/) &&\n    status !== 'reset' &&\n    // Esuna and Dispel are handled separately - although the current, more\n    // powerful status code could perhaps consolidate them.\n    status !== 'positive effects' &&\n    status !== 'negative effects' &&\n    status !== 'positive status effects' &&\n    status !== 'negative status effects' &&\n    // \"SB points\" are not a real status, so we handle them separately.\n    !status.match(/^\\d+ (?:SB|Soul Break) points/) &&\n    // This is an informational note rather than a real status.\n    status !== 'damages undeads' &&\n    // Revival is handled separately, in part so we can special-case the HP%.\n    // Again, the current status code could perhaps consolidate.\n    !(status.startsWith('KO ') && removes)\n  );\n}\n\nexport function describeStats(stats: string[]): string {\n  const result = stats.join('/');\n  if (result === 'ATK/DEF/MAG/RES/MND') {\n    return 'A/D/M/R/MND';\n  } else if (result === 'ATK/DEF/MAG/RES') {\n    return 'A/D/M/R';\n  } else {\n    return result;\n  }\n}\n\nfunction parseWho(who: string): string | undefined {\n  return who.match('user')\n    ? undefined // No need to spell out \"self\" for, e.g., \"hi fastcast 1\"\n    : who.match('front')\n    ? 'front row'\n    : who.match('back')\n    ? 'back row'\n    : who.match(\"character's\")\n    ? 'same row'\n    : 'party';\n}\n\n/**\n * Hide durations for some statuses, like Astra, because that's typically\n * removed due to enemy action.  Hide Stun because it's effectively instant.\n */\nconst hideDuration = new Set(['Astra', 'Stun']);\n\nconst isExStatus = (status: string) => status.startsWith('EX: ');\nconst isAwokenStatus = (status: string) => status.startsWith('Awoken ');\n\ninterface FollowUpEffect {\n  /**\n   * Follow-up statuses granted.\n   */\n  statuses: StatusItem[] | undefined;\n\n  /**\n   * Follow-up skills that are cast.  Array support is currently only used for\n   * Ace's Firaga BOM follow-up.\n   */\n  skills: string[] | undefined;\n\n  /**\n   * Follow-up individual status effects granted - stored as StatusItem so we\n   * can easily track metadata.\n   */\n  effects: StatusItem[] | undefined;\n\n  randomSkills: boolean;\n  customStatusesDescription?: string;\n\n  trigger: string | null;\n  isDamageTrigger: boolean;\n  customTriggerSuffix?: string;\n  triggerPrereqStatus?: string;\n  customSkillSuffix?: string;\n\n  /**\n   * Auto interval, in seconds.  Either this or trigger is non-null.\n   */\n  autoInterval: number | null;\n}\n\nfunction checkCustomTrigger(enlirStatus?: EnlirStatus | null): string | undefined {\n  if (enlirStatus && enlirStatus.effects.endsWith('removed after triggering')) {\n    return 'once only';\n  } else {\n    return undefined;\n  }\n}\n\nconst followUpRe = XRegExp(\n  String.raw`\n  (?<allEffects>.*)\\ #\n  (?:after\\ #\n    (?<triggerType>using|dealing\\ damage\\ with|dealing|exploiting|taking\\ (?<takeDamageTrigger>.*?)\\ damage)\\ #\n    (?<trigger>.*?)\n  |\n    every\\ (?<autoInterval>[0-9.]+)\\ seconds\n  )\n  (\\ if\\ there\\ are\\ (?<realmThresholdCount>(?:[0-9]+/)*[0-9]+\\+?)\\ (?<realmThresholdType>.*?)\\ characters\\ in\\ the\\ party)?\n  (\\ if\\ the\\ user\\ has\\ any\\ (?<triggerPrereqStatus>.*?))?\n\n  (?:,\\ removed\\ (?:if|after)|$)\n  `,\n  'x',\n);\n\nfunction parseFollowUpEffect(\n  effect: string,\n  enlirStatus?: EnlirStatus | null,\n): FollowUpEffect | null {\n  // Hack: Make sure we don't accidentally pick up \"removed\" clauses with our\n  // broad regex.\n  if (effect.startsWith('removed ')) {\n    return null;\n  }\n\n  const match = XRegExp.exec(effect, followUpRe) as any;\n  if (!match) {\n    return null;\n  }\n  const {\n    allEffects,\n    triggerType,\n    takeDamageTrigger,\n    trigger,\n    autoInterval,\n    triggerPrereqStatus,\n    realmThresholdCount,\n    realmThresholdType,\n  } = match as XRegExpNamedGroups;\n\n  let skills: string[] | undefined;\n  let effects: StatusItem[] | undefined;\n  let statuses: StatusItem[] | undefined;\n\n  let randomSkills = false;\n  let m: RegExpMatchArray | null;\n  if ((m = allEffects.match(/([Rr]andomly )?[Cc]asts (.*?)(?:(?:,| and) grants|$)/))) {\n    randomSkills = m[1] != null;\n    skills = m[2].split(' / ');\n  }\n  if ((m = allEffects.match(/[Gg]rants (.*?)(?:(?:,| and) (?:randomly )?casts|$)/))) {\n    statuses = m[1].split(andList).map(i => parseStatusItem(i, allEffects));\n  }\n  if (!skills && !statuses) {\n    effects = allEffects.split(andList).map(i => parseStatusItem(i, allEffects));\n  }\n\n  // Hack: Auto-cast skills are currently only actual skills.  Make sure we\n  // don't try to process regen, sap, etc.\n  if (autoInterval && !skills) {\n    return null;\n  }\n\n  let customSkillSuffix: string | undefined;\n  if (realmThresholdCount) {\n    customSkillSuffix = `if ${realmThresholdCount} ${realmThresholdType} chars.`;\n  }\n\n  return {\n    skills,\n    statuses,\n    effects,\n    randomSkills,\n    // Hack: Merge the damage trigger back in; we'll parse it out in\n    // describeFollowUpTrigger.\n    trigger: takeDamageTrigger ? takeDamageTrigger + ' dmg ' + trigger : trigger,\n    isDamageTrigger: triggerType === 'dealing damage with',\n    customTriggerSuffix: checkCustomTrigger(enlirStatus),\n    customSkillSuffix,\n    triggerPrereqStatus: triggerPrereqStatus || undefined,\n    autoInterval: autoInterval ? parseFloat(autoInterval) : null,\n  };\n}\n\nconst isSameTrigger = (a: FollowUpEffect, b: FollowUpEffect) =>\n  a.trigger === b.trigger && a.isDamageTrigger === b.isDamageTrigger;\n\n/**\n * Heuristically guess if this is a stacking status effect.  We identify\n * stacking statuses as those that have names ending with a number and that\n * are exclusive with other statuses with the same base name.\n */\nfunction isStackingStatus({ name, exclusiveStatus }: EnlirStatus): boolean {\n  const m = name.match(/^(.*) (\\d+)/);\n  if (!m || !exclusiveStatus || !exclusiveStatus.length) {\n    return false;\n  }\n\n  const [, baseName] = m;\n  if (\n    !_.find(exclusiveStatus, `All other \"${baseName}\" status`) &&\n    !_.find(exclusiveStatus, i => i.match(new RegExp('^' + baseName + ' \\\\d+')))\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\ntype FollowUpStatusSequence = Array<[EnlirStatus, string[]]>;\n\n/**\n * Gets the follow-up status sequence for a follow-up effect with the given\n * status name.\n *\n * A \"status sequence\" is used to handle soul breaks like Auron's Lost Arts,\n * where the soul break grants a Status Level 0, which is a follow-up status\n * granting Status Level 1, which is a follow-up status granting\n * Status Level 2, etc.\n */\nfunction getFollowUpStatusSequence(\n  statusName: string,\n  followUp: FollowUpEffect,\n): FollowUpStatusSequence | null {\n  if (!statusName.endsWith(' 0')) {\n    return null;\n  }\n\n  const result: FollowUpStatusSequence = [];\n  const baseStatusName = statusName.replace(/ 0$/, '');\n  for (let n = 1; ; n++) {\n    // Verify that the next status in the sequence exists, that it's actually\n    // a follow-up status, and that it's triggered the same as this status.\n    // (If it has a different trigger, we can't format it as part of the same\n    // sequence.)\n    const thisStatusName = baseStatusName + ' ' + n;\n    const thisStatus = getEnlirStatusByName(thisStatusName);\n    if (!thisStatus) {\n      break;\n    }\n\n    const thisEffects = splitStatusEffects(thisStatus.effects).filter(\n      i => !shouldSkipEffect(i) && !parseFollowUpEffect(i),\n    );\n\n    result.push([thisStatus, thisEffects]);\n\n    const thisStatusFollowUp = parseFollowUpEffect(thisStatus.effects);\n    if (!thisStatusFollowUp) {\n      break;\n    }\n    if (!isSameTrigger(followUp, thisStatusFollowUp)) {\n      break;\n    }\n    // To be thorough, we'd also verify that the triggered name matches,\n    // instead of assuming that they all follow the numbered sequence.\n  }\n  return result.length ? result : null;\n}\n\n/**\n * Given a follow-up status sequence, return a merged string describing the\n * effects.\n */\nfunction describeMergedSequence(sequence: FollowUpStatusSequence) {\n  const fallback = sequence.map(([, effects]) => effects.join(', ')).join(' / ');\n\n  // The component effects of the sequence.  Object keys give the numbered\n  // effect alias (see statusAlias.ts), while object values give the\n  // (string-formatted) numbers themselves.\n  const result: { [s: string]: string[] } = {};\n\n  for (const [, effects] of sequence) {\n    for (const i of effects) {\n      const [text, numbered] = splitNumbered(i);\n      if (!text || !numbered) {\n        return fallback;\n      }\n      result[text] = result[text] || [];\n      // Cast to number and back to format floating point values more simply.\n      result[text].push('' + +numbered);\n    }\n  }\n\n  return _.map(result, (values, key) =>\n    resolveNumbered(effectAlias.numbered[lowerCaseFirst(key)] || key, values.join('-')),\n  ).join(', ');\n}\n\nconst isFinisherStatus = ({ effects }: EnlirStatus) => !!getFinisherSkillName(effects);\nconst isFollowUpStatus = ({ effects }: EnlirStatus) => !!parseFollowUpEffect(effects);\n\n/**\n * \"Mode\" statuses are, typically, character-specific trances or EX-like\n * statuses provided by a single Ultra or Awakening soul break.\n */\nconst isModeStatus = ({ name, codedName, effects }: EnlirStatus) =>\n  (!!codedName.match(/_MODE/) && codedName !== 'BRAVE_MODE') ||\n  (name.endsWith(' Mode') && name !== 'Brave Mode' && name !== 'Burst Mode') ||\n  // Specialized counter-attacks\n  (codedName.startsWith('COUNTER_AIMING') && name !== 'Retaliate' && name !== 'High Retaliate') ||\n  // Rage statuses\n  effects.match(/[Ff]orces a specified action/) != null ||\n  // Special cases - treat as a mode to give it more room for its description.\n  name === 'Haurchefant Cover';\n\n/**\n * Various usual statuses for which we want to force showing individual\n * effects.\n */\nfunction forceEffects({ name, codedName }: EnlirStatus) {\n  return (\n    codedName.startsWith('ABSORB_HP_') ||\n    name.startsWith('Greased Lightning ') ||\n    name === 'Phantom Regen'\n  );\n}\n\n/**\n * Various statuses which are specialized, verbose, and always self, so we show\n * them as \"detail\" instead of \"self.\"\n */\nfunction forceDetail({ name }: EnlirStatus) {\n  return (\n    name === 'Runic' ||\n    name === 'High Runic' ||\n    name === 'Sentinel' ||\n    name === 'Unyielding Fist' ||\n    name === 'Haurchefant Cover' ||\n    name.startsWith('Ingredients ')\n  );\n}\n\nfunction isBurstToggle({ effects }: EnlirStatus) {\n  return effects.match(/affects certain burst commands/i) != null;\n}\n\nexport const allTranceStatus = new Set(\n  _.values(enlir.legendMateria)\n    // Exclude LMRs - those may grant generic statuses as trance.\n    .filter(i => i.relic == null)\n    .map(i => i.effect.match(/.*[Gg]rants (.*) when HP fall below/))\n    .filter(i => i != null && !i[1].match(/to all allies/))\n    .map(i => i![1].split(andList))\n    // Take the last status - in practice, that's the one that's the character-\n    // specific trance.\n    .map(i => i[i.length - 1])\n    // Exclude generic statuses, like Haurchefant and Jack.\n    .filter(i => resolveStatusAlias(i) == null),\n);\n\nexport function isTranceStatus({ name }: EnlirStatus) {\n  return allTranceStatus.has(name);\n}\n\n/**\n * Custom stat mods - Bushido, Dark Bargain, etc.  Omit turn-limited effects\n * here; it's easier to special case those within describeEnlirStatus than to\n * make describeEffects smart enough to handle them.\n */\nconst isCustomStatMod = ({ name, codedName, effects }: EnlirStatus) =>\n  (codedName.startsWith('CUSTOM_PARAM_') && !effects.match(/, lasts for \\d+ turn/)) ||\n  name === 'Advance';\n\nfunction formatTurns(turns: string | number | null): string {\n  if (!turns) {\n    return '';\n  } else if (+turns === 1) {\n    return ' 1 turn';\n  } else {\n    return ' ' + turns + ' turns';\n  }\n}\n\nfunction statusAsStatMod(statusName: string, enlirStatus?: EnlirStatus) {\n  const statModRe = /((?:[A-Z]{3}(?:,? and |, ))*[A-Z]{3}) ([-+][0-9X]+%)/;\n  let m: RegExpMatchArray | null;\n\n  if ((m = statusName.match(statModRe))) {\n    const [, stat, amount] = m;\n    return { stat: stat.split(andList), amount };\n  }\n\n  if (enlirStatus && enlirStatus.codedName.startsWith('CUSTOM_')) {\n    if ((m = enlirStatus.effects.match(statModRe))) {\n      const stat = m[1];\n      let amount = m[2];\n\n      // Hack: Substitute placeholders back from our status name.\n      if (amount === '+X%') {\n        if ((m = statusName.match(/([-+]\\d+%)/))) {\n          amount = m[1];\n        }\n      }\n\n      return { stat: stat.split(andList), amount };\n    }\n  }\n\n  return null;\n}\n\nexport function getRageSkills(source: EnlirSkill): EnlirOtherSkill[] {\n  return enlir.otherSkills.filter(\n    i => i.sourceType === 'Rage Status' && i.source.startsWith(source.name + ' ('),\n  );\n}\n\n/**\n * Describes a \"well-known\" or common Enlir status name.\n *\n * One-off statuses instead need to be looked up and their effects processed\n * via describeEnlirStatusEffect.\n */\nexport function describeEnlirStatus(\n  status: string,\n  enlirStatus?: EnlirStatus,\n  source?: EnlirSkill,\n) {\n  let m: RegExpMatchArray | null;\n\n  // Generic statuses\n  {\n    const genericStatus = resolveStatusAlias(status);\n    if (genericStatus) {\n      return genericStatus;\n    }\n  }\n\n  // Special cases - schools, and schools + numbers\n  if ((m = status.match(/(.+?) (?:Extended )?\\+(\\d+)% Boost\\b(?: (\\d+))?/))) {\n    const [, type, percent, turns] = m;\n    const multiplier = percentToMultiplier(percent);\n    if (type === 'Weakness') {\n      return `${multiplier}x dmg vs weak` + formatTurns(turns);\n    } else {\n      return `${multiplier}x ${formatSchoolOrAbilityList(type)} dmg` + formatTurns(turns);\n    }\n  }\n  if ((m = status.match(/(.*) Gauge \\+(\\d+)% Booster(?: (\\d+))?/))) {\n    const [, type, percent, turns] = m;\n    const multiplier = percentToMultiplier(percent);\n    return `${multiplier}x SB gauge from ${formatSchoolOrAbilityList(type)}` + formatTurns(turns);\n  }\n  if ((m = status.match(/(.*) Double/))) {\n    return doubleAlias(formatSchoolOrAbilityList(m[1]));\n  }\n\n  // Status effects: e.g., \"MAG +30%\" from EX: Attack Hand.  Reorganize stats\n  // into, e.g., +30% MAG to match MMP\n  const statMod = statusAsStatMod(status, enlirStatus);\n  if (statMod) {\n    let result = statMod.amount + ' ' + describeStats(statMod.stat);\n    if (status.match(/for Next Damaging Action/)) {\n      result += ' for next atk';\n    }\n    return result;\n  }\n\n  // Turn-limited versions of generic statuses.  Some turn-limited versions,\n  // like 'hi fastcast 2', are common enough that they're separately listed\n  // under enlirStatusAliasWithNumbers and omit the 'turn' text.\n  if ((m = status.match(/(.*) (\\d)$/))) {\n    const [, baseStatus, turns] = m;\n    const genericStatus = resolveStatusAlias(baseStatus);\n    if (genericStatus) {\n      return genericStatus + formatTurns(turns);\n    }\n  }\n\n  // Fallback\n  return status;\n}\n\nconst getFinisherSkillName = (effect: string) => {\n  const m = effect.match(/[Cc]asts (.*?) when removed/);\n  return m ? m[1] : null;\n};\n\nfunction describeFinisher(skillName: string) {\n  const skill = enlir.otherSkillsByName[skillName];\n  if (!skill) {\n    logger.warn(`Unknown finisher skill ${skill}`);\n    return skillName;\n  }\n\n  const mrP = describeEnlirSoulBreak(skill, { showNoMiss: false, includeSbPoints: false });\n\n  return finisherText + formatMrP(mrP, { showTime: false });\n}\n\n/**\n * Status effects that are too verbose to fit in a MrP style format or should\n * otherwise be skipped.\n * @param effect\n */\nfunction shouldSkipEffect(effect: string) {\n  return (\n    // \"removed after using\" is just for Ace's Top Card.\n    // \"removed if the user hasn't\" describes USB effects that are paired\n    // with other USB effects (when one is removed, the other is too) and for\n    // leaving Burst Mode.\n    effect.startsWith('removed after using ') ||\n    effect.startsWith(\"removed if the user hasn't\") ||\n    effect === 'reset upon refreshing Burst Mode' ||\n    // Custom triggers\n    effect.startsWith('removed after triggering') ||\n    // Burst toggles - we communicate this via a separate flag\n    effect.match(/[Aa]ffects certain Burst Commands/) ||\n    // Status details\n    effect === 'affects targeting' ||\n    effect === 'resets ATB when removed'\n  );\n}\n\n/**\n * Describes a single \"status effect\" - one fragment of an EnlirStatus effects string\n */\nfunction describeEnlirStatusEffect(\n  effect: string,\n  enlirStatus?: EnlirStatus | null,\n  source?: EnlirSkill,\n): string {\n  let m: RegExpMatchArray | null;\n\n  if (\n    effect.startsWith('removed if ') ||\n    effect.startsWith('removed upon ') ||\n    effect.match(/^lasts \\d+ turns?/)\n  ) {\n    return '';\n  }\n\n  if (enlirStatus) {\n    const followUp = parseFollowUpEffect(effect, enlirStatus);\n    if (followUp) {\n      const sequence = getFollowUpStatusSequence(enlirStatus.name, followUp);\n      if (sequence) {\n        followUp.statuses = sequence.map(([status, effects]) => ({ statusName: status.name }));\n        followUp.customStatusesDescription = describeMergedSequence(sequence);\n      }\n      return describeFollowUp(followUp);\n    }\n\n    const finisherSkillName = getFinisherSkillName(effect);\n    if (finisherSkillName) {\n      return describeFinisher(finisherSkillName);\n    }\n  }\n\n  // Generic status effects\n  {\n    // If dealing with an effect from a stacking status, like Tifa's\n    // Striker Mode's 2x / 4x / 6x cast, then prefer generic numbered effects,\n    // on the assumption that higher-level code will want to slash-merge it.\n    const preferNumbered = enlirStatus != null && isStackingStatus(enlirStatus);\n\n    const genericEffect = resolveEffectAlias(effect, { preferNumbered });\n    if (genericEffect) {\n      return genericEffect;\n    }\n  }\n\n  // Special cases\n  if ((m = effect.match(/((?:[A-Z]{3}(?:,? and |, ))*[A-Z]{3}) ([-+]\\d+%)/))) {\n    // Status effects: e.g., \"MAG +30%\" from EX: Attack Hand\n    // Reorganize stats into, e.g., +30% MAG to match MrP\n    const [, stat, amount] = m;\n    return amount + ' ' + stat.split(andList).join('/');\n  }\n\n  // Awoken\n  if ((m = effect.match(/(.*) (?:abilities|attacks) don't consume uses/))) {\n    let result = formatSchoolOrAbilityList(m[1]) + ' inf. hones';\n    if (effect.endsWith(enlirRankBoost)) {\n      result += ', up to 1.3x dmg @ rank 5';\n    }\n    return result;\n  }\n\n  if (\n    (m = effect.match(/[Dd]ualcasts (.*) (?:abilities|attacks)( consuming an extra ability use)?/))\n  ) {\n    const schoolOrAbility = formatSchoolOrAbilityList(m[1]);\n    const extraHones = m[2];\n    if (enlirStatus && isAwokenStatus(enlirStatus.name)) {\n      // Ability or element should be redundant for AASBs\n      return '100% dualcast';\n    } else if (extraHones) {\n      return doubleAlias(schoolOrAbility);\n    } else {\n      return `100% dualcast ${schoolOrAbility}`;\n    }\n  }\n\n  if ((m = effect.match(enlirRankBoostRe))) {\n    return rankBoostAlias(m[1]);\n  }\n\n  // Stacking ability boost and element boost.\n  if (\n    (m = effect.match(\n      /(.*) (?:abilities|attacks) deal ([0-9/]+)% more damage for each (.*) ability used, up to \\+(\\d+)%/,\n    ))\n  ) {\n    // MrP formats these as like this:\n    // \"1.05-1.3x Knight dmg ...maxed @6 Knight used this battle\"\n    // We instead use the same stacking format we use for OK's p-USB.\n    const [, schoolOrAbility, percent, stackingSchoolOrAbility, stackingMax] = m;\n    const boostedType = formatSchoolOrAbilityList(schoolOrAbility);\n    const sourceType = formatSchoolOrAbilityList(stackingSchoolOrAbility);\n    const maxCount = +stackingMax / +percent;\n    return (\n      `${percentToMultiplier(percent)}x ${boostedType} dmg per ${sourceType}, ` +\n      `max ${percentToMultiplier(stackingMax)}x @ ${maxCount} ${sourceType}`\n    );\n  }\n\n  // Handle ability boost and element boost.  The second form is only observed\n  // with Noctis's non-elemental boosts; it may simply be an inconsistency.\n  if (\n    (m = effect.match(/(.*) (?:abilities|attacks) deal ([0-9/]+)% more damage/)) ||\n    (m = effect.match(/[Ii]ncreases (.*) damage dealt by ([0-9/]+)%/))\n  ) {\n    const [, schoolOrAbility, percent] = m;\n    const boost = percent\n      .split('/')\n      .map(parseFloat)\n      .map(i => 1 + i / 100)\n      .map(toMrPFixed)\n      .join('-');\n    return boost + 'x ' + formatSchoolOrAbilityList(schoolOrAbility) + ' dmg';\n  }\n\n  if ((m = effect.match(/[Ss]ets the damage cap for (.*) attacks to 99999/))) {\n    return 'break ' + m[1] + ' dmg cap';\n  }\n\n  if ((m = effect.match(/[Rr]estores (\\d+) HP/))) {\n    const [, healHp] = m;\n    return `heal ${toMrPKilo(+healHp)} HP`;\n  }\n\n  if (\n    (m = effect.match(\n      /[Cc]ast speed x([0-9.]+) plus x([0-9.]+) for each attack used for the duration of the status, up to x([0-9.]+)/,\n    ))\n  ) {\n    const [, start, add, max] = m;\n    const startN = toMrPFixed(+start);\n    const addN = toMrPFixed(+add);\n    const maxN = toMrPFixed(+max);\n    const maxCount = Math.round((+max - +start) / +add);\n    return `cast speed ${startN}x, +${addN}x per atk, max ${maxN}x @ ${maxCount} atks`;\n  }\n\n  // Cast speed for ability combinations - cast speed for individual ability\n  // schools is handled as a simple effect alias.\n  if ((m = effect.match(/([Cc]ast speed x[0-9.]+) for (.*?) (?:attacks|abilities)/))) {\n    const [, baseEffect, kind] = m;\n    const baseAlias = resolveEffectAlias(baseEffect);\n    if (baseAlias) {\n      return (\n        kind\n          .split(orList)\n          .map(getShortName)\n          .join('/') +\n        ' ' +\n        baseAlias\n      );\n    }\n  }\n\n  if (\n    (m = effect.match(\n      /[Rr]estores HP for (\\d+)% of the damage dealt with (.*?) (?:attacks|abilities)/,\n    ))\n  ) {\n    const [, percent, kind] = m;\n    return (\n      `heal ${percent}% of ` +\n      kind\n        .split(orList)\n        .map(getShortName)\n        .join('/') +\n      ' dmg'\n    );\n  }\n\n  if ((m = effect.match(/(\\w+ )?[Ss]mart (\\w+ )?ether (\\S+) when removed/))) {\n    const [, type1, type2, amount] = m;\n    return finisherText + formatSmartEther(amount, type1 || type2);\n  }\n\n  if ((m = effect.match(/[Hh]eals for (\\d+)% max HP every ([0-9.]+) seconds/))) {\n    const [, percent, howOften] = m;\n    return `regen ${percent}% HP per ${howOften}s`;\n  }\n\n  // Counter-attacks.\n  if (\n    (m = effect.match(/(?:(\\d+)% chance of countering|[Cc]ounters) enemy (.*) attacks with (.*)/))\n  ) {\n    const [, percentChance, trigger, skill] = m;\n    let triggerDescription = \"foe's \" + trigger.split(andList).join('/') + ' atk';\n    if (percentChance) {\n      triggerDescription += ` (${percentChance}%)`;\n    }\n    return formatTriggeredEffect(triggerDescription, describeFollowUpSkill(skill));\n  }\n\n  // Rage status.  This involves looking up the Other Skills associated with\n  // the Rage status's source and filling in their effects.\n  if (effect.match(/[Ff]orces a specified action/) && source) {\n    const rageSkills = getRageSkills(source);\n    const format = (skill: EnlirSkill) =>\n      formatMrP(\n        describeEnlirSoulBreak(skill, {\n          abbreviate: true,\n          showNoMiss: false,\n        }),\n      );\n    if (rageSkills.length === 0) {\n      // Does not appear to actually be used.\n      return 'auto repeat';\n    } else if (rageSkills.length === 1) {\n      return 'auto ' + format(rageSkills[0]);\n    } else {\n      // Fall back to 0% chance just to avoid special cases...\n      const chances = rageSkills.map(i => i.source.match(/\\((\\d+)%\\)$/)).map(i => (i ? +i[1] : 0));\n      const result = describeChances(rageSkills.map(format), chances, enDashJoin);\n      return 'auto ' + _.filter(result).join(' ');\n    }\n  }\n\n  if (shouldSkipEffect(effect)) {\n    return '';\n  }\n\n  // Fallback\n  return effect;\n}\n\nexport interface ParsedEnlirStatus {\n  description: string;\n  isDetail: boolean;\n  isExLike: boolean;\n  isBurstToggle: boolean;\n  isTrance: boolean;\n  defaultDuration: number | null;\n  isVariableDuration: boolean;\n  specialDuration?: string;\n}\n\n/**\n * Describes a status's individual effects.  This is not an exact science,\n * but the general idea is that \"common\" statuses can be listed more or less\n * as is (possibly using our shorter or more explanatory aliases), while rare\n * or character-specific statuses should be broken down and their individual\n * effects listed separately.\n */\nfunction describeEffects(enlirStatus: EnlirStatus, source?: EnlirSkill): string {\n  // Allow overrides from status aliases, even here.  (This is used for\n  // Haurchefant Cover in particular: because that's really verbose and\n  // specialized, we want to be able to say it should always show details, but\n  // we also want to be able to use aliases to how those details should\n  // actually be shown.)\n  {\n    const genericStatus = resolveStatusAlias(enlirStatus.name);\n    if (genericStatus) {\n      return genericStatus;\n    }\n  }\n\n  return splitStatusEffects(enlirStatus.effects)\n    .map(i => describeEnlirStatusEffect(i, enlirStatus, source))\n    .filter(i => i !== '')\n    .join(', ');\n}\n\n/**\n * Check for a leading count on a string.  Handle both number strings, like\n * \"Twenty-two,\" and threshold-type values, like \"1/2/3\".\n */\nfunction extractCount(s: string): [number | string | null, string] {\n  const m = s.match(/^(\\S+) (.*)/);\n  if (!m) {\n    return [null, s];\n  }\n\n  let count: number | string | null = null;\n  if (m[1].match(/^[0-9/]+$/)) {\n    count = cleanUpSlashedNumbers(m[1]);\n  } else {\n    count = parseNumberString(m[1]);\n  }\n\n  if (count != null) {\n    return [count, m[2]];\n  } else {\n    return [null, s];\n  }\n}\n\nconst slashOptionsRe = /(?:\\w+\\/)+\\w+/;\nfunction getSlashOptions(s: string): string[] | null {\n  const m = s.match(slashOptionsRe);\n  return m ? m[0].split('/') : null;\n}\nfunction expandSlashOptions(s: string): string[] {\n  const options = getSlashOptions(s) || [];\n  return options.map(i => s.replace(slashOptionsRe, i));\n}\n\nconst describeAutoInterval = (autoInterval: number) => `every ${toMrPFixed(autoInterval)}s`;\n\n/**\n * Describes the trigger portion of a follow-up.\n *\n * @param trigger - Enlir's text description of the trigger\n * @param isDamageTrigger - Does it have to deal damage to trigger?\n */\nfunction describeFollowUpTrigger(trigger: string, isDamageTrigger: boolean): string {\n  if (trigger === 'an ability') {\n    return 'any ability';\n  }\n  if (trigger === 'a critical hit') {\n    return 'crit';\n  }\n  if (trigger === 'elemental weakness') {\n    return hitWeaknessTriggerText;\n  }\n\n  // Special case: Steiner\n  const m = trigger.match(/(.*) dmg from a (.*) attack used by another ally/);\n  if (m) {\n    let [, damageType, attackType] = m;\n    damageType = m[1]\n      .split('/')\n      .map(getShortName)\n      .join('/');\n    attackType = attackType.split(orList).join('/');\n    if (attackType === 'BLK/WHT/BLU/SUM') {\n      attackType = 'mag';\n    }\n    return `take ${damageType} ${attackType} dmg from ally`;\n  }\n\n  trigger = trigger.replace(/ (abilities|ability|attacks|attack)$/, '').replace(/^an? /, '');\n\n  let count: number | string | null;\n  [count, trigger] = extractCount(trigger);\n\n  // Turn element alternatives into abbreviations.\n  trigger = trigger.replace(slashOptionsRe, i =>\n    i\n      .split('/')\n      .map(getAbbreviation)\n      .join('/'),\n  );\n\n  trigger = trigger\n    .split(orList)\n    .map(getShortName)\n    .join('/');\n\n  return (count ? count + ' ' : '') + trigger + (isDamageTrigger ? ' dmg' : '');\n}\n\nfunction describeFollowUpItem(\n  { who, duration, durationUnits }: StatusItem,\n  description: string,\n): string {\n  if (who) {\n    who = parseWho(who);\n  }\n  if (who) {\n    description = who + ' ' + description;\n  }\n\n  if (duration && durationUnits) {\n    description += ' ' + formatDuration(duration, durationUnits);\n  }\n\n  return description;\n}\n\nfunction describeFollowUpStatus(item: StatusItem): string {\n  const { statusName } = item;\n  const status = getEnlirStatusByName(statusName);\n  const options = getSlashOptions(statusName);\n\n  let result: string;\n  if (!status && options) {\n    const statusOptions = options.map(i => statusName.replace(slashOptionsRe, i));\n    result = slashMerge(statusOptions.map((i: string) => describeEnlirStatus(i, status)));\n  } else {\n    result = describeEnlirStatus(statusName, status);\n  }\n\n  return describeFollowUpItem(item, result);\n}\n\nfunction describeFollowUpEffect(item: StatusItem): string {\n  return describeFollowUpItem(item, describeEnlirStatusEffect(item.statusName));\n}\n\n/**\n * For a follow-up that triggers a skill, describes the skill.\n */\nfunction describeFollowUpSkill(skillName: string, triggerPrereqStatus?: string): string {\n  const skill = enlir.otherSkillsByName[skillName];\n  if (skill) {\n    return formatMrP(\n      describeEnlirSoulBreak(skill, {\n        abbreviate: true,\n        showNoMiss: false,\n        includeSbPoints: false,\n        prereqStatus: triggerPrereqStatus,\n      }),\n      {\n        showTime: false,\n      },\n    );\n  }\n\n  const options = getSlashOptions(skillName);\n  if (options) {\n    const skillOptions = options.map(i => skillName.replace(slashOptionsRe, i));\n    return slashMerge(\n      skillOptions.map((i: string) => describeFollowUpSkill(i, triggerPrereqStatus)),\n    );\n  }\n\n  return skillName;\n}\n\n/**\n * When describing follow-up statuses and status effects, remove 'who' clauses\n * that are the same from one item to the next, to avoid being redundant.\n *\n * When processing skills, we instead handle use separate arrays for self,\n * party, and other; we could take a similar approach here.\n */\nfunction removeRedundantWho(item: StatusItem[]): StatusItem[] {\n  let lastWho: string | undefined;\n  return item.map(i => {\n    if (i.who === lastWho) {\n      return {\n        ...i,\n        who: undefined,\n      };\n    } else {\n      lastWho = i.who;\n      return i;\n    }\n  });\n}\n\n/**\n * For follow-up statuses, returns a string describing the follow-up (how it's\n * triggered and what it does).\n */\nfunction describeFollowUp(followUp: FollowUpEffect): string {\n  let triggerDescription = followUp.autoInterval\n    ? describeAutoInterval(followUp.autoInterval)\n    : describeFollowUpTrigger(followUp.trigger!, followUp.isDamageTrigger);\n  if (followUp.customTriggerSuffix) {\n    triggerDescription += ' (' + followUp.customTriggerSuffix + ')';\n  }\n\n  const description: string[] = [];\n\n  if (followUp.customStatusesDescription) {\n    description.push(followUp.customStatusesDescription);\n  } else if (followUp.statuses) {\n    description.push(\n      removeRedundantWho(followUp.statuses)\n        .map(describeFollowUpStatus)\n        .join(', '),\n    );\n  }\n\n  if (followUp.effects) {\n    description.push(\n      removeRedundantWho(followUp.effects)\n        .map(describeFollowUpEffect)\n        .join(', '),\n    );\n  }\n\n  if (followUp.skills) {\n    let suffix: string = '';\n    suffix += followUp.customSkillSuffix ? ' ' + followUp.customSkillSuffix : '';\n    suffix += followUp.randomSkills ? ' (random)' : '';\n    description.push(\n      slashMerge(\n        followUp.skills.map((i: string) => describeFollowUpSkill(i, followUp.triggerPrereqStatus)),\n      ) + suffix,\n    );\n  }\n\n  return formatTriggeredEffect(triggerDescription, description.join(', '));\n}\n\nfunction getSpecialDuration({ effects }: EnlirStatus): string | undefined {\n  let m: RegExpMatchArray | null;\n  if (effects.match(/, removed if the user doesn't have any Stoneskin/)) {\n    return 'until Neg. Dmg. lost';\n  } else if (effects.match(/, removed upon taking damage/)) {\n    return 'until damaged';\n  } else if ((m = effects.match(/, lasts (\\d+) turns?(?:$|,)/))) {\n    return formatDuration(+m[1], 'turn');\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Parses a string description of an Enlir status name, returning details about\n * it and how it should be shown.\n */\nexport function parseEnlirStatus(status: string, source?: EnlirSkill): ParsedEnlirStatus {\n  const enlirStatus = getEnlirStatusByName(status);\n  if (!enlirStatus) {\n    logger.warn(`Unknown status: ${status}`);\n  }\n  let description = describeEnlirStatus(status, enlirStatus, source);\n\n  const isEx = isExStatus(status);\n  const isAwoken = isAwokenStatus(status);\n  const isExLike =\n    isEx ||\n    isAwoken ||\n    (enlirStatus != null &&\n      (isFinisherStatus(enlirStatus) ||\n        isFollowUpStatus(enlirStatus) ||\n        isModeStatus(enlirStatus)));\n\n  const burstToggle = enlirStatus != null && isBurstToggle(enlirStatus);\n\n  if (\n    enlirStatus &&\n    (isExLike || isCustomStatMod(enlirStatus) || forceEffects(enlirStatus) || burstToggle)\n  ) {\n    description = describeEffects(enlirStatus, source);\n    if (isEx) {\n      description = 'EX: ' + description;\n    }\n    if (isAwoken) {\n      description = status + ': ' + description;\n    }\n  }\n\n  return {\n    description,\n    isExLike,\n    isDetail: isExLike || (enlirStatus != null && forceDetail(enlirStatus)),\n    isBurstToggle: burstToggle,\n    isTrance: enlirStatus != null && isTranceStatus(enlirStatus),\n    defaultDuration: enlirStatus && !hideDuration.has(status) ? enlirStatus.defaultDuration : null,\n    isVariableDuration: !!enlirStatus && !!enlirStatus.mndModifier,\n    specialDuration: enlirStatus ? getSpecialDuration(enlirStatus) : undefined,\n  };\n}\n\ninterface ParsedEnlirStatusWithSlashes extends ParsedEnlirStatus {\n  optionCount?: number;\n}\n\nexport function parseEnlirStatusWithSlashes(\n  status: string,\n  source?: EnlirSkill,\n): ParsedEnlirStatusWithSlashes {\n  function makeResult(options: ParsedEnlirStatus[], join?: string) {\n    return {\n      // Assume that most parameters are the same across options.\n      ...options[0],\n\n      description: slashMerge(options.map(i => i.description), { join }),\n\n      optionCount: options.length,\n    };\n  }\n\n  let m: RegExpMatchArray | null;\n  const enlirStatus = getEnlirStatusByName(status);\n  if (\n    !enlirStatus &&\n    (m = status.match(/^((?:[A-Z]{3}\\/)*[A-Z]{3}) or ((?:[A-Z]{3}\\/)*[A-Z]{3}) (\\+\\d+%)$/))\n  ) {\n    // Handle hybrid (\"or\") stat buffs.\n    const [, stat1, stat2, amount] = m;\n    const makeStat = (stat: string) => andJoin(stat.split('/'), false) + ' ' + amount;\n    const options = [parseEnlirStatus(makeStat(stat1)), parseEnlirStatus(makeStat(stat2))];\n    return makeResult(options, ' or ');\n  } else if (!enlirStatus && status.match(' or ')) {\n    // Handle hybrid (\"or\") statuses.\n    const options = status.split(orList).map(i => parseEnlirStatus(i, source));\n    return makeResult(options, ' or ');\n  } else if (!enlirStatus && status.match('/')) {\n    // Handle slash-separated options.\n    const options = expandSlashOptions(status).map(i => parseEnlirStatus(i, source));\n    return makeResult(options);\n  } else {\n    return parseEnlirStatus(status, source);\n  }\n}\n\n/**\n * A single status item within a list of skill effects - includes the status\n * name itself and possible additional parameters\n */\nexport interface StatusItem {\n  statusName: string;\n  chance?: number;\n  who?: string;\n  duration?: number;\n  durationUnits?: string; // \"second\" or \"turn\"\n  scalesWithUses?: boolean;\n  rank?: boolean; // Are this item's effects rank-based?\n  stacking?: boolean;\n  condition?: string;\n}\n\nconst statusItemRe = XRegExp(\n  String.raw`\n  (?<statusName>.*?)\n  (?:\\ \\((?<chance>\\d+)%\\))?\n  (?<rank>\\ at\\ rank\\ 1/2/3/4/5\\ of\\ the\\ triggering\\ ability)?\n  (?:\\ for\\ (?<duration1>\\d+\\??|\\?)\\ (?<durationUnits1>second|turn)s?)?\n  (?<scalesWithUses1>\\ scaling\\ with\\ (?<scaleWithUsesSkill1>[A-Za-z ]+\\ )?uses)?\n  (?<who>\n    \\ to\\ the\\ user|\n    \\ to\\ all\\ allies(?:\\ in\\ the\\ (?:front|back|character's)\\ row)?|\n    \\ to\\ the\\ lowest\\ HP%\\ ally|\n    \\ to\\ a\\ random\\ ally\\ without\\ status|\n    \\ to\\ a\\ random\\ ally\\ with\\ negative\\ (?:status\\ )?effects\n  )?\n  (?:\\ for\\ (?<duration2>\\d+\\??|\\?)\\ (?<durationUnits2>second|turn)s?)?\n  (?<scalesWithUses2>\\ scaling\\ with\\ (?<scaleWithUsesSkill2>[A-Za-z ]+\\ )?uses)?\n  (?:\\ if\\ the\\ user\\ has\\ (?<prereq>.*))?\n  (?:\\ if\\ (?<characterInParty>.*?)\\ (?:is|are)\\ in\\ the\\ party)?\n  (?<weakness>\\ if\\ exploiting\\ elemental\\ weakness)?\n  ()\n  $\n  `,\n  'x',\n);\n\n/**\n * Parses a status text to separate the status name itself from associated\n * parameters.\n *\n * @param statusText The text term (e.g., \"Haste\" or\n *     \"RES and MND +30% to the user for 25 seconds\")\n * @param wholeClause  The skill's statuses clause as a whole (e.g., \"grants\n *      Magical Blink 1, RES and MND +30% to the user for 25 seconds\"\n */\nexport function parseStatusItem(statusText: string, wholeClause: string): StatusItem {\n  // Determine target and duration.  This is hard, and I may not have it\n  // right.  For example:\n  // - \"grants Haste and Burst mode to the user\" - Haste is \"to the user\"\n  // - \"causes Imperil Fire 10% and DEF -50% for 15 seconds\" - imperil is\n  //   standard 25 seconds (I think)\n  // - \"grants Magical Blink 1, RES and MND +30% to the user for 25\n  //   seconds\" - m.blink is to the party, stat boosts are to the user\n\n  const m = XRegExp.exec(statusText, statusItemRe);\n  if (!m) {\n    return { statusName: statusText };\n  }\n\n  // tslint:disable prefer-const\n  let {\n    statusName,\n    chance,\n    who,\n    duration1,\n    duration2,\n    durationUnits1,\n    durationUnits2,\n    rank,\n    scalesWithUses1,\n    scalesWithUses2,\n    scaleWithUsesSkill1,\n    scaleWithUsesSkill2,\n    prereq,\n    weakness,\n    characterInParty,\n  } = (m as unknown) as XRegExpNamedGroups;\n  // tslint:enable prefer-const\n\n  let lookaheadWho: string | undefined;\n  if (!who) {\n    const lookahead = wholeClause.match(\n      /( to the user| to all allies(?:\\ in\\ the\\ (?:front|back|character's)\\ row)?)(?! for \\d+ (second|turn)s?)/,\n    );\n    if (lookahead) {\n      lookaheadWho = lookahead[1];\n    }\n  }\n\n  const duration = duration1 || duration2;\n  const durationUnits = durationUnits1 || durationUnits2;\n\n  // Check if this scales with uses.  Hack: If it scales with the uses of\n  // another skill, then assume that higher-level code will communicate that\n  // (e.g., \"powers up cmd 2\".)\n  const scalesWithUses =\n    (scalesWithUses1 != null || scalesWithUses2 != null) &&\n    scaleWithUsesSkill1 == null &&\n    scaleWithUsesSkill2 == null;\n\n  // Handle stacking statuses, like\n  // \"Warlord Mode 1/2/3/3 if the user has Warlord Mode 0/1/2/3\"\n  let stacking = false;\n  if (\n    statusName &&\n    prereq &&\n    statusName.replace(/[0-9\\/]+/, 'X') === prereq.replace(/[0-9\\/]+/, 'X')\n  ) {\n    stacking = true;\n    // Enlir lists, e.g., 'Warlord Mode 1/2/3/3' to show that it doesn't stack\n    // further.  Remove the redundancy.\n    statusName = statusName.replace(/(\\d)\\/\\1/, '$1');\n  } else if (prereq) {\n    logger.warn(`Unhandled prerequisite ${prereq} for ${statusName}`);\n  }\n\n  let condition: string | undefined;\n  if (weakness) {\n    condition = 'if hits weak';\n  } else if (characterInParty) {\n    condition = 'if ' + characterInParty + ' in party';\n  }\n\n  return {\n    statusName: statusName!,\n    chance: chance ? +chance : undefined,\n    who: who || lookaheadWho,\n    duration: duration ? +duration : undefined,\n    durationUnits: durationUnits || undefined,\n    scalesWithUses,\n    rank: rank != null,\n    stacking,\n    condition,\n  };\n}\n\nexport function formatDuration(duration: number, durationUnits: string) {\n  if (durationUnits === 'second') {\n    return duration + 's';\n  } else if (duration === 1) {\n    return '1 turn';\n  } else {\n    return duration + ' turns';\n  }\n}\n\n/**\n * Status effect sort orders - we usually follow Enlir's order, but listing\n * effects here can cause them to be sorted before (more negative) or after\n * (more positive) other effects.\n */\nconst statusSortOrder: { [status: string]: number } = {\n  Haste: -1,\n  'Last Stand': 1,\n};\n\nconst getSortOrder = (status: string) => {\n  if (isExStatus(status) || isAwokenStatus(status)) {\n    return 999;\n  } else {\n    return statusSortOrder[status] || 0;\n  }\n};\n\nexport function sortStatus(a: StatusItem, b: StatusItem): number {\n  return getSortOrder(a.statusName) - getSortOrder(b.statusName);\n}\n\n/**\n * Reducer function for handling statuses like \"Beast and Father.\"  If a status\n * like that is split into two items, this function handles recognizing it as\n * one status and re-merging it.\n */\nexport function checkForAndStatuses(accumulator: StatusItem[], currentValue: StatusItem) {\n  if (accumulator.length) {\n    const thisAndThat =\n      accumulator[accumulator.length - 1].statusName + ' and ' + currentValue.statusName;\n    if (enlir.statusByName[thisAndThat]) {\n      accumulator[accumulator.length - 1].statusName = thisAndThat;\n      return accumulator;\n    }\n  }\n\n  accumulator.push(currentValue);\n  return accumulator;\n}\n","import { allEnlirElements, allEnlirSchools } from '../enlir';\nimport { getElementShortName, getSchoolShortName } from './types';\nimport {\n  lowerCaseFirst,\n  numberWithCommas,\n  percentToMultiplier,\n  toMrPGeneral,\n  toMrPKilo,\n} from './util';\n\nexport const enlirRankBoost = 'deal 5/10/15/20/30% more damage at ability rank 1/2/3/4/5';\nexport const enlirRankBoostRe = /(.*) (abilities|attacks) deal 5\\/10\\/15\\/20\\/30% more damage at ability rank 1\\/2\\/3\\/4\\/5/;\n\nexport const rankBoostAlias = (s: string) => `1.05-1.1-1.15-1.2-1.3x ${s} dmg @ rank 1-5`;\nexport const doubleAlias = (s: string) => `double ${s} (uses extra hone)`;\nexport const sbPointsAlias = (s: string) => `+${s} SB pts`;\n\nexport const formatRandomEther = (amount: string) => 'refill ' + amount + ' random abil. use';\nexport const formatSmartEther = (amount: string, type?: string | undefined) =>\n  'refill ' + amount + ' ' + (type ? type + ' ' : '') + 'abil. use';\n\n/**\n * Mappings from Enlir status names or status effect names to MrP names.\n */\nexport interface AliasMap {\n  /**\n   * Simple names (no embedded numbers)\n   */\n  simple: { [s: string]: string };\n\n  /**\n   * Names with embedded numbers\n   */\n  numbered: { [s: string]: string | [string, (value: string) => string] };\n}\n\n/**\n * Enlir status aliases\n */\nexport const statusAlias: AliasMap = {\n  simple: {\n    Astra: 'Status blink 1',\n\n    'Cast speed *2': 'fastcast',\n    'Quick Cast': 'fastcast',\n    'Extended Quick Cast': 'fastcast',\n    'High Quick Cast': 'hi fastcast',\n    'Magical Quick Cast': 'fastzap',\n    'Magical High Quick Cast': 'hi fastzap',\n\n    'Low Regen': 'Regen (lo)',\n    'Medium Regen': 'Regen (med)',\n    'High Regen': 'Regen (hi)',\n\n    'Physical Blink Stacking 2': 'Phys blink stacking',\n\n    'Last Stand': 'Last stand',\n    'Radiant Shield: 100%': 'Reflect Dmg',\n\n    'High Retaliate': 'Retaliate @p1.2',\n    'Heavy Charge =0': 'reset Heavy Charge',\n\n    'Instant KO': 'KO',\n\n    'No Air Time': 'no air time',\n    'Heavy Charge Booster': '+1 to all Heavy Charge gains',\n\n    Sentinel: 'taunt PHY/BLK, +200% DEF',\n    Runic: 'taunt & absorb BLK',\n    'High Runic': 'taunt & absorb BLK/WHT',\n    'Unyielding Fist': 'immune atks/status/heal',\n    'Haurchefant Cover': 'if in front, 100% cover PHY,BLK,WHT,SUM,BLU vs back row, taking 0.5x dmg',\n\n    // Nonstandard alternatives.  See enlirStatusAltName.\n    'Cast Speed *999': 'instacast',\n    'B. M.': 'Burst Mode',\n\n    // Aliases of numbered statuses, minus the numbers, for use by status\n    // threshold code.  We could instead try to slash-process the status\n    // thresholds, but that seems needlessly complicated.\n    'Magical Blink': 'Magic blink',\n    'Physical Blink': 'Phys blink',\n  },\n\n  numbered: {\n    'Quick Cast {X}': 'fastcast {X}',\n    'High Quick Cast {X}': 'hi fastcast {X}',\n    'Instant Cast {X}': 'instacast {X}',\n    'Magical Quick Cast {X}': 'fastzap {X}',\n    'Magical High Quick Cast {X}': 'hi fastzap {X}',\n    'Magical Instant Cast {X}': 'instazap {X}',\n    'Physical Quick Cast {X}': 'phys fastcast {X}',\n    'Physical High Quick Cast {X}': 'phys hi fastcast {X}',\n    'Physical Instant Cast {X}': 'phys instacast {X}',\n\n    'Magical Blink {X}': 'Magic blink {X}',\n    'Physical Blink {X}': 'Phys blink {X}',\n    'Dual Blink {X}': 'PM blink {X}',\n\n    'Stoneskin: {X}%': 'Negate dmg {X}%',\n    'Reraise: {X}%': 'Reraise {X}%',\n\n    // This should perhaps be a multiplier to match the rest of MrP - but I'm\n    // considering switching everything to percents.\n    'Heals +{X}%': '+{X}% healing',\n\n    'Critical Chance {X}%': 'crit ={X}%',\n    'Critical Damage +{X}%': '+{X}% crit dmg',\n    // The FFRK Community spreadsheet has both forms.  This is probably an error.\n    '{X}% Critical': 'crit ={X}%',\n    'Critical {X}%': 'crit ={X}%',\n\n    '{X}% Damage Reduction Barrier 1': '{X}% Dmg barrier 1',\n    '{X}% Damage Reduction Barrier 2': '{X}% Dmg barrier 2',\n    '{X}% Damage Reduction Barrier 3': '{X}% Dmg barrier 3',\n\n    'Doom: {X}': 'Doom {X}s',\n\n    'Ingredients +{X}': '+{X} ingredients',\n    'Ingredients {X}': '{X} ingredients',\n\n    // Aliases with more complex formatting.\n    // TODO: We could improve our handling of '?' values by not blindly converting to numbers here\n    'HP Stock ({X})': ['Autoheal {X}', i => toMrPKilo(+i)],\n    'Damage Cap {X}': ['dmg cap={X}', i => numberWithCommas(+i)],\n    'Status Chance {X}%': ['{X}x status chance', i => percentToMultiplier(i)],\n\n    // Manually expand non-standard stat buffs to give their effects instead -\n    // this is easier than trying to programmatically identify a few statuses as\n    // needing expansion.\n    'Crash {X}%': '{X}% DEF/RES',\n\n    // Nonstandard alternatives.  See enlirStatusAltName.\n    'IC{X}': 'instacast {X}',\n\n    // Soul Break Gauge +X is a real status.  X SB points is not.\n    'Soul Break Gauge +{X}': sbPointsAlias('{X}'),\n    '{X} SB points': sbPointsAlias('{X}'),\n  },\n};\n\nfunction addCastSpeedAliases<T>(\n  aliases: { [s: string]: string | T },\n  fromType: string,\n  toType: string,\n  suffix: string = '',\n) {\n  const castSpeedAliases = [\n    ['Quick Cast', 'fastcast'],\n    ['High Quick Cast', 'hi fastcast'],\n    ['Instant Cast', 'instacast'],\n  ];\n  for (const [from, to] of castSpeedAliases) {\n    aliases[fromType + ' ' + from + suffix] = toType + ' ' + to + suffix;\n  }\n}\n\nfor (const i of allEnlirElements) {\n  statusAlias.simple[`Attach ${i}`] = `${getElementShortName(i)} infuse`;\n  statusAlias.simple[`Attach ${i} Stacking`] = `${getElementShortName(i)} infuse stacking`;\n\n  statusAlias.simple[`Minor Resist ${i}`] = `-10% ${getElementShortName(i)} vuln.`;\n  statusAlias.simple[`Medium Resist ${i}`] = `-20% ${getElementShortName(i)} vuln.`;\n  statusAlias.simple[`Major Resist ${i}`] = `-30% ${getElementShortName(i)} vuln.`;\n\n  statusAlias.simple[`Minor Buff ${i}`] = `+10% ${getElementShortName(i)} dmg`;\n  statusAlias.simple[`Medium Buff ${i}`] = `+20% ${getElementShortName(i)} dmg`;\n  statusAlias.simple[`Major Buff ${i}`] = `+30% ${getElementShortName(i)} dmg`;\n\n  statusAlias.simple[`Minor Debuff ${i}`] = `-10% ${getElementShortName(i)} dmg`;\n  statusAlias.simple[`Medium Debuff ${i}`] = `-20% ${getElementShortName(i)} dmg`;\n  statusAlias.simple[`Major Debuff ${i}`] = `-30% ${getElementShortName(i)} dmg`;\n\n  statusAlias.simple[`Minor Imperil ${i}`] = `+10% ${getElementShortName(i)} vuln.`;\n  statusAlias.simple[`Medium Imperil ${i}`] = `+20% ${getElementShortName(i)} vuln.`;\n  statusAlias.simple[`Major Imperil ${i}`] = `+30% ${getElementShortName(i)} vuln.`;\n}\nfor (const i of allEnlirSchools) {\n  statusAlias.simple[`${i} +30% Boost`] = `1.3x ${getSchoolShortName(i)} dmg`;\n  statusAlias.simple[`${i} Quick Cast`] = `${getSchoolShortName(i)} fastcast`;\n  statusAlias.simple[`${i} Quick Cast: Alternative`] = `${getSchoolShortName(i)} fastcast`;\n  statusAlias.simple[`${i} Instant Cast`] = `${getSchoolShortName(i)} instacast`;\n  statusAlias.simple[`${i} Rank Boost`] = rankBoostAlias(i);\n  statusAlias.simple[`${i} Double`] = doubleAlias(getSchoolShortName(i));\n  addCastSpeedAliases(statusAlias.simple, i, getSchoolShortName(i));\n}\naddCastSpeedAliases(statusAlias.simple, 'Jump', 'jump');\n\nfor (const i of allEnlirElements) {\n  statusAlias.numbered[`Imperil ${i} {X}%`] = `+{X}% ${getElementShortName(i)} vuln.`;\n  statusAlias.numbered[`${i} Stoneskin: {X}%`] =\n    'Negate dmg {X}% (' + getElementShortName(i) + ' only)';\n  statusAlias.numbered[`${i} Radiant Shield: {X}%`] =\n    'Reflect Dmg {X}% as ' + getElementShortName(i);\n}\nfor (const i of allEnlirSchools) {\n  addCastSpeedAliases(statusAlias.numbered, i, getSchoolShortName(i), ' {X}');\n}\naddCastSpeedAliases(statusAlias.numbered, 'Jump', 'jump', ' {X}');\n\n/**\n * Aliases for Enlir status effects\n */\nexport const effectAlias: AliasMap = {\n  simple: {\n    'cast speed x2.00': 'fastcast',\n    'cast speed x3.00': 'hi fastcast',\n    'cast speed x9999999': 'instacast',\n    'cast speed x2.00 for magical damage': 'fastzap',\n    'cast speed x3.00 for magical damage': 'hi fastzap',\n  },\n  numbered: {\n    'critical chance ={X}%': 'crit ={X}%',\n\n    'cast speed x{X}': '{X}x cast',\n    'cast speed x{X} for magical damage': '{X}x zap',\n  },\n};\n\nfunction addCastSpeedEffectAliases(fromType: string, toType: string) {\n  effectAlias.simple[`${lowerCaseFirst(fromType)} cast speed x2.00`] = toType + ' fastcast';\n  effectAlias.simple[`cast speed x2.00 for ${fromType} abilities`] = toType + ' fastcast';\n  effectAlias.simple[`${lowerCaseFirst(fromType)} cast speed x3.00`] = toType + ' hi fastcast';\n  effectAlias.simple[`cast speed x3.00 for ${fromType} abilities`] = toType + ' hi fastcast';\n  effectAlias.simple[`cast speed x9999999 for ${fromType} abilities`] = toType + ' instacast';\n}\nfor (const i of allEnlirSchools) {\n  addCastSpeedEffectAliases(i, getSchoolShortName(i));\n}\naddCastSpeedEffectAliases('Jump', 'jump');\n\nexport function splitNumbered(s: string): [string, string] | [null, null] {\n  const m = s.match(/(-?[0-9.]+\\??|\\?)/);\n  if (!m) {\n    return [null, null];\n  }\n  const text = s.replace(/-?[0-9.]+\\??|\\?/, '{X}');\n  return [text, m[1]];\n}\n\nexport function resolveNumbered(\n  text: string | [string, (value: string) => string],\n  numberValue: string,\n): string {\n  let formatter = toMrPGeneral;\n  if (Array.isArray(text)) {\n    [text, formatter] = text;\n  }\n  return text.replace('{X}', formatter(numberValue));\n}\n\ninterface ResolveOptions {\n  /**\n   * We normally prefer simple aliases over numbered aliases, so that we can\n   * override generic numbers for common cases like fastcast.  However, there\n   * are times such as dealing with stacking statuses where it's nice to keep\n   * everything generic, so that it can be slash-merged.\n   */\n  preferNumbered: boolean;\n}\nconst defaultResolveOptions: ResolveOptions = {\n  preferNumbered: false,\n};\n\nexport function resolveAlias(\n  s: string,\n  { simple, numbered }: AliasMap,\n  options: Partial<ResolveOptions> = {},\n): string | null {\n  const opt = {\n    ...defaultResolveOptions,\n    ...options,\n  };\n\n  if (!opt.preferNumbered && simple[s]) {\n    return simple[s];\n  }\n\n  const [text, numberValue] = splitNumbered(s);\n  if (text && numberValue && numbered[text]) {\n    return resolveNumbered(numbered[text], numberValue);\n  }\n\n  if (opt.preferNumbered && simple[s]) {\n    return simple[s];\n  }\n\n  return null;\n}\n\nexport const resolveStatusAlias = (status: string, options: Partial<ResolveOptions> = {}) =>\n  resolveAlias(status, statusAlias, options);\nexport const resolveEffectAlias = (effect: string, options: Partial<ResolveOptions> = {}) =>\n  resolveAlias(lowerCaseFirst(effect), effectAlias, options);\n","import { RouteItem } from './types';\n\nlet routes: RouteItem[];\nif (process.env.IS_ELECTRON) {\n  routes = require('./desktopRoutes.ts').default;\n} else {\n  routes = require('./siteRoutes.ts').default;\n}\n\nexport { routes };\n","import * as React from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { BrowserLink } from './common/BrowserLink';\n\nconst URL = 'http://ko-fi.com/rksquared';\n\nexport class DonationInfo extends React.Component {\n  render() {\n    return (\n      <div className=\"alert alert-info\">\n        Like RK&sup2;? Want to help support its development?{' '}\n        <BrowserLink href={URL} className=\"alert-link\">\n          Buy me a coffee!\n        </BrowserLink>{' '}\n        <FontAwesomeIcon icon=\"coffee-togo\" />\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nexport const BrowserLink = ({ children, ...props }: any) => (\n  <a target=\"_blank\" {...props}>\n    {children}\n  </a>\n);\n","import * as React from 'react';\n\nexport const AppFeatures = () => (\n  <ul>\n    <li>\n      <strong>Dungeon tracker</strong> - track dungeon completion status and unclaimed reward\n    </li>\n    <li>\n      <strong>Drop tracker </strong> - show what you'll get when you finish the current battle\n    </li>\n    <li>\n      <strong>Record Materia tracker </strong> - to help you see which RMs you have unlocked but not\n      yet acquired, what you have to to do get the best RMs, and which RMs are cluttering up your\n      inventory and should be stashed\n    </li>\n    <li>\n      <strong>Score tracker </strong> - view all your torment progress and magicite completion times\n      on a single page to help you see where to focus next\n    </li>\n    <li>\n      <strong>Game options </strong> - always show timer; how static battle backgrounds\n    </li>\n  </ul>\n);\n","import * as moment from 'moment';\n\n/**\n * Seconds since the epoch\n */\nexport type TimeT = number;\n\n/**\n * Far-future timestamps indicate that something never closes - but different\n * worlds may have different far-future timestamps.  (E.g., the FF15 torment's\n * is a bit before the FF13 torment's.)\n *\n * 2000000000 was chosen semi-arbitrarily; it corresponds to May 17, 2033.\n */\nexport const FAR_FUTURE = 2e9;\n\nexport const formatTimeT = (t: TimeT) => moment.unix(t).format('l LT');\n","import * as React from 'react';\n\nimport classNames from 'classnames';\n\nconst styles = require('./CollapsibleCard.scss');\n\ninterface Props {\n  id: string;\n  title: string | (() => any);\n  children: any;\n  titleClassName?: string;\n  titleStyle?: React.CSSProperties;\n}\n\ninterface State {\n  hasShown: boolean;\n}\n\nexport class CollapsibleCard extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    // For performance, only render children if we've ever shown.\n    // TODO: This means that the initial expansion is a bit choppy\n    this.state = {\n      hasShown: false,\n    };\n  }\n\n  handleClick = () => {\n    this.setState({ hasShown: true });\n  };\n\n  render() {\n    const { id, title, children, titleClassName, titleStyle } = this.props;\n    const collapseId = id + '-collapse';\n    const headerId = id + '-header';\n    return (\n      <div className={`card ${styles.component}`} id={id}>\n        <div className=\"card-header\" id={headerId}>\n          <button\n            className={classNames('btn btn-link btn-block', titleClassName)}\n            type=\"button\"\n            onClick={this.handleClick}\n            style={titleStyle}\n            data-toggle=\"collapse\"\n            data-target={'#' + collapseId}\n            aria-expanded=\"false\"\n            aria-controls={'#' + collapseId}\n          >\n            {typeof title === 'string' ? title : title()}\n          </button>\n        </div>\n\n        <div\n          id={collapseId}\n          className=\"collapse\"\n          aria-labelledby=\"headingOne\"\n          data-parent={'#' + id}\n        >\n          <div className=\"card-body\">{this.state.hasShown && children}</div>\n        </div>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport { Dungeon, hasAvailablePrizes } from '../../actions/dungeons';\n\nimport * as _ from 'lodash';\n\nconst styles = require('./DungeonBadge.scss');\n\ninterface Props {\n  dungeons: Dungeon[];\n  isAnonymous?: boolean;\n}\n\nconst getClasses = (isActive: boolean) =>\n  `badge ${styles.component} ` + (isActive ? 'badge-primary' : 'badge-secondary');\n\n/**\n * Shows dungeon status as a Bootstrap badge\n */\nexport const DungeonBadge = ({ dungeons, isAnonymous }: Props) => {\n  if (!dungeons || !dungeons.length) {\n    return null;\n  }\n  const total = dungeons.length;\n\n  // TODO: Use getProcessor to consolidate this branch with the rest of the function\n  if (isAnonymous) {\n    const stamina = _.sumBy(dungeons, 'totalStamina');\n    return (\n      <span className={getClasses(true)}>\n        {total}\n        <br />\n        {stamina} stamina\n      </span>\n    );\n  }\n\n  const mastered = _.sumBy(dungeons, d => +!hasAvailablePrizes(d));\n  const hasUnlocked = _.find(dungeons, d => d.isUnlocked && hasAvailablePrizes(d));\n  // TODO: Highlight in red if about to expire?\n  // TODO: Add Cid missions\n  // TODO: Add a tooltip explaining mastered / completed / total syntax\n  // TODO: Mark dungeons that are not yet entered but that should be unlocked? (see access-controls branch)\n  const classes = getClasses(hasUnlocked != null);\n  if (mastered === total) {\n    return (\n      <span className={classes}>\n        {mastered} / {mastered} / {total}\n      </span>\n    );\n  } else {\n    const completed = _.sumBy(dungeons, d => +d.isComplete);\n    const stamina = _.sumBy(dungeons, d => (hasAvailablePrizes(d) ? d.totalStamina : 0));\n\n    return (\n      <span className={classes}>\n        {mastered} / {completed} / {total}\n        <br />\n        {stamina} stamina\n      </span>\n    );\n  }\n};\n","import {\n  Dungeon,\n  getAllPrizes,\n  getAvailablePrizes,\n  hasAvailablePrizes,\n  PrizeItem,\n} from '../../actions/dungeons';\n\nexport const rewards = (isAnonymous?: boolean) =>\n  (isAnonymous ? 'available' : 'unclaimed') + ' rewards';\nexport const rewardsTitle = (isAnonymous?: boolean) =>\n  (isAnonymous ? 'Available' : 'Unclaimed') + ' Rewards';\n\ninterface DungeonInfo {\n  completed: boolean;\n  mastered: boolean;\n  hasPrizes: boolean;\n  getPrizes(dungeonOrDungeons: Dungeon | Dungeon[]): PrizeItem[];\n}\n\ninterface DungeonProcessor {\n  getInfo(dungeon: Dungeon): DungeonInfo;\n}\n\nexport const anonymousProcessor: DungeonProcessor = {\n  getInfo(dungeon: Dungeon) {\n    return {\n      hasPrizes: true,\n      completed: false,\n      mastered: false,\n      getPrizes: getAllPrizes,\n    };\n  },\n};\n\nexport const standardProcessor: DungeonProcessor = {\n  getInfo(dungeon: Dungeon) {\n    const hasPrizes = hasAvailablePrizes(dungeon);\n    return {\n      hasPrizes,\n      completed: dungeon.isComplete,\n      mastered: dungeon.isMaster && !hasPrizes,\n      getPrizes: getAvailablePrizes,\n    };\n  },\n};\n\nexport const getProcessor = (isAnonymous?: boolean) =>\n  isAnonymous ? anonymousProcessor : standardProcessor;\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { Dungeon, getAllPrizes, getAvailablePrizes } from '../../actions/dungeons';\nimport { ItemType } from '../../data/items';\nimport { IState } from '../../reducers';\nimport { PrizeList } from './PrizeList';\n\nimport * as _ from 'lodash';\n\nconst alwaysShow = (type: ItemType) => type === ItemType.DropItem;\n\ninterface Props {\n  dungeons: Dungeon[];\n  showItemType: { [t in ItemType]: boolean };\n  isAnonymous?: boolean;\n\n  [s: string]: any;\n}\n\nexport class DungeonPrizeList extends React.Component<Props> {\n  render() {\n    const { dungeons, showItemType, isAnonymous, ...props } = this.props;\n    const prizes = isAnonymous ? getAllPrizes(dungeons) : getAvailablePrizes(dungeons);\n    const filteredPrizes = _.filter(prizes, p => alwaysShow(p.type) || showItemType[p.type]);\n    return <PrizeList {...props} prizes={filteredPrizes} showTooltips={true} />;\n  }\n}\n\ninterface StateProps {\n  showItemType: { [t in ItemType]: boolean };\n}\n\ninterface OwnProps {\n  dungeons: Dungeon[];\n\n  [s: string]: any;\n}\n\nexport default connect<StateProps, {}, OwnProps>((state: IState) => ({\n  showItemType: state.prefs.showItemType,\n}))(DungeonPrizeList);\n","import * as React from 'react';\n\nimport classNames from 'classnames';\n\nimport { PrizeItem } from '../../actions/dungeons';\nimport { LangContext } from '../../contexts/LangContext';\nimport { enlir } from '../../data';\nimport { ItemType } from '../../data/items';\nimport { itemImage } from '../../data/urls';\nimport { RelicTooltip } from '../shared/RelicTooltip';\n\nconst styles = require('./PrizeList.scss');\n\ninterface Props {\n  prizes: PrizeItem[];\n  showTooltips?: boolean;\n  className?: string;\n}\n\n// Gil amounts in particular can be quite large, so it's nice to include\n// commas.  However, toLocaleString is significantly slower than toString.\n// To accommodate, we'll try only invoking it if it looks like we need it.\nconst formatAmount = (amount: number) =>\n  amount >= 1000 ? amount.toLocaleString() : amount.toString();\n\nexport class PrizeList extends React.PureComponent<Props> {\n  render() {\n    const { prizes, showTooltips, className } = this.props;\n    return (\n      <LangContext.Consumer>\n        {lang => (\n          <ul className={classNames(className, styles.component)}>\n            {prizes.map((prize, i) => (\n              <li\n                key={i}\n                data-tip={showTooltips}\n                data-for={showTooltips ? `prize-tooltip-${prize.id}` : undefined}\n              >\n                <img src={itemImage(lang, prize.id, prize.type)} width={32} height={32} />\n                {prize.name} ×{formatAmount(prize.amount)}\n                {showTooltips && prize.type === ItemType.Relic && enlir.relics[prize.id] && (\n                  <RelicTooltip\n                    id={`prize-tooltip-${prize.id}`}\n                    relicId={prize.id}\n                    place=\"bottom\"\n                  />\n                )}\n              </li>\n            ))}\n          </ul>\n        )}\n      </LangContext.Consumer>\n    );\n  }\n}\n","export type SeriesId =\n  101001 | // I\n  102001 | // II\n  103001 | // III\n  104001 | // IV\n  105001 | // V\n  106001 | // VI\n  107001 | // VII\n  108001 | // VIII\n  109001 | // IX\n  110001 | // X\n  111001 | // XI\n  112001 | // XII\n  113001 | // XIII\n  114001 | // XIV\n  115001 | // XV\n  150001 | // FFT\n  160001 | // T-0\n  170001 | // KH\n  190001 | // Beyond\n  200001 | // Core\n  900072;  // ETC\n\nexport const series = {\n  short: {\n    101001: 'I',\n    102001: 'II',\n    103001: 'III',\n    104001: 'IV',\n    105001: 'V',\n    106001: 'VI',\n    107001: 'VII',\n    108001: 'VIII',\n    109001: 'IX',\n    110001: 'X',\n    111001: 'XI',\n    112001: 'XII',\n    113001: 'XIII',\n    114001: 'XIV',\n    115001: 'XV',\n    150001: 'FFT',\n    160001: 'T-0',\n    170001: 'KH',\n    190001: 'Beyond',\n    200001: 'Core',\n    900072: 'ETC',\n  }\n};\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { showItemTypes } from '../../actions/prefs';\nimport { ItemType, itemTypeDescription } from '../../data/items';\nimport { IState } from '../../reducers/index';\n\nimport * as _ from 'lodash';\n\nconst shouldShow = (type: ItemType) => type !== ItemType.RecordMateria && type !== ItemType.DropItem;\n\nconst items = _.sortBy(\n  _.toPairs(itemTypeDescription).filter(i => shouldShow(i[0] as ItemType)),\n  (i: [ItemType, string]) => i[1]\n) as Array<[ItemType, string]>;\nconst itemTypes = items.map(([type]) => type);\n\nconst id = (type: ItemType) => `item-type-check-${type}`;\n\ninterface Props {\n  show: {\n    [t in ItemType]: boolean;\n  };\n  update: (updates: {[t in ItemType]?: boolean}) => void;\n  title?: string;\n}\n\nexport class ItemTypeChecklist extends React.Component<Props> {\n  handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selected = e.target.checked;\n    this.props.update({[e.target.name as ItemType]: selected});\n  };\n\n  handleChangeAll = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selected = e.target.checked;\n    this.props.update(_.fromPairs(itemTypes.map(i => [i, selected])));\n  };\n\n  render() {\n    const { show, title } = this.props;\n    const selections = _.values(_.pick(show, itemTypes));\n    const selectAll = _.find(selections) != null;\n\n    // FIXME: Indeterminate support\n    // https://github.com/facebook/react/issues/1798#issuecomment-333414857\n    // const selectNone = _.find(selections, i => !i) != null;\n\n    return (\n      <div className=\"card\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">Show {title || 'Items'}</h5>\n          {items.map(([type, description], i) =>\n            <div className=\"form-check\" key={i}>\n              <input\n                className=\"form-check-input\" type=\"checkbox\"\n                name={type} id={id(type)}\n                checked={!!show[type]}\n                onChange={this.handleChange}\n              />\n              <label className=\"form-check-label\" htmlFor={id(type)}>\n                {description}\n              </label>\n            </div>\n          )}\n\n          <div className=\"form-check mt-3\">\n            <input\n              className=\"form-check-input\" type=\"checkbox\" name=\"_all\" id=\"item-type-check-_all\"\n              checked={selectAll}\n              onChange={this.handleChangeAll}\n            />\n            <label className=\"form-check-label\" htmlFor=\"item-type-check-_all\">\n              All\n            </label>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  (state: IState) => ({\n    show: state.prefs.showItemType\n  }),\n  (dispatch) => ({\n    update: (updates: {[t in ItemType]?: boolean}) => { dispatch(showItemTypes(updates)); }\n  })\n)(ItemTypeChecklist);\n","import { createAction } from 'typesafe-actions';\n\nimport { ItemType } from '../data/items';\n\nexport const showItemType = createAction('SHOW_ITEM_TYPE', (type: ItemType, show: boolean) => ({\n  type: 'SHOW_ITEM_TYPE',\n  payload: {\n    type,\n    show\n  }\n}));\n\nexport const showItemTypes = createAction('SHOW_ITEM_TYPES', (updates: {[t in ItemType]?: boolean}) => ({\n  type: 'SHOW_ITEM_TYPES',\n  payload: {\n    updates\n  }\n}));\n\nexport type PrefsAction = ReturnType<typeof showItemType | typeof showItemTypes>;\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { sprintf } from 'sprintf-js';\n\nimport { Progress } from '../../actions/progress';\nimport { IState } from '../../reducers';\nimport { hasSessionState } from '../../reducers/session';\nimport { pluralize } from '../../utils/textUtils';\nimport { ProgressBar } from '../common/ProgressBar';\n\ninterface Props {\n  missingCount: number;\n  hasSession: boolean;\n  progress: Progress;\n\n  countText: string;\n  countPluralText?: string;\n  missingText: string;\n  loadingText: string;\n\n  onLoad: () => void;\n}\n\nexport class LoadMissingPrompt extends React.Component<Props> {\n  handleClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    this.props.onLoad();\n  };\n\n  render() {\n    const {\n      missingCount,\n      hasSession,\n      missingText,\n      countText,\n      countPluralText,\n      loadingText,\n      progress,\n    } = this.props;\n    if (missingCount !== 0 && hasSession && !progress) {\n      const missingPrompt = sprintf(\n        missingText,\n        missingCount + ' ' + pluralize(missingCount, countText, countPluralText),\n      );\n      return (\n        <div className=\"alert alert-primary\">\n          {missingPrompt + ' '}\n          <a href=\"#\" role=\"button\" onClick={this.handleClick}>\n            Load now?\n          </a>\n        </div>\n      );\n    }\n\n    if (progress) {\n      return (\n        <div className=\"mb-2\">\n          {loadingText} for {progress.current + 1} of {progress.max}&hellip;\n          <ProgressBar progress={progress} />\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n\nexport default connect((state: IState, ownProps: { progressKey: string }) => ({\n  progress: state.progress[ownProps.progressKey],\n  hasSession: hasSessionState(state.session),\n}))(LoadMissingPrompt);\n","/**\n * @file\n * Reducer for FFRK session\n */\n\nimport { getType } from 'typesafe-actions';\n\nimport { Session, SessionAction, updateSession } from '../actions/session';\n\nexport { Session };\n\nexport function hasSessionState(state: Session): boolean {\n  return !!(state.userSession && state.sessionCookie);\n}\n\nexport function session(state: Session = {}, action: SessionAction): Session {\n  switch (action.type) {\n    case getType(updateSession):\n      return {\n        ...state,\n        ...action.payload\n      };\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","/**\n * @file\n * Common types and helper functions shared by proxy handlers\n */\n\nimport { Store } from 'redux';\nimport { Url, URL, UrlWithStringQuery } from 'url';\n\nimport { LangType } from '../api/apiUrls';\nimport { IState } from '../reducers';\n\n// We'd like to make this a Symbol(), but TypeScript doesn't support using\n// symbols as indexes: https://github.com/Microsoft/TypeScript/issues/24587\nconst StartupHandler = '__STARTUP';\n\nexport { StartupHandler };\n\nexport interface HandlerRequest {\n  query?: any;\n  body?: any;\n  url?: UrlWithStringQuery;\n}\nexport type HandlerFunction = (\n  data: {},\n  store: Store<IState>,\n  request: HandlerRequest,\n) => {} | void;\nexport interface Handler {\n  [endpoint: string]: HandlerFunction;\n}\n\nexport function isUrlJp(url: URL | Url): boolean {\n  return !!url.hostname && url.hostname.endsWith('.jp');\n}\n\nexport function getRequestLang(request: HandlerRequest): LangType {\n  return request.url && isUrlJp(request.url) ? LangType.Jp : LangType.Gl;\n}\n","import axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { call, CallEffect } from 'redux-saga/effects';\n\nimport * as _ from 'lodash';\n\nimport { showDanger } from '../actions/messages';\nimport { Session } from '../actions/session';\nimport { logger } from '../utils/logger';\n\nexport function sessionConfig(session: Session): AxiosRequestConfig {\n  return {\n    headers: {\n      'user-session': session.userSession,\n      cookie: `http_session_sid=${session.sessionCookie}`,\n      accept: '*/*',\n    },\n  };\n}\n\nexport function callApi(\n  url: string,\n  session: Session,\n  callback: (response: AxiosResponse) => any,\n): CallEffect {\n  const config = sessionConfig(session);\n\n  // Log an equivalent HTTPie command to facilitate debugging.\n  logger.debug(\n    'http ' + url + ' ' + _.map(config.headers, (value, key) => `${key}:'${value}'`).join(' '),\n  );\n\n  return call(() =>\n    axios\n      .get(url, config)\n      .then(callback)\n      .catch(e => {\n        logger.error(e);\n        return showDanger(e.message);\n      }),\n  );\n}\n","import * as React from 'react';\nimport * as ReactTooltip from 'react-tooltip';\n\nimport { RecordMateriaDetail, RecordMateriaStatus } from '../../actions/recordMateria';\nimport { LangType } from '../../api/apiUrls';\nimport { LangContext } from '../../contexts/LangContext';\nimport { enlir } from '../../data';\nimport * as urls from '../../data/urls';\nimport { BrTextToP } from '../common/BrTextToP';\nimport { StatusIcon } from './StatusIcon';\n\nconst styles = require('./RecordMateriaTooltip.scss');\n\ninterface Props {\n  id: string;\n  recordMateria: { [id: number]: RecordMateriaDetail };\n  isAnonymous?: boolean;\n  descriptionOnly?: boolean;\n}\n\nexport class RecordMateriaTooltip extends React.Component<Props> {\n  // noinspection JSUnusedGlobalSymbols\n  static contextType = LangContext;\n  context!: React.ContextType<typeof LangContext>;\n\n  renderStatus(rm: RecordMateriaDetail) {\n    if (this.props.isAnonymous) {\n      return (\n        <div className={styles.statusBlock}>\n          <p className={styles.unlockCondition}>{rm.condition}</p>\n        </div>\n      );\n    } else {\n      return (\n        <div className={styles.statusBlock}>\n          <StatusIcon status={rm.status} />\n          <p>\n            {rm.statusDescription}\n            {rm.status === RecordMateriaStatus.Unlocked && (\n              <span className={styles.unlockCondition}> ({rm.condition})</span>\n            )}\n          </p>\n        </div>\n      );\n    }\n  }\n\n  getContent = (recordMateriaId: string) => {\n    const rm = this.props.recordMateria[+recordMateriaId];\n    if (!rm) {\n      return null;\n    }\n    const lang = this.context as LangType;\n    const enlirRM = enlir.recordMateria[rm.id];\n\n    const gameDescription = <BrTextToP text={rm.description} className={styles.gameDescription} />;\n    const enlirDescription = enlirRM && <p className={styles.enlirDescription}>{enlirRM.effect}</p>;\n\n    if (this.props.descriptionOnly) {\n      return (\n        <div className={styles.textBlock}>\n          {gameDescription}\n          {enlirDescription}\n        </div>\n      );\n    }\n    return (\n      <>\n        <div className={styles.iconsBlock}>\n          <img src={urls.characterImage(lang, rm.characterId)} />\n          <img src={urls.recordMateriaImage(lang, rm.id)} />\n        </div>\n\n        <div className={styles.textBlock}>\n          <h6>{rm.name}</h6>\n          {gameDescription}\n          {enlirDescription}\n          {this.renderStatus(rm)}\n        </div>\n      </>\n    );\n  };\n\n  render() {\n    const { id } = this.props;\n    return (\n      <ReactTooltip\n        id={id}\n        className={styles.component}\n        place=\"bottom\"\n        getContent={this.getContent}\n      />\n    );\n  }\n}\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport {\n  isGroup,\n  RelicDrawBannerDetails,\n  RelicDrawBannerOrGroup,\n  RelicDrawGroupDetails,\n} from '../../selectors/relicDraws';\nimport { pluralize } from '../../utils/textUtils';\nimport { FAR_FUTURE, formatTimeT } from '../../utils/timeUtils';\n\nconst styles = require('./RelicDrawBannerList.scss');\n\ninterface Props {\n  group?: RelicDrawGroupDetails;\n  details: RelicDrawBannerOrGroup[];\n  isAnonymous?: boolean;\n  groupLink: (group: string) => string;\n  bannerLink: (bannerId: number) => string;\n}\n\ninterface RelicLinkProps<T> {\n  details: T;\n  to: string;\n  isAnonymous?: boolean;\n}\n\nfunction formatDupeCount(details: RelicDrawBannerDetails) {\n  if (details.dupeCount != null && details.totalCount) {\n    return `${details.dupeCount} / ${details.totalCount} ${pluralize(details.dupeCount, 'dupe')}`;\n  } else {\n    return undefined;\n  }\n}\n\nfunction formatTotalCount(details: RelicDrawBannerDetails) {\n  if (details.totalCount) {\n    return `${details.totalCount} ${pluralize(details.totalCount, 'relic')}`;\n  } else {\n    return undefined;\n  }\n}\n\nfunction formatAvailableCount(details: RelicDrawBannerDetails) {\n  if (!details.canPull) {\n    return undefined;\n  } else {\n    return formatDupeCount(details) || formatTotalCount(details);\n  }\n}\n\nconst RelicDrawGroupLink = ({\n  details,\n  to,\n  isAnonymous,\n}: RelicLinkProps<RelicDrawGroupDetails>) => {\n  const count = isAnonymous ? details.bannerCount : details.canPullOrSelectCount;\n  return (\n    <div>\n      <Link to={to}>\n        <img className={styles.image} src={details.imageUrl} />\n      </Link>\n      <div className={styles.details}>\n        {count} {pluralize(count, 'banner')}{' '}\n      </div>\n    </div>\n  );\n};\n\nconst RelicDrawBannerLink = ({\n  details,\n  to,\n  isAnonymous,\n}: RelicLinkProps<RelicDrawBannerDetails>) => {\n  const count = isAnonymous ? formatTotalCount(details) : formatAvailableCount(details);\n  return (\n    <div className={styles.component}>\n      <Link to={to}>\n        <img className={styles.image} src={details.imageUrl} />\n      </Link>\n      <div className={styles.details}>\n        <span className={styles.count}>{count}</span>\n        {details.closedAt < FAR_FUTURE && (\n          <span className={styles.closedAt}>ends {formatTimeT(details.closedAt)}</span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport class RelicDrawBannerList extends React.PureComponent<Props> {\n  render() {\n    const { details, isAnonymous, groupLink, bannerLink } = this.props;\n    return (\n      <>\n        {details\n          .filter(d => isAnonymous || d.canPull || d.canSelect)\n          .map((d, i) =>\n            isGroup(d) ? (\n              <RelicDrawGroupLink\n                details={d}\n                isAnonymous={isAnonymous}\n                key={i}\n                to={groupLink(d.groupName)}\n              />\n            ) : (\n              <RelicDrawBannerLink\n                details={d}\n                isAnonymous={isAnonymous}\n                key={i}\n                to={bannerLink(d.id)}\n              />\n            ),\n          )}\n      </>\n    );\n  }\n}\n","import * as _ from 'lodash';\nimport * as XRegExp from 'xregexp';\n\nimport {\n  EnlirBurstCommand,\n  EnlirElement,\n  EnlirFormula,\n  EnlirSchool,\n  EnlirSkill,\n  EnlirSkillType,\n  isSoulBreak,\n} from '../enlir';\nimport { describeEnlirStatus } from './status';\nimport {\n  formatSchoolOrAbilityList,\n  getElementShortName,\n  getSchoolShortName,\n  getShortName,\n  MrPDamageType,\n  SB_BAR_SIZE,\n  XRegExpNamedGroups,\n} from './types';\nimport {\n  countMatches,\n  describeChances,\n  formatUseCount,\n  orList,\n  parseNumberString,\n  parsePercentageCounts,\n  parseThresholdValues,\n  toMrPFixed,\n} from './util';\n\nexport interface ParsedEnlirAttack {\n  damageType: MrPDamageType;\n  randomChances?: string;\n\n  /**\n   * \"Normal\" multiplier per attack\n   */\n  attackMultiplier: number;\n\n  /**\n   * \"Normal\" number of attacks.  Null if a random number of attacks.\n   */\n  numAttacks: number | null;\n\n  /**\n   * Text description of total multiplier / number of attacks\n   */\n  damage: string;\n\n  /**\n   * Conditional / alternate damage string\n   */\n  orDamage?: string;\n\n  /**\n   * Condition under which orDamage applies\n   */\n  orCondition?: string;\n\n  scaleToDamage?: string;\n  scaleType?: string;\n\n  /**\n   * For hybrid attacks, this gives the magical damage string, and the damage\n   * property gives the physical damage string.\n   */\n  hybridDamage?: string;\n  hybridDamageType?: MrPDamageType;\n\n  additionalDamage?: number[];\n  additionalDamageType?: string;\n  additionalCrit?: number[];\n  additionalCritType?: string;\n  additionalCritDamage?: number;\n\n  minDamage?: number;\n\n  defaultDamage?: string;\n\n  status?: string;\n  statusChance?: number;\n  statusDuration?: number;\n\n  element: EnlirElement[] | null;\n  school?: EnlirSchool;\n  isFixedDamage: boolean;\n  isAoE: boolean;\n  isRanged: boolean;\n  isJump: boolean;\n  isOverstrike: boolean;\n  isSummon: boolean;\n  isNat: boolean;\n  isNoMiss: boolean;\n  isPiercing: boolean;\n}\n\n// Source for convergent mechanics:\n// https://www.reddit.com/r/FFRecordKeeper/comments/6eldg4/change_to_convergent_attacks_mechanics/\nconst sbConvergentScaleFactor = 0.42;\n// Only used for Orlandeau's God Among Men\nconst otherConvergentScaleFactor = 0.35;\n\nfunction convergentMultiplier(\n  minMultiplier: number,\n  maxMultiplier: number,\n  numberOfEnemies: number,\n  scaleFactor: number,\n): number {\n  return (\n    minMultiplier + (maxMultiplier - minMultiplier) * Math.exp(-(numberOfEnemies - 1) * scaleFactor)\n  );\n}\n\nconst convergentScaleType = 'vs 1-2-3… foes';\n\n/**\n * Describes convergent attacks.  I like MrP's approach of listing numbers\n * instead of just showing the from/to.\n */\nfunction describeConvergentDamage(\n  minMultiplier: number,\n  maxMultiplier: number,\n  numAttacks: number,\n  scaleFactor: number,\n): string {\n  return (\n    _.times(3, (i: number) =>\n      describeDamage(\n        convergentMultiplier(minMultiplier, maxMultiplier, i + 1, scaleFactor),\n        numAttacks,\n      ),\n    ).join(thresholdJoin) + '…'\n  );\n}\n\nexport function describeDamage(\n  attackMultiplier: number,\n  numAttacks: number,\n  includeNumAttacks: boolean = true,\n) {\n  const multiplier = attackMultiplier * numAttacks;\n  return toMrPFixed(multiplier) + (includeNumAttacks && numAttacks !== 1 ? '/' + numAttacks : '');\n}\n\nfunction describeRandomDamage(\n  damageFunction: (n: number) => string,\n  randomAttacks: Array<[number, number]>,\n): [string | undefined, string] {\n  const percents = randomAttacks.map(([, percent]) => percent);\n  const damages = randomAttacks.map(([count]) => damageFunction(count));\n  return describeChances(damages, percents);\n}\n\nconst thresholdJoin = ' - ';\n\nfunction describeThresholdDamage(\n  numAttacks: number | null,\n  numAttacksRange: number[] | null,\n  attackMultiplier: string,\n): string {\n  let attackMultipliersRange = parseThresholdValues(attackMultiplier);\n  if (!numAttacksRange) {\n    numAttacksRange = _.times(attackMultipliersRange.length, _.constant(numAttacks!));\n  }\n  if (attackMultipliersRange.length === 1) {\n    attackMultipliersRange = _.times(numAttacksRange.length, _.constant(attackMultipliersRange[0]));\n  }\n  return _.zip(attackMultipliersRange, numAttacksRange)\n    .map(([m, n]) => describeDamage(m!, n!))\n    .join(thresholdJoin);\n}\n\nexport function formatThreshold(\n  thresholdValues: string,\n  thresholdName: string,\n  units: string = '',\n): string {\n  return '@ ' + thresholdValues.replace(/\\//g, '-') + units + ' ' + thresholdName;\n}\n\n/**\n * Describes the \"followed by\" portion of an attack.  This is used for 20+1\n * AOSBs.\n */\nfunction describeFollowedByAttack(effects: string, parentAttackType: string): string | null {\n  const m = effects.match(\n    /followed by ([A-Za-z\\-]+) (?:(group|random|single) )?(rang\\.?(?:ed)? )?(jump )?attacks? \\(([0-9\\.]+(?: each)?)\\)( capped at 99999)?/,\n  );\n  if (!m) {\n    return null;\n  }\n  // prettier-ignore\n  const [\n    ,\n    numAttacksString,\n    attackType,\n    /*ranged*/,\n    /*jump*/,\n    attackMultiplierString,\n    overstrike,\n  ] = m;\n  const attackMultiplier = parseFloat(attackMultiplierString);\n  const numAttacks = parseNumberString(numAttacksString);\n  if (numAttacks == null) {\n    return null;\n  }\n\n  let damage = '';\n  damage +=\n    attackType === 'group' && parentAttackType !== 'group'\n      ? 'AoE '\n      : attackType !== 'group' && parentAttackType === 'group'\n      ? attackType + ' '\n      : '';\n  damage += describeDamage(attackMultiplier, numAttacks);\n  damage += overstrike ? ' overstrike' : '';\n  return damage;\n}\n\nfunction describeOrCondition(orCondition: string, burstCommands?: EnlirBurstCommand[]): string {\n  let m: RegExpMatchArray | null;\n  if (orCondition === 'the user is in the front row' || orCondition === 'user is in front row') {\n    return 'if in front row';\n  } else if (orCondition === 'exploiting elemental weakness') {\n    return 'vs. weak';\n  } else if (orCondition === 'all allies are alive') {\n    return 'if no allies KO';\n  } else if (orCondition === 'the user has any Doom' || orCondition === 'with any Doom') {\n    return 'if Doomed';\n  } else if ((m = orCondition.match(/the target has (.*)/))) {\n    // If we have one status, show it.  Otherwise, in practice, this is always\n    // the same status ailments that the attack itself inflicts, so omit\n    // details to save space.\n    const status = m[1].split(orList);\n    return status.length === 1 ? 'vs. ' + status[0] : 'vs. status';\n  } else if ((m = orCondition.match(/(\\d+) or more (.*) are in the party/))) {\n    return 'if ' + m[1] + ' ' + m[2] + ' in party';\n  } else if ((m = orCondition.match(/the user has (.*)/))) {\n    const statusName = m[1];\n    let statusDescription = describeEnlirStatus(statusName.replace(/^any /, ''));\n    if (statusName === statusDescription && burstCommands) {\n      const commandRelatingToStatus = _.findIndex(\n        burstCommands,\n        i => i.effects.match(new RegExp('[Gg]rants ' + statusName + '\\\\b')) != null,\n      );\n      if (commandRelatingToStatus !== -1) {\n        statusDescription = 'cmd' + (commandRelatingToStatus + 1) + ' status';\n      }\n    }\n    return 'if ' + statusDescription;\n  } else if ((m = orCondition.match(/(.*) is alive/))) {\n    return 'if ' + m[1] + ' alive';\n  } else {\n    return 'if ' + orCondition;\n  }\n}\n\nfunction describeOr(\n  effects: string,\n  attackMultiplier: number,\n  numAttacks: number | null,\n  burstCommands?: EnlirBurstCommand[],\n): [string | undefined, string | undefined] {\n  const m = effects.match(\n    /(?:([0-9\\.]+) (?:multiplier|mult\\.)|([a-z\\-]+) attacks) (?:if (.*?)|(with .*?))(?=, grants|, causes|, restores HP |, damages the user |, heals the user |, [A-Z]{3}|$)/,\n  );\n  if (!m) {\n    return [undefined, undefined];\n  }\n\n  const [, orMultiplier, orNumAttacksString, orCondition, withCondition] = m;\n  const orNumAttacks = orNumAttacksString && parseNumberString(orNumAttacksString);\n  let orDamage: string | undefined;\n  if (orMultiplier && numAttacks) {\n    orDamage = describeDamage(parseFloat(orMultiplier), numAttacks);\n  } else if (orNumAttacks) {\n    orDamage = describeDamage(attackMultiplier, orNumAttacks);\n  }\n\n  return [orDamage, describeOrCondition(orCondition || withCondition, burstCommands)];\n}\n\nfunction describeScaleType(scaleType: string): string {\n  let m: RegExpMatchArray | null;\n  if (scaleType === ' scaling with HP%') {\n    return '@ 1% HP';\n  } else if (scaleType === ' scaling with hits taken') {\n    return 'w/ hits taken';\n  } else if ((m = scaleType.match(/scaling with (\\w+) attacks used/))) {\n    return `w/ ${getElementShortName(m[1] as EnlirElement)} atks used`;\n  } else if ((m = scaleType.match(/scaling with (\\w+) abilities used/))) {\n    return `w/ ${m[1]} used`;\n  } else if (scaleType === ' scaling with Doom timer') {\n    return 'at low Doom time';\n  } else {\n    return scaleType.trim();\n  }\n}\n\nfunction isConvergent(scaleType: string) {\n  return scaleType === ' scaling with targets';\n}\n\nexport function describeDamageType(skill: EnlirSkill): MrPDamageType;\nexport function describeDamageType(\n  formula: EnlirFormula | null,\n  type: EnlirSkillType | null,\n): MrPDamageType;\n\nexport function describeDamageType(\n  skillOrFormula: EnlirSkill | EnlirFormula | null,\n  type?: EnlirSkillType | null,\n): MrPDamageType {\n  let formula: EnlirFormula | null;\n  if (typeof skillOrFormula === 'object' && skillOrFormula != null) {\n    formula = skillOrFormula.formula;\n    type = skillOrFormula.type;\n  } else {\n    formula = skillOrFormula;\n  }\n  if (formula === 'Hybrid') {\n    // For hybrid, report the main damage as physical, and use separate fields\n    // for the magical alternative.\n    return 'phys';\n  }\n\n  switch (type) {\n    case 'PHY':\n      return 'phys';\n    case 'WHT':\n      return 'white';\n    case 'BLK':\n    case 'SUM':\n    case 'NIN':\n      return 'magic';\n    case 'NAT':\n      return formula === 'Physical' ? 'phys' : formula === 'Magical' ? 'magic' : '?';\n    case '?':\n    case null:\n    case undefined:\n      return '?';\n  }\n}\n\nfunction describeHybridDamageType(skill: EnlirSkill): MrPDamageType | undefined {\n  // HACK: The spreadsheet doesn't record whether it's a physical/magical\n  // hybrid or a physical/white hybrid.  I'm not even positive that Cecil's\n  // soul break is physical/white instead of physical/magical.  But, since\n  // Cecil's soul breaks are the only skills affected by this, we'll hard-code\n  // it.\n  if (skill.formula !== 'Hybrid') {\n    return undefined;\n  } else if ('character' in skill && skill.character === 'Cecil (Paladin)') {\n    return 'white';\n  } else {\n    return 'magic';\n  }\n}\n\nfunction describeAdditionalCritType(\n  {\n    additionalCritType,\n    additionalCritCharacter,\n    additionalCritStatus,\n    additionalCritScaleWithUses,\n    additionalCritFinisherAttackCount,\n    additionalCritFinisherAttackType,\n  }: XRegExpNamedGroups,\n  additionalCrit: number[] | undefined,\n): string {\n  if (additionalCritCharacter) {\n    return `if ${additionalCritCharacter} alive`;\n  } else if (additionalCritStatus) {\n    // Special case: We don't show \"High Retaliate\" to the user.\n    if (additionalCritStatus === 'Retaliate or High Retaliate') {\n      return 'if Retaliate';\n    } else {\n      return 'if ' + describeEnlirStatus(additionalCritStatus.replace(/^any /, ''));\n    }\n  } else if (additionalCritScaleWithUses) {\n    return formatUseCount(additionalCrit ? additionalCrit.length : undefined);\n  } else if (additionalCritFinisherAttackCount && additionalCritFinisherAttackType) {\n    return formatThreshold(\n      additionalCritFinisherAttackCount,\n      formatSchoolOrAbilityList(additionalCritFinisherAttackType),\n    );\n  } else {\n    return additionalCritType;\n  }\n}\n\nfunction describeAdditionalDamageType(\n  { additionalDamageAbilityCount, additionalDamageAbility }: XRegExpNamedGroups,\n  additionalDamage: number[],\n): string {\n  return formatThreshold(\n    additionalDamageAbilityCount,\n    getShortName(additionalDamageAbility) + ' allies',\n  );\n}\n\nfunction parseRandomAttacks(attacks: string): Array<[number, number]> | null {\n  // Try to parse it as a series of percentage-annotated number strings.\n  const asPercents = parsePercentageCounts(attacks);\n  if (asPercents) {\n    return asPercents;\n  }\n\n  // Try to parse it as a plain series of number strings.\n  const m = attacks.match(/Randomly deals (.*)/);\n  if (!m) {\n    return null;\n  }\n  const numAttacks = m[1].split(orList).map(parseNumberString);\n  if (_.some(numAttacks, i => i == null)) {\n    return null;\n  }\n\n  const percentage = 100 / numAttacks.length;\n  return numAttacks.map(i => [i, percentage] as [number, number]);\n}\n\nconst attackRe = XRegExp(\n  String.raw`\n  (?:^|,\\ )\n  (?<numAttacks>[Rr]andomly\\ deals\\ .*|[A-Za-z-]+|[0-9/]+)\\ #\n  (?:(?<attackType>group|random|single)\\ )?\n  (?<modifiers>(hybrid\\ |rang\\.?(?:ed)?\\ |jump\\ )*)\n  attacks?\n  (?<hasMultiplier>\\ \\(\n    (?<randomMultiplier>randomly\\ )?\n    (?<attackMultiplier>[0-9.]+|\\?)\n    (?<altAttackMultiplier>(?:/[0-9.]+)*)?\n    (?:\\ or\\ (?<hybridAttackMultiplier>[0-9.]+|\\?))?\n    (?:~(?<scaleToAttackMultiplier>[0-9.]+))?\n    (?:\\ each)?\n    (?<scaleType>\\ scaling\\ with[^)]+?)?\n    (?:,\\ (?<defaultMultiplier>[0-9.]+)\\ default)?\n  \\))?\n  (?:\\ that\\ deal\\ (?<fixedDamage>\\d+)\\ damage(?:\\ each)?)?\n  (?<overstrike>,?\\ capped\\ at\\ 99999)?\n\n  (?<scaleWithUses>,?\\ scaling\\ with\\ uses)?\n  (?:,?\\ (?:scaling|scal\\.)\\ with\\ (?<scaleWithSkillUses>.*?)\\ uses)?\n  (?<rank>\\ at\\ rank\\ 1/2/3/4/5\\ of\\ the\\ triggering\\ ability)?\n  (?:\\ if\\ (?:the\\ )?user\\ has\\ (?<statusThreshold>.*)\\ (?<statusThresholdCount>(?:\\d+/)+\\d+))?\n  (?:\\ if\\ the\\ user's\\ HP\\ are\\ below\\ (?<lowHpThresholdValue>(?:\\d+/)*\\d+)%)?\n  (?:\\ if\\ the\\ user\\ took\\ (?<tookHitsValue>(?:\\d+/)*\\d+)\\ (?<tookHits>.*)\\ hits)?\n  (?:\\ at\\ (?<statThresholdValue>(?:\\d+/)*\\d+)\\ (?<statThreshold>[A-Z]{3}))?\n  (?:,?\\ scaling\\ with\\ (?<attackThresholdType>.*)\\ (?:attacks|abilities)\\ used\\ \\((?<attackThresholdCount>(?:\\d+/)*\\d+)\\))?\n  (?:\\ if\\ the\\ user\\ used\\ (?<simpleAttackThresholdCount>(?:\\d+/)*\\d+)\\ damaging\\ actions)?\n  (?:\\ if\\ the\\ user\\ used\\ (?<finisherAttackThresholdCount>(?:\\d+/)*\\d+)\\ (?<finisherAttackThresholdType>.*?)?\\ (?:attacks|abilities)\\ during\\ the\\ status)?\n  (?:\\ if\\ the\\ target\\ has\\ (?<statusAilmentsThresholdValue>(?:\\d+/)*\\d+)\\ ailments)?\n  (?:\\ if\\ (?<statBreakCount>(?:\\d+/)*\\d+)\\ of\\ the\\ target's\\ stats\\ are\\ lowered)?\n  (?:\\ at\\ (?<differentAbilityValue>(?:\\d+/)*\\d+)\\ different\\ (?<differentAbilityType>.*?)\\ abilities\\ used)?\n\n  (?:,\\ (?<additionalDamage>(?:-?\\d+/)*\\d+)%\\ more\\ damage\\ with\\ (?<additionalDamageAbilityCount>(?:\\d+/)*\\d)\\ other\\ (?<additionalDamageAbility>.*?)\\ users)?\n  (?:,\\ (?<additionalCrit>[0-9/]+)%\\ (?:additional|add.)\\ critical\\ chance\n    (?<additionalCritType>\n      \\ if\\ the\\ user\\ has\\ (?<additionalCritStatus>[A-Za-z ]+)|\n      \\ if\\ the\\ user\\ used\\ (?<additionalCritFinisherAttackCount>(?:\\d+/)*\\d+)\\ (?<additionalCritFinisherAttackType>.*?)?\\ (?:attacks|abilities)\\ during\\ the\\ status|\n      \\ if\\ (?<additionalCritCharacter>.*?)\\ is\\ alive|\n      (?<additionalCritScaleWithUses>\\ scaling\\ with\\ uses)\n    )?\n  )?\n  (?:,\\ (?<additionalCritDamage>[0-9/]+)%\\ (?:additional|add\\.)\\ critical\\ damage)?\n  (?:,\\ (?<statusChance>\\d+)%\\ chance\\ to\\ cause\\ (?<status>.*?)\\ for\\ (?<statusDuration>\\d+)\\ seconds)?\n\n  (?<noMiss>,\\ 100%\\ hit\\ rate)?\n  (?:,\\ multiplier\\ increased\\ by\\ (?<sbMultiplierIncrease>[0-9.]+)\\ for\\ every\\ SB\\ point)?\n  (?:\\ for\\ (?<finisherPercentDamage>[0-9.]+)%\\ of\\ the\\ damage\\ dealt\\ with\\ (?<finisherPercentCriteria>.*)\\ during\\ the\\ status)?\n  (?:,\\ minimum\\ damage\\ (?<minDamage>\\d+))?\n  (?<piercing>,\\ ignores\\ (?:DEF|RES))?\n  `,\n  'x',\n);\n\n/**\n * Parses the \"attack\" portion of an Enlir skill.\n *\n * @param effects The skill effects string, or the portion of it corresponding\n *   to the attack\n * @param skill The containing Enlir skill JSON\n * @param prereqStatus A status that must be present for this skill to\n *   trigger - e.g., for Edge's Lurking Shadow.  parseEnlirAttack can use this\n *   to clean up attack formatting\n * @param burstCommands Optional list of burst commands for which this skill is\n *   a part.  If present, this is used to process items like Squall's BSB2,\n *   where one command powers up the other.\n */\nexport function parseEnlirAttack(\n  effects: string,\n  skill: EnlirSkill,\n  {\n    prereqStatus,\n    burstCommands,\n  }: {\n    prereqStatus?: string;\n    burstCommands?: EnlirBurstCommand[];\n  },\n): ParsedEnlirAttack | null {\n  const m = XRegExp.exec(effects, attackRe) as any;\n  if (!m) {\n    return null;\n  }\n  if (!m.hasMultiplier && !m.fixedDamage && !m.finisherPercentDamage) {\n    return null;\n  }\n\n  const randomAttacks = parseRandomAttacks(m.numAttacks);\n  const attackMultiplier = parseFloat(m.attackMultiplier);\n  const scaleToAttackMultiplier = parseFloat(m.scaleToAttackMultiplier);\n  const numAttacks = parseNumberString(m.numAttacks);\n  const numAttacksRange = m.numAttacks.match('/') ? parseThresholdValues(m.numAttacks) : null;\n\n  const isRanged = m.modifiers.match('ranged');\n  const isJump = m.modifiers.match('jump');\n  const isHybrid = m.modifiers.match('hybrid') || skill.formula === 'Hybrid';\n\n  let randomChances: string | undefined;\n  let damage: string;\n  let hybridDamage: string | undefined;\n  if (randomAttacks && m.fixedDamage) {\n    const fixedDamage = +m.fixedDamage;\n    [randomChances, damage] = describeRandomDamage(\n      n => (n === 1 ? m.fixedDamage : fixedDamage * n + '/' + n),\n      randomAttacks,\n    );\n    damage += ' fixed dmg';\n    // Note: There are no attacks that use fixed damage with an explicit but\n    // non-random number of attacks, so we ignore that case.\n  } else if (randomAttacks) {\n    [randomChances, damage] = describeRandomDamage(\n      n => describeDamage(attackMultiplier, n),\n      randomAttacks,\n    );\n  } else if (numAttacks && m.randomMultiplier && m.altAttackMultiplier) {\n    damage = [\n      attackMultiplier,\n      ...m.altAttackMultiplier\n        .replace('/', '')\n        .split('/') // we capture altAttackModifier as starting with '/' - remove that\n        .map(parseFloat),\n    ]\n      .map(i => describeDamage(i, numAttacks))\n      .join(' or ');\n  } else if (m.finisherPercentDamage) {\n    const criteria = formatSchoolOrAbilityList(\n      m.finisherPercentCriteria.replace(/ (attacks|abilities)/, ''),\n    );\n    const finisherPercentDamage = +m.finisherPercentDamage;\n    if (numAttacks && numAttacks !== 1) {\n      damage = finisherPercentDamage * numAttacks + '% ' + criteria + '/' + numAttacks;\n    } else {\n      damage = finisherPercentDamage + '% ' + criteria;\n    }\n  } else if (numAttacksRange || m.altAttackMultiplier) {\n    damage = describeThresholdDamage(\n      numAttacks,\n      numAttacksRange,\n      m.attackMultiplier + (m.altAttackMultiplier || ''),\n    );\n  } else if (isHybrid && numAttacks) {\n    damage = describeDamage(attackMultiplier, numAttacks);\n    hybridDamage = describeDamage(parseFloat(m.hybridAttackMultiplier), numAttacks);\n  } else {\n    damage = describeDamage(attackMultiplier, numAttacks!);\n  }\n  const followedBy = describeFollowedByAttack(skill.effects, m.attackType);\n  if (followedBy) {\n    damage += ', then ' + followedBy + ',';\n  }\n\n  const [orDamage, orCondition] = describeOr(\n    skill.effects,\n    attackMultiplier,\n    numAttacks,\n    burstCommands,\n  );\n\n  let scaleType: string | undefined;\n  let scaleToDamage: string | undefined;\n  if (m.sbMultiplierIncrease) {\n    const sbMultiplierIncrease = parseFloat(m.sbMultiplierIncrease);\n    const maxSbMultiplier = attackMultiplier + sbMultiplierIncrease * 6 * SB_BAR_SIZE;\n    scaleType = '@ 6 SB bars';\n    if (numAttacks) {\n      scaleToDamage = numAttacks ? describeDamage(maxSbMultiplier, numAttacks, false) : undefined;\n      if ('points' in skill) {\n        // Re-adjust the displayed number to reflect actual SB.\n        damage = describeDamage(attackMultiplier + skill.points * sbMultiplierIncrease, numAttacks);\n      }\n    }\n  } else if (m.rank) {\n    scaleType = '@ rank 1-5';\n  } else if (m.statThreshold) {\n    scaleType = formatThreshold(m.statThresholdValue, m.statThreshold);\n  } else if (m.lowHpThresholdValue) {\n    scaleType = formatThreshold(m.lowHpThresholdValue, 'HP', '%');\n  } else if (m.statusAilmentsThresholdValue) {\n    scaleType = formatThreshold(m.statusAilmentsThresholdValue, 'statuses');\n  } else if (m.scaleWithUses) {\n    const count = numAttacksRange\n      ? numAttacksRange.length\n      : m.altAttackMultiplier\n      ? countMatches(m.altAttackMultiplier, /\\//g) + 1\n      : undefined;\n    scaleType = formatUseCount(count);\n  } else if (m.finisherAttackThresholdCount) {\n    scaleType =\n      formatThreshold(\n        m.finisherAttackThresholdCount,\n        formatSchoolOrAbilityList(m.finisherAttackThresholdType),\n      ) + ' used';\n  } else if (m.attackThresholdType) {\n    scaleType = formatThreshold(\n      m.attackThresholdCount,\n      formatSchoolOrAbilityList(m.attackThresholdType) + ' used',\n    );\n  } else if (m.simpleAttackThresholdCount) {\n    scaleType = formatThreshold(m.simpleAttackThresholdCount, 'atks');\n  } else if (m.differentAbilityType) {\n    scaleType = formatThreshold(\n      m.differentAbilityValue,\n      'diff. ' + getSchoolShortName(m.differentAbilityType) + ' abils.',\n    );\n  } else if (m.statBreakCount) {\n    scaleType = formatThreshold(m.statBreakCount, 'stats lowered');\n  } else if (m.scaleWithSkillUses) {\n    if (burstCommands && burstCommands.filter(i => i.name === m.scaleWithSkillUses)) {\n      // Do nothing on the receiving end - the other command will get text from\n      // the main function.\n      scaleType = undefined;\n    } else {\n      scaleType = 'w/ ' + m.scaleWithSkillUses + ' uses';\n    }\n  } else if (m.statusThreshold) {\n    let statusThresholdCount: string = m.statusThresholdCount;\n\n    // If the status threshold is the same as the prereq status, or if this is\n    // an EnlirOtherSkill that is granted by the status threshold, then we can\n    // filter out \"0\" from the possible actions.\n    const isOwnStatusThreshold =\n      'source' in skill && skill.source.replace(/ [0-9\\/]+$/, '') === m.statusThreshold;\n    if (prereqStatus === m.statusThreshold || isOwnStatusThreshold) {\n      statusThresholdCount = m.statusThresholdCount.replace(/^0\\//, '');\n      if (statusThresholdCount !== m.statThreshold) {\n        damage = damage.replace(new RegExp('^.*?' + thresholdJoin), '');\n      }\n    }\n\n    scaleType = formatThreshold(\n      statusThresholdCount,\n      isOwnStatusThreshold ? 'stacks' : describeEnlirStatus(m.statusThreshold),\n    );\n  } else if (m.tookHits) {\n    scaleType = formatThreshold(\n      m.tookHitsValue,\n      m.tookHits.split(orList).join('/') + ' hits taken',\n    );\n  } else if (m.scaleType && m.scaleToAttackMultiplier && numAttacks && isConvergent(m.scaleType)) {\n    const scaleFactor = isSoulBreak(skill) ? sbConvergentScaleFactor : otherConvergentScaleFactor;\n    damage = describeConvergentDamage(\n      +m.attackMultiplier,\n      +m.scaleToAttackMultiplier,\n      numAttacks,\n      scaleFactor,\n    );\n    scaleType = convergentScaleType;\n  } else {\n    if (m.scaleType) {\n      scaleType = describeScaleType(m.scaleType);\n    }\n    if (m.scaleToAttackMultiplier && numAttacks) {\n      // Omit number of attacks - it's always the same as the main attack.\n      scaleToDamage = describeDamage(scaleToAttackMultiplier, numAttacks, false);\n    }\n  }\n\n  const defaultDamage =\n    m.defaultMultiplier && numAttacks\n      ? describeDamage(m.defaultMultiplier, numAttacks, false)\n      : undefined;\n\n  const additionalDamage = m.additionalDamage\n    ? m.additionalDamage.split(/\\//g).map((i: string) => +i)\n    : undefined;\n\n  const additionalCrit = m.additionalCrit\n    ? m.additionalCrit.split(/\\//g).map((i: string) => +i)\n    : undefined;\n\n  return {\n    isAoE: m.attackType === 'group',\n    damageType: describeDamageType(skill),\n\n    numAttacks,\n    attackMultiplier,\n    damage,\n    randomChances,\n    minDamage: m.minDamage ? +m.minDamage : undefined,\n    defaultDamage,\n\n    orDamage,\n    orCondition,\n\n    scaleToDamage,\n    scaleType,\n\n    hybridDamage,\n    hybridDamageType: describeHybridDamageType(skill),\n\n    additionalDamage,\n    additionalDamageType: additionalDamage\n      ? describeAdditionalDamageType(m, additionalDamage)\n      : undefined,\n    additionalCrit,\n    additionalCritType: m.additionalCritType\n      ? describeAdditionalCritType(m, additionalCrit)\n      : undefined,\n    additionalCritDamage: m.additionalCritDamage ? +m.additionalCritDamage : undefined,\n\n    element: skill.element,\n    school: 'school' in skill ? skill.school : undefined,\n\n    status: m.status || undefined,\n    statusChance: m.statusChance ? +m.statusChance : undefined,\n    statusDuration: m.statusDuration ? +m.statusDuration : undefined,\n\n    isFixedDamage: m.fixedDamage,\n    isRanged: isRanged && !isJump,\n    isJump,\n    isOverstrike: !!m.overstrike,\n    isSummon: skill.type === 'SUM',\n    isNat: skill.type === 'NAT' && skill.formula !== 'Hybrid',\n    isNoMiss: !!m.noMiss,\n    isPiercing: !!m.piercing,\n  };\n}\n","/**\n * @file\n * Text processing logic for splitting up Enlir strings into lists\n */\n\nimport { andList } from './util';\n\n/**\n *\n * Stats are 3-letter uppercase.  We also handle cases like\n * \"Different DEF and RES +X%\".\n */\nconst isStat = (effect: string) => !!effect.match(/^(?:Different )?[A-Z]{3}$/);\n\nconst isStatMod = (effect: string) => !!effect.match(/\\b[A-Z]{3} [+-]?\\d+%/);\n\nfunction isSameEffect(prev: string, next: string) {\n  // General case: lists of comma-separated items, with each item being one or\n  // two words.  But don't include stat mods - those are small but should be\n  // kept separate.\n  if (prev.match(/^(\\S+ )?\\S+$/) && !isStatMod(prev)) {\n    return true;\n  }\n  return false;\n}\n\n/**\n *\n * Split a list of effects from an EnlirStatus into their component parts.\n *\n * This is mostly just splitting on commas, but embedded commas complicate\n * things.\n */\nexport function splitStatusEffects(effects: string): string[] {\n  const result: string[] = [];\n\n  // Process the list in reverse order, because we look for the \"or\" or \"and\"\n  // at the end of an embedded list then work backwards to add strings that we\n  // think should be included.\n  const parts = effects.split(/, /).reverse();\n\n  for (let i = 0; i < parts.length; i++) {\n    let thisPart = parts[i];\n\n    // Handle conditionals like Haurchefant Cover.\n    if (parts[i].startsWith('While ')) {\n      result[result.length - 1] = parts[i] + ', ' + result[result.length - 1];\n      continue;\n    }\n\n    // Stoneskin, for example, is described as \", up to 30%\".  That should be\n    // part of the previous clause.\n    if (parts[i].startsWith('up to ') && i + 1 < parts.length) {\n      thisPart = parts[i + 1] + ', ' + thisPart;\n      i++;\n    }\n\n    // Handle comma-separated lists.  See isSameEffect.\n    if (parts[i].match(/^\\S+,? +(and|or)/)) {\n      while (i + 1 < parts.length && isSameEffect(parts[i + 1], thisPart)) {\n        thisPart = parts[i + 1] + ', ' + thisPart;\n        i++;\n      }\n\n      if (\n        i + 1 < parts.length &&\n        !isStatMod(parts[i + 1]) &&\n        // This keeps Burst Mode's bonuses separate from the rest of its\n        // effects.\n        !isStatMod(thisPart) &&\n        // Special case - separate Awoken Lucis King's rank boost separate from\n        // its dualcast list.\n        !parts[i + 1].match(/\\d+$/)\n      ) {\n        thisPart = parts[i + 1] + ', ' + thisPart;\n        i++;\n      }\n    }\n\n    result.push(thisPart);\n  }\n  return result.reverse();\n}\n\n/**\n * Splits the status effects section of a skill's effects string\n */\nexport function splitSkillStatuses(effects: string): string[] {\n  const parts = effects.split(andList).reverse();\n  const result: string[] = [];\n\n  for (let i = 0; i < parts.length; i++) {\n    let thisPart = parts[i];\n\n    let join = ' and ';\n    while (i + 1 < parts.length && isStat(parts[i + 1])) {\n      thisPart = parts[i + 1] + join + thisPart;\n      i++;\n      join = ', ';\n    }\n\n    result.push(thisPart);\n  }\n\n  return result.reverse();\n}\n","import * as React from 'react';\n\nimport classNames from 'classnames';\nimport * as _ from 'lodash';\n\nimport { enlir, EnlirSoulBreak, EnlirSoulBreakTier, makeSoulBreakAliases } from '../../data/enlir';\nimport { describeEnlirSoulBreak, formatMrP, MrPSoulBreak } from '../../data/mrP';\nimport { formatBraveCommands } from '../../data/mrP/brave';\nimport { getSchoolShortName, getShortName } from '../../data/mrP/types';\n\nexport const styles = require('./SoulBreakListItem.scss');\n\nexport const tierClass: { [tier in EnlirSoulBreakTier]: string | undefined } = {\n  SB: styles.unique,\n  SSB: styles.super,\n  BSB: styles.burst,\n  OSB: styles.overstrike,\n  AOSB: styles.overstrike,\n  USB: styles.ultra,\n  CSB: styles.chain,\n  AASB: styles.awakening,\n  Glint: styles.glint,\n  'Glint+': styles.glint,\n\n  // Unused - placeholders\n  Default: styles.unique,\n  RW: styles.unique,\n  Shared: styles.unique,\n};\n\nexport const soulBreakAliases = makeSoulBreakAliases(enlir.soulBreaks, {\n  Default: '-',\n  SB: '-',\n  SSB: 'S',\n  BSB: 'B',\n  OSB: 'O',\n  AOSB: 'AO',\n  Glint: 'G',\n  'Glint+': 'G+',\n  USB: 'U',\n  CSB: 'C',\n  AASB: 'AA',\n  RW: '-',\n  Shared: '-',\n});\n\nexport function getBraveColumns(\n  mrP: MrPSoulBreak,\n  braveCommands: MrPSoulBreak[],\n): [string, string] {\n  return [\n    '[' +\n      (braveCommands[0].school ? getSchoolShortName(braveCommands[0].school) : '?') +\n      '], +1 on ' +\n      mrP.braveCondition!.map(getShortName).join('/'),\n    formatBraveCommands(braveCommands),\n  ];\n}\n\nexport function getBurstColumns(burstCommands: MrPSoulBreak[]): Array<[string, string]> {\n  return burstCommands.map(\n    cmd =>\n      [\n        '[' + (cmd.school ? getSchoolShortName(cmd.school) : '?') + ']',\n        '[' + formatMrP(cmd) + ']',\n      ] as [string, string],\n  );\n}\n\ninterface Props {\n  soulBreak: EnlirSoulBreak;\n  className?: string;\n}\n\nconst mrPSoulBreaks: { [id: number]: MrPSoulBreak } = {};\n\nexport class SoulBreakListItem extends React.Component<Props> {\n  renderBraveCommands(mrP: MrPSoulBreak, braveCommands: MrPSoulBreak[]) {\n    const columns = getBraveColumns(mrP, braveCommands);\n    return (\n      <tr className={classNames(this.props.className, styles.braveCommand)}>\n        <td />\n        <td>{columns[0]}</td>\n        <td>{columns[1]}</td>\n      </tr>\n    );\n  }\n\n  renderBurstCommands(burstCommands: MrPSoulBreak[]) {\n    return (\n      <>\n        {getBurstColumns(burstCommands).map((columns, i) => (\n          <tr className={classNames(this.props.className, styles.burstCommand)} key={i}>\n            <td />\n            <td className={styles.school}>{columns[0]}</td>\n            <td className={styles.command}>{columns[1]}</td>\n          </tr>\n        ))}\n      </>\n    );\n  }\n\n  render() {\n    const { soulBreak, className } = this.props;\n\n    if (!mrPSoulBreaks[soulBreak.id]) {\n      mrPSoulBreaks[soulBreak.id] = describeEnlirSoulBreak(soulBreak);\n    }\n    const mrP = mrPSoulBreaks[soulBreak.id];\n\n    const name = soulBreak.gl ? soulBreak.name : '“' + soulBreak.name + '”';\n    const text = formatMrP(mrP);\n    const alias = (soulBreakAliases[soulBreak.id] || soulBreak.tier).replace('-', '');\n    const fullClassName = classNames(className, tierClass[soulBreak.tier], {\n      [styles.jp]: !soulBreak.gl,\n    });\n    return (\n      <>\n        <tr className={fullClassName}>\n          <td className={styles.tier}>{alias}</td>\n          <td className={styles.name}>{name}</td>\n          <td>{text || '???'}</td>\n        </tr>\n        {mrP.braveCommands && this.renderBraveCommands(mrP, mrP.braveCommands)}\n        {mrP.burstCommands && this.renderBurstCommands(mrP.burstCommands)}\n      </>\n    );\n  }\n}\n","import * as React from 'react';\nimport { hydrate, render } from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\n\nimport { Root } from './containers/Root';\nimport { initializeGlobalStyles } from './globalStyles';\nimport { configureStore, history } from './store/configureStore';\n\nconst store = configureStore(require('./tmp/store.json'));\n\nconst rootElement = document.getElementById('root')!;\ninitializeGlobalStyles(rootElement);\nconst renderOrHydrate = rootElement.hasChildNodes() ? hydrate : render;\n\nrenderOrHydrate(\n  <AppContainer>\n    <Root store={store} history={history} />\n  </AppContainer>,\n  rootElement,\n);\n\nif ((module as any).hot) {\n  (module as any).hot.accept('./containers/Root', () => {\n    // noinspection JSUnusedLocalSymbols\n    const NextRoot = require('./containers/Root').default;\n    render(\n      <AppContainer>\n        <NextRoot store={store} history={history} />\n      </AppContainer>,\n      document.getElementById('root'),\n    );\n  });\n}\n","import * as React from 'react';\nimport { Provider } from 'react-redux';\nimport { Store } from 'redux';\n\nimport { ConnectedRouter } from 'connected-react-router';\nimport { History } from 'history';\n\nimport { IState } from '../reducers';\nimport { Routes } from './Routes';\n\ninterface IRootType {\n  store: Store<IState>;\n  history: History;\n}\n\nexport function Root({ store, history }: IRootType) {\n  return (\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <Routes />\n      </ConnectedRouter>\n    </Provider>\n  );\n}\n","import * as React from 'react';\nimport { Route, Switch } from 'react-router';\n\nimport { routes } from '../routes';\nimport App from './App';\n\nexport const Routes = () => (\n  <App>\n    <Switch>\n      {routes.map(({ path, component }, i) => (\n        <Route path={path} component={component} key={i} />\n      ))}\n    </Switch>\n  </App>\n);\n","import { AppMoreInfoPage } from '../containers/AppMoreInfoPage';\nimport DungeonsPage from '../containers/DungeonsPage';\nimport RecordMateriaPage from '../containers/RecordMateriaPage';\nimport RelicDrawsPage from '../containers/RelicDrawsPage';\nimport SiteHomePage from '../containers/SiteHomePage';\nimport SoulBreaksPage from '../containers/SoulBreaksPage';\nimport { RouteItem } from './types';\n\nconst routes: RouteItem[] = [\n  {\n    component: DungeonsPage,\n    description: 'Dungeons',\n    path: '/dungeons',\n  },\n  {\n    component: RecordMateriaPage,\n    description: 'Record Materia',\n    path: '/recordMateria',\n  },\n  {\n    component: SoulBreaksPage,\n    description: 'Soul Breaks',\n    path: '/soulBreaks',\n  },\n  {\n    component: RelicDrawsPage,\n    description: 'Relic Draws',\n    path: '/relicDraws',\n  },\n  {\n    component: AppMoreInfoPage,\n    description: null,\n    path: '/appMoreInfo',\n  },\n  {\n    component: SiteHomePage,\n    description: null,\n    path: '/',\n  },\n];\n\nexport default routes;\n","import * as React from 'react';\n\nimport { DonationInfo } from '../components/DonationInfo';\nimport { AppMoreInfo } from '../components/home/AppMoreInfo';\nimport { Page } from './Page';\n\nexport class AppMoreInfoPage extends React.Component {\n  renderFooter = () => <DonationInfo />;\n\n  render() {\n    return (\n      <Page title=\"The RK² Application\" footer={this.renderFooter}>\n        <AppMoreInfo />\n      </Page>\n    );\n  }\n}\n\nexport default AppMoreInfo;\n","import * as React from 'react';\n\nimport { AppFeatures } from './AppFeatures';\n\nexport const AppMoreInfo = () => (\n  <>\n    <p>Current features:</p>\n    <AppFeatures />\n\n    <p>\n      RK Squared runs as a proxy: It runs on your PC and Mac, and you configure your phone, tablet,\n      or emulator to connect through it, so that it can track your game status.\n    </p>\n    <p>Both Android and iOS versions of FFRK are supported.</p>\n    <p>\n      Both the global (GL) and Japanese (JP) versions of FFRK are supported. However, a running copy\n      of RK² only supports a single FFRK profile, so trying to use one copy to track both GL and JP\n      will cause confusion.\n    </p>\n\n    <h3>Security Note</h3>\n\n    <p>\n      FFRK for iOS encrypts its data, so, in order for RK² to work for iOS, it needs to be able to\n      decrypt HTTPS traffic. As a general rule, you should be very cautious in granting software the\n      ability to do this, and you should only do it with software you trust. (RK² is designed so\n      that it can only decrypt FFRK traffic, which should help with any security concerns. In\n      technical terms, it generates a private CA (certificate authority); then it uses that CA to\n      create and save a certificate for ffrk.denagames.com, so that it can decrypt FFRK traffic;\n      then it discards the CA key, so that it can't create certificates for any other sites.)\n    </p>\n\n    <h3>Known Issues</h3>\n\n    <p>\n      RK² currently only supports a single FFRK profile. So, for example, if you play both GL and\n      JP, you'll need to find a way to run two copies of RK² (for example, use two different\n      laptops, or two different PC accounts, or manually copy RK²'s config.json depending on which\n      profile you're playing).\n    </p>\n  </>\n);\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { hideMessage as hideMessageAction, Message } from '../actions/messages';\nimport MessageBox from '../components/MessageBox';\nimport { IState } from '../reducers';\n\ninterface Props {\n  messages: Message[];\n  hideMessage: (id: number) => any;\n}\n\nexport class MessagesList extends React.Component<Props> {\n  render() {\n    const { messages, hideMessage } = this.props;\n    const messageIds = Object.keys(messages).sort();\n    return (\n      <>\n        {messageIds.map(i => <MessageBox key={i} message={messages[+i]} onClose={() => hideMessage(+i)}/>)}\n      </>\n    );\n  }\n}\n\nexport default connect(\n  (state: IState) => ({ messages: state.messages.messages}),\n  {\n    hideMessage: hideMessageAction\n  }\n)(MessagesList);\n","import * as React from 'react';\n\nimport { Message } from '../actions/Messages';\n\ninterface Props {\n  message: Message;\n  onClose?: () => any;\n}\n\nexport default class MessageBox extends React.Component<Props> {\n  render() {\n    const {\n      message: { text, color },\n      onClose,\n    } = this.props;\n    return (\n      <div className={`alert alert-${color}`} role=\"alert\">\n        {onClose && (\n          <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={onClose}>\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        )}\n        {text}\n      </div>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"m2d5bLhVAbJJ8gpZBoC3i\",\"content\":\"HvagO--BXqnFHRa2LWZ0\",\"footer\":\"_3lludC_cOnMneW_EGSjNuG\"};","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\n\nimport { loadDungeons } from '../actions/dungeons';\nimport { World } from '../actions/worlds';\nimport { IState } from '../reducers';\n\nimport { BrowserLink } from '../components/common/BrowserLink';\nimport { DungeonsList } from '../components/dungeons/DungeonsList';\nimport ItemTypeChecklist from '../components/dungeons/ItemTypeChecklist';\nimport LoadMissingPrompt from '../components/shared/LoadMissingPrompt';\nimport { progressKey } from '../sagas/loadDungeons';\nimport { Page } from './Page';\n\nconst styles = require('./DungeonsPage.scss');\n\ninterface Props {\n  worlds: {\n    [id: number]: World;\n  };\n  missingWorlds: number[];\n  dispatch: Dispatch;\n}\n\nexport class DungeonsPage extends React.Component<Props> {\n  handleLoad = () => {\n    const { missingWorlds, dispatch } = this.props;\n    dispatch(loadDungeons(missingWorlds));\n  };\n\n  render() {\n    const { worlds, missingWorlds } = this.props;\n    return (\n      <Page title=\"Dungeons\">\n        <LoadMissingPrompt\n          missingCount={missingWorlds.length}\n          missingText=\"Dungeons for %s have not been loaded.\"\n          countText=\"realm or event\"\n          countPluralText=\"realms and events\"\n          loadingText=\"Loading dungeons\"\n          onLoad={this.handleLoad}\n          progressKey={progressKey}\n        />\n\n        {worlds == null ? (\n          <p>No dungeons have been loaded. Please check your proxy settings and restart FFRK.</p>\n        ) : (\n          <div className=\"row\">\n            <div className=\"col-sm-9\">\n              <DungeonsList worlds={worlds} isAnonymous={!process.env.IS_ELECTRON} />\n              <p className=\"text-muted text-right mb-0\">\n                <small>\n                  Icons by{' '}\n                  <BrowserLink href=\"https://game-icons.net/\" className=\"text-muted\">\n                    game-icons.net\n                  </BrowserLink>\n                </small>\n              </p>\n            </div>\n            <div className={`col-sm-3 ${styles.right}`}>\n              <ItemTypeChecklist title=\"Rewards\" />\n            </div>\n          </div>\n        )}\n      </Page>\n    );\n  }\n}\n\nexport default connect((state: IState) => ({\n  worlds: state.worlds.worlds,\n  // FIXME: Use reselect (I think)\n  missingWorlds: Object.keys(state.worlds.worlds || {})\n    .map(i => +i)\n    .filter(i => (state.worlds.worlds || {})[i].isUnlocked && !state.dungeons.byWorld[i]),\n}))(DungeonsPage);\n","import * as React from 'react';\n\nimport classNames from 'classnames';\n\nimport { sortOrder, World, WorldCategory } from '../../actions/worlds';\nimport { DungeonCategoryList } from './DungeonCategoryList';\n\ninterface Props {\n  className?: string;\n  worlds: {\n    [id: number]: World;\n  };\n  isAnonymous?: boolean;\n}\n\nexport class DungeonsList extends React.PureComponent<Props> {\n  render() {\n    const { className, worlds, isAnonymous } = this.props;\n    return (\n      <div className={classNames(className, 'accordion')}>\n        {sortOrder.map((category: WorldCategory, i: number) => (\n          <DungeonCategoryList\n            worlds={worlds}\n            category={category}\n            isAnonymous={isAnonymous}\n            key={i}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport * as _ from 'lodash';\n\nimport { descriptions, getSorter, World, WorldCategory } from '../../actions/worlds';\nimport { CollapsibleCard } from '../common/CollapsibleCard';\nimport { MaybeWrap } from '../common/MaybeWrap';\nimport DungeonCard from './DungeonCard';\nimport { DungeonCategoryTitle } from './DungeonCategoryTitle';\nimport WorldPrizeList from './WorldPrizeList';\n\ninterface Props {\n  worlds: {\n    [id: number]: World;\n  };\n  category: WorldCategory;\n  isAnonymous?: boolean;\n}\n\n// TODO: Include banner images?\n// E.g.:\n// http://ffrk.denagames.com/dff/static/lang/ww/compile/en/image/crystal_tower/event_list/banner/7.png\n// (determined by crystal_tower_bundles.0.bundle_id???)\n// http://ffrk.denagames.com/dff/static/lang/ww/compile/en/image/event/3026.png\n\n/**\n * Worlds grouped by subcategory.\n *\n * Subcategory may be ''.\n */\ntype WorldsBySubcategory = Array<[string, World[]]>;\n\n/**\n * Gets the list of worlds, sorted and grouped by subcategory, for the given\n * WorldCategory.\n */\nfunction getSortedWorlds(\n  worlds: { [id: number]: World },\n  category: WorldCategory,\n): WorldsBySubcategory | null {\n  // Known subcategories and their sort orders\n  const subcategories: { [s: string]: number } = {};\n  // Worlds sorted by subcategory\n  const bySubcategory: { [s: string]: World[] } = {};\n\n  _.forEach(worlds, w => {\n    if (w.category === category) {\n      // FIXME: Filter out worlds that aren't open?\n      const subcategory = w.subcategory || '';\n      subcategories[subcategory] = w.subcategorySortOrder || 0;\n      bySubcategory[subcategory] = bySubcategory[subcategory] || [];\n      bySubcategory[subcategory].push(w);\n    }\n  });\n\n  if (_.isEmpty(bySubcategory)) {\n    return null;\n  }\n  let result = _.toPairs(bySubcategory);\n\n  // Sort subcategories - by subcategory sort order if possible, and by\n  // subcategory name if not.  Blank goes first.\n  result = (_.sortBy(result, [\n    (i: any) => (i[0] === '' ? -Infinity : subcategories[i[0]]),\n    (i: any) => i[0],\n  ]) as any) as WorldsBySubcategory;\n\n  // Sort within each subcategory.\n  const sorter = getSorter(category);\n  for (const i of result) {\n    i[1] = sorter(i[1]);\n  }\n\n  return result;\n}\n\nexport class DungeonCategoryList extends React.PureComponent<Props> {\n  render() {\n    const { worlds, category, isAnonymous } = this.props;\n    const bySubcategory = getSortedWorlds(worlds, category);\n    if (bySubcategory == null) {\n      return null;\n    }\n    const categoryWorlds = _.flatten(bySubcategory.map(([subcategory, subWorlds]) => subWorlds));\n    const id = `dungeon-category-${category}`;\n    return (\n      <CollapsibleCard\n        id={id}\n        titleClassName=\"text-decoration-none\"\n        title={() => (\n          <DungeonCategoryTitle\n            category={category}\n            title={descriptions[category]}\n            worlds={categoryWorlds}\n            isAnonymous={isAnonymous}\n          />\n        )}\n      >\n        <div className=\"accordion\">\n          <WorldPrizeList worlds={categoryWorlds} isAnonymous={isAnonymous} />\n          {bySubcategory.map(([subcategory, subWorlds], i) => (\n            <MaybeWrap\n              component={CollapsibleCard}\n              test={subcategory !== ''}\n              id={`${id}-${i}`}\n              key={i}\n              title={() => (\n                <DungeonCategoryTitle\n                  title={subcategory}\n                  worlds={subWorlds}\n                  isAnonymous={isAnonymous}\n                />\n              )}\n            >\n              <div>\n                {subcategory !== '' && (\n                  <WorldPrizeList worlds={subWorlds} isAnonymous={isAnonymous} />\n                )}\n                <div className=\"accordion\">\n                  {subWorlds.map((w, j) => (\n                    <DungeonCard world={w} isAnonymous={isAnonymous} key={j} />\n                  ))}\n                </div>\n              </div>\n            </MaybeWrap>\n          ))}\n        </div>\n      </CollapsibleCard>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_1ceGmdU9jkhrpaH5-itVxK\"};","import * as React from 'react';\n\ninterface Props {\n  test: boolean;\n  component: React.ComponentClass<any> | React.StatelessComponent<any>;\n  children: any;\n}\n\nexport class MaybeWrap extends React.Component<Props & any> {\n  render() {\n    const { test, component: Component, children, ...props } = this.props;\n    const child = React.Children.only(children);\n    if (test) {\n      return (\n        <Component {...props}>\n          {child}\n        </Component>\n      );\n    } else {\n      return child;\n    }\n  }\n}\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport * as ReactTooltip from 'react-tooltip';\n\nimport classNames from 'classnames';\n\nimport { Dungeon, formatDifficulty } from '../../actions/dungeons';\nimport { World } from '../../actions/worlds';\nimport { LangType } from '../../api/apiUrls';\nimport { localIcons } from '../../data/localData';\nimport { seriesIcon } from '../../data/urls';\nimport { IState } from '../../reducers';\nimport { getDungeonsForWorld } from '../../reducers/dungeons';\nimport { CollapsibleCard } from '../common/CollapsibleCard';\nimport { DungeonBadge } from './DungeonBadge';\nimport { getProcessor, rewardsTitle } from './DungeonCommon';\nimport DungeonPrizeList from './DungeonPrizeList';\nimport { PrizeList } from './PrizeList';\n\nconst styles = require('./DungeonCard.scss');\n\ninterface Props {\n  world: World;\n  isAnonymous?: boolean;\n}\n\ninterface ConnectedProps extends Props {\n  dungeons: Dungeon[];\n}\n\nconst DungeonCardTitle = ({\n  world,\n  dungeons,\n  isAnonymous,\n}: {\n  world: World;\n  dungeons: Dungeon[];\n  isAnonymous?: boolean;\n}) => (\n  <span className={styles.titleText}>\n    {world.name}\n    <DungeonBadge dungeons={dungeons} isAnonymous={isAnonymous} />\n  </span>\n);\n\nconst DungeonDetails = ({ dungeon }: { dungeon: Dungeon }) => (\n  <p className={styles.details}>\n    <span>Difficulty {formatDifficulty(dungeon)}</span>\n    <span>Stamina {dungeon.totalStamina}</span>\n  </p>\n);\n\nexport const DungeonListItem = ({\n  dungeon,\n  isAnonymous,\n}: {\n  dungeon: Dungeon;\n  isAnonymous?: boolean;\n}) => {\n  const { hasPrizes, completed, mastered, getPrizes } = getProcessor(isAnonymous).getInfo(dungeon);\n  const classes = classNames({\n    [styles.completed]: completed,\n    [styles.mastered]: mastered,\n  });\n  const id = `dungeon-item-${dungeon.id}`;\n  const showDetails = !mastered;\n  const showTooltip = hasPrizes;\n  return (\n    <li className={classes}>\n      <div data-tip={showTooltip} data-for={id}>\n        {dungeon.name}\n        {showDetails && <DungeonDetails dungeon={dungeon} />}\n      </div>\n      {showTooltip && (\n        <ReactTooltip place=\"bottom\" id={id}>\n          <PrizeList prizes={getPrizes(dungeon)} />\n        </ReactTooltip>\n      )}\n    </li>\n  );\n};\n\n/**\n * Lists all of the dungeons for a single world.\n */\nexport class DungeonCard extends React.PureComponent<ConnectedProps> {\n  render() {\n    const { world, dungeons, isAnonymous } = this.props;\n    const noMessage = dungeons\n      ? undefined\n      : isAnonymous\n      ? 'Not yet available.'\n      : !world.isUnlocked\n      ? 'You have not yet entered these dungeons.'\n      : 'These dungeons have not been loaded.';\n\n    let icon: string | null;\n    let isSeriesIcon = false;\n    if (world.iconUrl) {\n      icon = world.iconUrl;\n    } else if (world.localIcon && localIcons[world.localIcon]) {\n      icon = localIcons[world.localIcon];\n    } else {\n      // For speed and simplicity, hard-code icons for GL.\n      icon = seriesIcon(LangType.Gl, world.seriesId);\n      isSeriesIcon = true;\n    }\n\n    // TODO: Rework tooltips?  They may be faster if we only render 1 per card.\n    // See TormentGrid for the newer approach I'm using.\n    return (\n      <CollapsibleCard\n        id={`world-${world.id}-dungeons`}\n        title={() => (\n          <DungeonCardTitle world={world} dungeons={dungeons} isAnonymous={isAnonymous} />\n        )}\n        titleClassName={classNames(styles.title, { [styles.seriesIcon]: isSeriesIcon })}\n        titleStyle={{ backgroundImage: icon ? `url(${icon}` : undefined }}\n      >\n        {noMessage ? (\n          <p className=\"mb-0\">{noMessage}</p>\n        ) : (\n          <div className=\"row\">\n            <div className=\"col-lg\">\n              <h6>Dungeons</h6>\n              <ul className=\"mb-0\">\n                {dungeons.map((d, i) => (\n                  <DungeonListItem dungeon={d} key={i} isAnonymous={isAnonymous} />\n                ))}\n              </ul>\n            </div>\n            <div className=\"col-lg\">\n              <h6>{rewardsTitle(isAnonymous)}</h6>\n              <DungeonPrizeList dungeons={dungeons} isAnonymous={isAnonymous} className=\"mb-0\" />\n            </div>\n          </div>\n        )}\n      </CollapsibleCard>\n    );\n  }\n}\n\nexport default connect((state: IState, ownProps: Props) => ({\n  dungeons: getDungeonsForWorld(state.dungeons, ownProps.world.id),\n}))(DungeonCard);\n","export const localIcons: { [s: string]: string } = {\n  darkElement: require('../images/ffrk-icons/dark.png'),\n  earthElement: require('../images/ffrk-icons/earth.png'),\n  fireElement: require('../images/ffrk-icons/fire.png'),\n  holyElement: require('../images/ffrk-icons/holy.png'),\n  iceElement: require('../images/ffrk-icons/ice.png'),\n  lightningElement: require('../images/ffrk-icons/lightning.png'),\n  poisonElement: require('../images/ffrk-icons/poison.png'),\n  waterElement: require('../images/ffrk-icons/water.png'),\n  windElement: require('../images/ffrk-icons/wind.png'),\n};\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","import * as _ from 'lodash';\n\nexport interface DressRecord {\n  id: number;\n  characterId: number;\n  name: string;\n}\n\n// TODO: Implement a way to handle previously unknown dress records\n\nexport const dressRecords: DressRecord[] = [\n  {\n    name: 'Black-Robed Keeper',\n    id: 120000100,\n    characterId: 10000200,\n  },\n  {\n    name: 'Classic Crimson',\n    id: 120100100,\n    characterId: 10100100,\n  },\n  {\n    name: 'Chosen of Feymarch',\n    id: 120400100,\n    characterId: 10400400,\n  },\n  {\n    name: 'Holy Dragoon',\n    id: 120400200,\n    characterId: 10400300,\n  },\n  {\n    name: 'Cosmic Paladin',\n    id: 120400300,\n    characterId: 10400200,\n  },\n  {\n    name: 'Grown-Up Palom',\n    id: 120400400,\n    characterId: 10400900,\n  },\n  {\n    name: 'Grown-Up Porom',\n    id: 120400500,\n    characterId: 10401000,\n  },\n  {\n    name: 'Freelancer Lenna',\n    id: 120500100,\n    characterId: 10500200,\n  },\n  {\n    name: 'Freelancer Galuf',\n    id: 120500200,\n    characterId: 10500500,\n  },\n  {\n    name: 'Beastmaster Krile',\n    id: 120500300,\n    characterId: 10501200,\n  },\n  {\n    name: 'Princess Sarisa',\n    id: 120500400,\n    characterId: 10500900,\n  },\n  {\n    name: 'Knight Bartz',\n    id: 120500500,\n    characterId: 10500800,\n  },\n  {\n    name: 'Opera Star',\n    id: 120600100,\n    characterId: 10600400,\n  },\n  {\n    name: 'Cosmic Elite',\n    id: 120600300,\n    characterId: 10600100,\n  },\n  {\n    name: 'Cloudy Wolf',\n    id: 120700100,\n    characterId: 10700100,\n  },\n  {\n    name: 'Executioner',\n    id: 120700200,\n    characterId: 10701000,\n  },\n  {\n    name: 'Leather Suit',\n    id: 120700300,\n    characterId: 10700300,\n  },\n  {\n    name: 'KINGDOM HEARTS Cloud',\n    id: 120700600,\n    characterId: 10700100,\n  },\n  {\n    name: 'SeeD Uniform',\n    id: 120800100,\n    characterId: 10800100,\n  },\n  {\n    name: 'Waltz for the Moon',\n    id: 120800200,\n    characterId: 10800200,\n  },\n  {\n    name: 'KINGDOM HEARTS Leon',\n    id: 120800300,\n    characterId: 10800100,\n  },\n  {\n    name: 'Show of Resolve',\n    id: 120900100,\n    characterId: 10900200,\n  },\n  {\n    name: 'Gunner Garb',\n    id: 121000100,\n    characterId: 11000200,\n  },\n  {\n    name: 'Young Auron',\n    id: 121000200,\n    characterId: 11000700,\n  },\n  {\n    name: 'Thief',\n    id: 121000300,\n    characterId: 11000600,\n  },\n  {\n    name: 'False Bride',\n    id: 121000400,\n    characterId: 11000200,\n  },\n  {\n    name: 'Dreams of Glory',\n    id: 121000500,\n    characterId: 11000100,\n  },\n  {\n    name: 'Knight of Etro',\n    id: 121300100,\n    characterId: 11300100,\n  },\n  {\n    name: 'Academy Uniform',\n    id: 121300200,\n    characterId: 11300500,\n  },\n  {\n    name: 'Seeker of Truth',\n    id: 125000100,\n    characterId: 15000100,\n  },\n  {\n    name: 'Knight Delita',\n    id: 125000200,\n    characterId: 15000300,\n  },\n  {\n    name: 'KINGDOM HEARTS III Sora',\n    id: 127000100,\n    characterId: 17000100,\n  },\n  {\n    name: 'KINGDOM HEARTS III Riku',\n    id: 127000200,\n    characterId: 17000200,\n  },\n];\n\nexport const dressRecordsById = _.zipObject(dressRecords.map(i => i.id), dressRecords);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_1MB0HoF8F8qsY5qHw_v-Gj\"};","import * as React from 'react';\nimport * as ReactTooltip from 'react-tooltip';\n\nimport * as _ from 'lodash';\n\nimport { describeRelicStats, enlir } from '../../data/enlir';\nimport { formatRelicName } from '../../data/items';\nimport { separateWithBr } from '../common/BrText';\n\ninterface Props {\n  id: string;\n  relicId: number;\n}\n\nexport class RelicTooltip extends React.PureComponent<Props & any> {\n  render() {\n    const { id, relicId, ...props } = this.props;\n    const relic = enlir.relics[relicId];\n    if (!relic) {\n      return null;\n    }\n\n    const lines = _.filter([\n      `${relic.rarity}★ ${relic.type}`,\n      describeRelicStats(relic),\n      relic.effect,\n    ]);\n\n    return (\n      <ReactTooltip id={id} {...props}>\n        <strong>{formatRelicName(relic)}</strong>\n        <br />\n        {separateWithBr(lines)}\n      </ReactTooltip>\n    );\n  }\n}\n","import * as React from 'react';\n\nexport const separateWithBr = (lines: any[]) => {\n  const result: any[] = [];\n  for (let i = 0; i < lines.length; i++) {\n    if (result.length) {\n      result.push(<br key={i} />);\n    }\n    result.push(lines[i]);\n  }\n  return result;\n};\n\nexport class BrText extends React.PureComponent<{ text: string }> {\n  render() {\n    const lines = this.props.text.split('<br>');\n\n    const result = [];\n    for (const i of lines) {\n      if (result.length) {\n        result.push(<br />);\n      }\n      result.push(i);\n    }\n\n    return <>{result}</>;\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_3zo-wLJnq2tFvG6bLK5q-h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mastered\":\"_2A7_PDjn-V5Xp47gY1sJMy\",\"details\":\"_6pmAtHknvDEstl3ujod8k\",\"title\":\"_194nssXP9Dv-W7r5FlZSWA\",\"seriesIcon\":\"_1Vsbr5sni5GUbqR2Mgmfna\",\"titleText\":\"_1UT8lcbZHIWwoxtJojxrUc\"};","import * as React from 'react';\n\nimport { World, WorldCategory } from '../../actions/worlds';\nimport WorldBadge from './WorldBadge';\n\nconst styles = require('./DungeonCategoryTitle.scss');\n\nconst categoryImages: { [category: string]: string } = {\n  [WorldCategory.CrystalTower]: require('../../images/game-icons/white-tower.svg'),\n  [WorldCategory.Event]: require('../../images/game-icons/book-cover.svg'),\n  [WorldCategory.JumpStart]: require('../../images/game-icons/lob-arrow.svg'),\n  [WorldCategory.PowerUpMote]: require('../../images/game-icons/orb-direction.svg'),\n  [WorldCategory.Magicite]: require('../../images/game-icons/triple-yin.svg'),\n  [WorldCategory.Newcomer]: require('../../images/game-icons/big-egg.svg'),\n  [WorldCategory.Nightmare]: require('../../images/game-icons/spectre.svg'),\n  [WorldCategory.Raid]: require('../../images/game-icons/swords-emblem.svg'),\n  [WorldCategory.Realm]: require('../../images/game-icons/closed-doors.svg'),\n  [WorldCategory.Record]: require('../../images/game-icons/galleon.svg'),\n  [WorldCategory.Renewal]: require('../../images/game-icons/calendar.svg'),\n  [WorldCategory.SpecialEvent]: require('../../images/game-icons/star-formation.svg'),\n  [WorldCategory.Torment]: require('../../images/game-icons/daemon-skull.svg'),\n};\n\ninterface Props {\n  category?: WorldCategory;\n  title: string;\n  worlds: World[];\n  isAnonymous?: boolean;\n}\n\nexport const DungeonCategoryTitle = ({ category, title, worlds, isAnonymous }: Props) => (\n  <div className={`d-flex justify-content-between align-items-center ${styles.component}`}>\n    <div className={styles.titleText}>\n      {category != null && (\n        <img\n          src={categoryImages[category]}\n          width={40}\n          height={40}\n          style={{ paddingRight: '0.5em' }}\n          alt=\"\"\n        />\n      )}\n      {title}\n    </div>\n    <WorldBadge worlds={worlds} isAnonymous={isAnonymous} />\n  </div>\n);\n","import { connect } from 'react-redux';\n\nimport { World } from '../../actions/worlds';\nimport { IState } from '../../reducers';\nimport { getDungeonsForWorlds } from '../../reducers/dungeons';\nimport { DungeonBadge } from './DungeonBadge';\n\ninterface Props {\n  worlds: World[];\n  isAnonymous?: boolean;\n}\n\nexport default connect((state: IState, { worlds }: Props) => ({\n  dungeons: getDungeonsForWorlds(state.dungeons, worlds),\n}))(DungeonBadge);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_2Q7w_VmD3w6S19OE4pCYpm\",\"titleText\":\"_2tzzdkPmQ-T9yJs0Funjp6\"};","module.exports = __webpack_public_path__ + \"static/media/white-tower.f14cba96.svg\";","module.exports = __webpack_public_path__ + \"static/media/book-cover.e880e83d.svg\";","module.exports = __webpack_public_path__ + \"static/media/lob-arrow.3d438e0c.svg\";","module.exports = __webpack_public_path__ + \"static/media/orb-direction.77050878.svg\";","module.exports = __webpack_public_path__ + \"static/media/triple-yin.7837e71f.svg\";","module.exports = __webpack_public_path__ + \"static/media/big-egg.a05a518a.svg\";","module.exports = __webpack_public_path__ + \"static/media/spectre.b64752a1.svg\";","module.exports = __webpack_public_path__ + \"static/media/swords-emblem.c8681270.svg\";","module.exports = __webpack_public_path__ + \"static/media/closed-doors.1e3249ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/galleon.4d50754e.svg\";","module.exports = __webpack_public_path__ + \"static/media/calendar.2daa8e13.svg\";","module.exports = __webpack_public_path__ + \"static/media/star-formation.f5aeba4b.svg\";","module.exports = __webpack_public_path__ + \"static/media/daemon-skull.ccc9ad91.svg\";","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { Dungeon } from '../../actions/dungeons';\nimport { World } from '../../actions/worlds';\nimport { IState } from '../../reducers';\nimport { getDungeonsForWorlds } from '../../reducers/dungeons';\n\nimport { ModalDialog } from '../common/ModalDialog';\nimport { rewards, rewardsTitle } from './DungeonCommon';\nimport DungeonPrizeList from './DungeonPrizeList';\nimport ItemTypeChecklist from './ItemTypeChecklist';\n\nconst styles = require('./WorldPrizeList.scss');\n\ninterface StateProps {\n  dungeons: Dungeon[];\n}\n\ninterface OwnProps {\n  worlds: World[];\n  isAnonymous?: boolean;\n}\n\ninterface State {\n  isOpen: boolean;\n}\n\nexport class WorldPrizeList extends React.Component<StateProps & OwnProps, State> {\n  constructor(props: StateProps & OwnProps) {\n    super(props);\n    this.state = {\n      isOpen: false,\n    };\n  }\n\n  handleOpen = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    this.setState({ isOpen: true });\n  };\n\n  handleClose = () => {\n    this.setState({ isOpen: false });\n  };\n\n  render() {\n    const { dungeons, isAnonymous } = this.props;\n    if (!this.state.isOpen) {\n      return (\n        <a href=\"#\" onClick={this.handleOpen}>\n          Show all {rewards(isAnonymous)}\n        </a>\n      );\n    }\n    return (\n      <ModalDialog\n        isOpen={this.state.isOpen}\n        onClose={this.handleClose}\n        className=\"modal-lg\"\n        title={rewardsTitle(isAnonymous)}\n      >\n        <div className=\"row\">\n          <div className=\"col-md-8\">\n            <DungeonPrizeList dungeons={dungeons} isAnonymous={isAnonymous} />\n          </div>\n          <div className={`col-md-4 ${styles.right}`}>\n            <ItemTypeChecklist />\n          </div>\n        </div>\n      </ModalDialog>\n    );\n  }\n}\n\n// TODO: Use a selector and PureComponent\nexport default connect<StateProps, {}, OwnProps>((state: IState, { worlds }: OwnProps) => ({\n  dungeons: getDungeonsForWorlds(state.dungeons, worlds),\n}))(WorldPrizeList);\n","import * as React from 'react';\nimport * as Modal from 'react-modal';\n\nimport classNames from 'classnames';\n\nimport { ModalHeader } from './ModalHeader';\n\ninterface Props {\n  isOpen: boolean;\n  title?: string | (() => any);\n  onClose: () => void;\n  className?: string;\n  children: any;\n}\n\nexport class ModalDialog extends React.Component<Props> {\n  render() {\n    const { isOpen, onClose, title, className, children } = this.props;\n    return (\n      <Modal\n        isOpen={isOpen}\n        onRequestClose={onClose}\n        className={classNames('modal-dialog', className)}\n        style={{ overlay: { backgroundColor: 'rgba(0, 0, 0, 0.50)', overflowY: 'auto' } }}\n      >\n        <div className=\"modal-content\">\n          {title && (\n            <ModalHeader onClose={onClose}>\n              <h5 className=\"modal-title\">{typeof title === 'string' ? title : title()}</h5>\n            </ModalHeader>\n          )}\n          <div className=\"modal-body\">{children}</div>\n        </div>\n      </Modal>\n    );\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  onClose?: () => void;\n  children: any;\n}\n\nexport class ModalHeader extends React.Component<Props> {\n  render() {\n    const { onClose, children } = this.props;\n    return (\n      <div className=\"modal-header\">\n        {children}\n        {onClose && <button onClick={onClose} className=\"close\"><span aria-hidden=\"true\">&times;</span></button>}\n      </div>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"right\":\"_2D_TClKies0kiQ-kyUnqf1\"};","import * as React from 'react';\n\nimport { Progress } from '../../actions/progress';\n\ninterface Props {\n  progress?: Progress;\n  children?: any;\n}\n\nexport class ProgressBar extends React.Component<Props> {\n  render() {\n    const { progress, children } = this.props;\n    if (!progress) {\n      return null;\n    }\n    const { current, max } = progress;\n    return (\n      <div className=\"progress\">\n        <div\n          className=\"progress-bar progress-bar-striped progress-bar-animated\"\n          role=\"progressbar\" style={{width: (current / max * 100).toFixed(2) + '%'}}\n          aria-valuenow={current} aria-valuemin={0} aria-valuemax={max}\n        >\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n","import { AxiosResponse } from 'axios';\nimport { put, select, takeEvery } from 'redux-saga/effects';\nimport { getType } from 'typesafe-actions';\n\nimport { addWorldDungeons, loadDungeons } from '../actions/dungeons';\nimport { setProgress } from '../actions/progress';\nimport { getLang } from '../actions/session';\nimport * as apiUrls from '../api/apiUrls';\nimport * as schemas from '../api/schemas';\nimport { convertWorldDungeons } from '../proxy/dungeons';\nimport { IState } from '../reducers';\nimport { logger } from '../utils/logger';\nimport { callApi } from './util';\n\nexport const progressKey = 'dungeons';\n\nexport function* doLoadDungeons(action: ReturnType<typeof loadDungeons>) {\n  const session = yield select((state: IState) => state.session);\n  // FIXME: Throw an error if any of session is missing\n  const lang = getLang(session);\n\n  yield put(setProgress(progressKey, { current: 0, max: action.payload.worldIds.length }));\n\n  for (let i = 0; i < action.payload.worldIds.length; i++) {\n    const worldId = action.payload.worldIds[i];\n    yield put(setProgress(progressKey, { current: i, max: action.payload.worldIds.length }));\n    logger.info(`Getting dungeons for world ${worldId}...`);\n\n    const result = yield callApi(\n      apiUrls.dungeons(lang, worldId),\n      session,\n      (response: AxiosResponse) => {\n        // FIXME: Validate data\n        return addWorldDungeons(worldId, convertWorldDungeons(response.data as schemas.Dungeons));\n      },\n    );\n    if (result != null) {\n      yield put(result);\n    }\n  }\n\n  yield put(setProgress(progressKey, undefined));\n}\n\nexport function* watchLoadDungeons() {\n  yield takeEvery(getType(loadDungeons), doLoadDungeons);\n}\n","/**\n * @file\n * Support for tracking world and dungeon rewards and completion status\n */\n\nimport { Dispatch, Store } from 'redux';\n\nimport * as _ from 'lodash';\n\nimport {\n  addWorldDungeons,\n  Dungeon,\n  finishWorldDungeons,\n  forgetWorldDungeons,\n  openDungeonChest,\n  updateDungeon,\n} from '../actions/dungeons';\nimport { unlockWorld, updateWorlds, World, WorldCategory } from '../actions/worlds';\nimport { LangType } from '../api/apiUrls';\nimport * as schemas from '../api/schemas';\nimport * as dungeonsSchemas from '../api/schemas/dungeons';\nimport * as mainSchemas from '../api/schemas/main';\nimport { enlir } from '../data';\nimport { ItemType } from '../data/items';\nimport { crystalTowerFloorIcon, itemImage } from '../data/urls';\nimport { IState } from '../reducers';\nimport { DungeonState } from '../reducers/dungeons';\nimport { logger } from '../utils/logger';\nimport { getRequestLang, Handler, HandlerRequest, StartupHandler } from './common';\n\nconst buttonStyleSort: { [s: string]: number } = {\n  NORMAL: 0,\n  EXTRA: 1,\n  DOOM: 2,\n};\n\n/**\n * Gets effective difficulty.  Difficulty 0 mean ???, which sorts after\n * everything else.\n */\nconst effectiveDifficulty = (difficulty: number) => (difficulty === 0 ? Infinity : difficulty);\n\n/**\n * Should we treat all dungeons for this world as unlocked, regardless of the\n * is_unlocked property?\n */\nfunction shouldForceUnlock(world: World): boolean {\n  // HACK: Power-up dungeons are reported as locked, even if they're not.  In\n  // reality, it's somewhat complicated, since it may depend on day of the\n  // week, whether special events are going on, and (I think) Acolyte Archive\n  // completion status.  But just setting it to true is good enough.\n  return world.category === WorldCategory.PowerUpMote && world.name === 'Power Up Dungeons';\n}\n\n/**\n * Sorts record dungeons using the dungeon node map.  Returns a list of sorted\n * dungeons, followed by a list of dungeons that couldn't be sorted.  (That\n * should never happen.)\n */\nfunction sortDungeonsByNode(\n  dungeonData: dungeonsSchemas.Dungeons,\n): [dungeonsSchemas.Dungeon[], dungeonsSchemas.Dungeon[]] {\n  const dungeonList = dungeonData.dungeons;\n  const nodes = _.keyBy(dungeonData.dungeon_list_nodes, 'id');\n\n  // Map dungeon IDs to zero-based sort orders\n  const sortOrder = new Map<number, number>();\n  let nextSortOrder = 0;\n\n  // Breadth-first search\n  const seen = new Map<number, boolean>();\n  const toProcess: number[] = [];\n\n  const root = _.find(nodes, node => node.type === dungeonsSchemas.NodeType.Start);\n  if (root == null) {\n    return [[], dungeonList];\n  }\n\n  seen.set(root.id, true);\n  toProcess.push(root.id);\n\n  while (toProcess.length) {\n    const subtreeRoot = nodes[toProcess.shift() as number];\n\n    // Process sort order\n    if (subtreeRoot.dungeon_id) {\n      sortOrder.set(subtreeRoot.dungeon_id, nextSortOrder);\n      nextSortOrder++;\n    }\n\n    // BFS logic\n    seen.set(subtreeRoot.id, true);\n\n    const pathInfo = subtreeRoot.path_info;\n    if (pathInfo != null) {\n      const nextIds = _.sortBy(Object.keys(pathInfo).map(i => +i), i => +pathInfo[i]);\n      for (const id of nextIds) {\n        if (!seen.has(id)) {\n          toProcess.push(id);\n        }\n      }\n    }\n  }\n\n  return [\n    _.sortBy(dungeonList.filter(i => sortOrder.has(i.id)), i => sortOrder.get(i.id)),\n    dungeonList.filter(i => !sortOrder.has(i.id)),\n  ];\n}\n\nfunction sortDungeonsStandard(\n  dungeonData: dungeonsSchemas.Dungeons,\n  dungeonList: dungeonsSchemas.Dungeon[],\n) {\n  // Normally, type 1 vs. 2 marks classic vs. elite, page 1 vs. page 2, etc.\n  // But, for Nightmare, 1 is the actual record, and 2 is the buildup.\n  const sortType: (d: dungeonsSchemas.Dungeon) => number = dungeonData.room_of_abyss_assets\n    ? d => -d.type\n    : d => d.type;\n\n  return _.sortBy(dungeonList, [\n    // Sort by page 1 vs. page 2, Classic vs. Elite, whatever\n    sortType,\n    // Realm dungeons are sorted by progress_map_level.\n    'progress_map_level',\n    // Then by normal vs. hard vs. DOOM!\n    (d: dungeonsSchemas.Dungeon) => buttonStyleSort[d.button_style],\n    // Then by difficulty\n    (d: dungeonsSchemas.Dungeon) => effectiveDifficulty(d.challenge_level),\n    // Use id to disambiguate magicite\n    'id',\n  ]);\n}\n\nexport function sortDungeons(dungeonData: dungeonsSchemas.Dungeons) {\n  if (dungeonData.dungeon_list_nodes) {\n    const [sorted, unsorted] = sortDungeonsByNode(dungeonData);\n    if (unsorted.length) {\n      logger.error(`Failed to sort ${unsorted.length} node dungeons`);\n      logger.error(unsorted.map(i => i.name));\n    }\n    return sorted.concat(sortDungeonsStandard(dungeonData, unsorted));\n  } else {\n    return sortDungeonsStandard(dungeonData, dungeonData.dungeons);\n  }\n}\n\nexport function convertPrizeItems(prizes?: dungeonsSchemas.DungeonPrizeItem[]) {\n  if (!prizes) {\n    return [];\n  } else {\n    return prizes.map(i => ({\n      id: i.id,\n      name: i.name,\n      amount: i.num,\n      // FIXME: cleanly convert item type\n      type: i.type_name.toLowerCase() as ItemType,\n    }));\n  }\n}\n\nexport function convertGradePrizeItems(dungeon: dungeonsSchemas.Dungeon) {\n  let allPrizes: dungeonsSchemas.DungeonPrizeItem[] = [];\n  for (let i = dungeonsSchemas.MinRewardGrade; ; i++) {\n    const grade = i.toString() as dungeonsSchemas.RewardType;\n    if (!dungeon.prizes[grade]) {\n      break;\n    }\n    allPrizes.push(...dungeon.prizes[grade]);\n  }\n\n  allPrizes = _.sortBy(allPrizes, 'disp_order');\n  const convert = (claimed: boolean) =>\n    convertPrizeItems(_.filter(allPrizes, i => !!i.is_got_grade_bonus_prize === claimed));\n  return {\n    claimedGrade: convert(true),\n    unclaimedGrade: convert(false),\n  };\n}\n\nexport function addRecordDungeonChests(dungeons: Dungeon[], nodes: dungeonsSchemas.DungeonNode[]) {\n  const dungeonObject = _.keyBy(dungeons, 'id');\n  for (const i of nodes) {\n    if (i.remaining_treasure_num) {\n      if (!dungeonObject[i.dungeon_id]) {\n        logger.warn(`Saw dungeon chests for unknown dungeon ${i.dungeon_id}`);\n      } else {\n        dungeonObject[i.dungeon_id].dungeonChests = i.remaining_treasure_num;\n      }\n    }\n  }\n}\n\nexport function convertWorldDungeons(\n  data: dungeonsSchemas.Dungeons,\n  forceUnlock?: boolean,\n): Dungeon[] {\n  const dungeons = sortDungeons(data).map(d => ({\n    name: d.name,\n    id: d.id,\n    seriesId: d.series_id,\n    difficulty: d.challenge_level,\n    openedAt: d.opened_at,\n    closedAt: d.closed_at,\n    isUnlocked: d.is_unlocked || !!forceUnlock,\n    isComplete: d.is_clear,\n    isMaster: d.is_master,\n    totalStamina: d.total_stamina,\n    staminaList: d.stamina_list,\n    prizes: {\n      completion: convertPrizeItems(d.prizes[dungeonsSchemas.RewardType.Completion]),\n      firstTime: convertPrizeItems(d.prizes[dungeonsSchemas.RewardType.FirstTime]),\n      mastery: convertPrizeItems(d.prizes[dungeonsSchemas.RewardType.Mastery]),\n      ...convertGradePrizeItems(d),\n    },\n  }));\n\n  if (data.dungeon_list_nodes) {\n    addRecordDungeonChests(dungeons, data.dungeon_list_nodes);\n  }\n\n  return dungeons;\n}\n\nexport function convertWorld(\n  event: mainSchemas.Event,\n  world: mainSchemas.World,\n  textMaster: mainSchemas.TextMaster,\n): World | null {\n  let name = world.name;\n  let category: WorldCategory | undefined;\n  let subcategory: string | undefined;\n  let subcategorySortOrder: number | undefined;\n  const seriesShortName = textMaster[`sortmodal_short_summary_series_${world.series_id}`];\n\n  if (event.type_name === 'rotation' || event.type_name === 'wday') {\n    // For mote (\"rotation\") and power up (\"wday\") dungeons, there are only\n    // two worlds (\"Mote Dungeons\" and \"Power Up Dungeons\"), each with only\n    // one dungeon visible at a time.  No need to assign a subcategory.\n    category = WorldCategory.PowerUpMote;\n  } else if (event.type_name === 'fragment') {\n    // Full open \"fragment\" (mote) dungeons - JP only as of January 2019.\n    // Put them in their own subcategory for now; we may improve this later.\n    category = WorldCategory.PowerUpMote;\n    subcategory = 'Mote Dungeons';\n  } else if (event.type_name === 'extreme') {\n    category = WorldCategory.Nightmare;\n  } else if (event.type_name === 'beast') {\n    category = WorldCategory.Magicite;\n  } else if (event.type_name === 'suppress') {\n    category = WorldCategory.Raid;\n  } else if (event.type_name === 'original_scenario') {\n    category = WorldCategory.Record;\n  } else if (event.tag === 'full_throttle') {\n    category = WorldCategory.JumpStart;\n  } else if (event.tag === 'nightmare_dungeon') {\n    category = WorldCategory.Torment;\n    subcategory = 'Classic Torments';\n    name = world.name + ' (' + seriesShortName + ')';\n  } else if (event.tag === 'regular_nightmare_dungeon') {\n    category = WorldCategory.Torment;\n    name = world.name + ' (' + seriesShortName + ')';\n  } else if (event.tag === 'crystal_tower') {\n    category = WorldCategory.CrystalTower;\n  } else if (world.name.startsWith(\"Newcomers' Dungeons - \")) {\n    category = WorldCategory.Newcomer;\n  } else if (event.tag.match(/^ff.*_reopen_ww\\d+/)) {\n    category = WorldCategory.Renewal;\n    // Type-0, at least, has series_formal_name == ''.\n    subcategory = world.series_formal_name || seriesShortName;\n    // Use negative series ID so that newest series are listed first,\n    // to match FFRK's own API.\n    subcategorySortOrder = -world.series_id;\n  } else if (event.type_name === 'challenge' || event.type_name === 'special') {\n    // 'special' was observed with A Heretic Awaits\n    if (event.tag !== '') {\n      // Fall back / generic - e.g., third_anniversary\n      category = WorldCategory.SpecialEvent;\n      subcategory = _.startCase(event.tag);\n    } else {\n      category = WorldCategory.Event;\n    }\n  } else {\n    return null;\n  }\n\n  return {\n    id: world.id,\n    name,\n    category,\n    subcategory,\n    subcategorySortOrder,\n    openedAt: world.opened_at,\n    closedAt: world.closed_at,\n    seriesId: world.series_id,\n    isUnlocked: world.is_unlocked,\n  };\n}\n\nfunction checkForWorldIcon(\n  lang: LangType,\n  world: World,\n  crystalTowerIcons: { [worldId: number]: number },\n) {\n  switch (world.category) {\n    case WorldCategory.Nightmare: {\n      const ability = enlir.abilitiesByName[world.name.replace(' Record', '')];\n      if (ability) {\n        world.iconUrl = itemImage(lang, ability.id, ItemType.Ability);\n      }\n      break;\n    }\n\n    case WorldCategory.Magicite: {\n      world.localIcon = world.name.toLowerCase() + 'Element';\n      break;\n    }\n\n    case WorldCategory.CrystalTower: {\n      if (crystalTowerIcons[world.id]) {\n        world.iconUrl = crystalTowerFloorIcon(lang, crystalTowerIcons[world.id]);\n      }\n    }\n  }\n}\n\nfunction convertWorlds(\n  worlds: mainSchemas.World[],\n  events: mainSchemas.Event[],\n  crystalTowers: mainSchemas.CrystalTower[],\n  lang: LangType,\n  textMaster: mainSchemas.TextMaster,\n): { [id: number]: World } {\n  const result: { [id: number]: World } = {};\n\n  const worldsById = _.zipObject(worlds.map(i => i.id), worlds);\n  const crystalTowerIcons = _.fromPairs(\n    _.flatten(crystalTowers.map(i => i.floor_infos)).map(i => [i.world_id, i.floor_icon_id]),\n  );\n\n  const seenWorlds = new Set<number>();\n\n  let totalUnknown = 0;\n  for (const e of events) {\n    const world = worldsById[e.world_id];\n    if (world == null) {\n      logger.error(`Unknown world for {e.id}`);\n      continue;\n    }\n    seenWorlds.add(e.world_id);\n\n    const resultWorld = convertWorld(e, world, textMaster);\n\n    if (resultWorld == null) {\n      logger.error(`Unknown: ${e.world_id} (${world.name})`);\n      totalUnknown++;\n    } else {\n      checkForWorldIcon(lang, resultWorld, crystalTowerIcons);\n      result[world.id] = resultWorld;\n    }\n  }\n\n  for (const w of worlds) {\n    if (!seenWorlds.has(w.id)) {\n      result[w.id] = {\n        id: w.id,\n        name: w.name,\n        category: WorldCategory.Realm,\n        openedAt: w.opened_at,\n        closedAt: w.closed_at,\n        seriesId: w.series_id,\n        isUnlocked: w.is_unlocked,\n      };\n    }\n  }\n\n  if (totalUnknown) {\n    logger.error(`Found ${totalUnknown} unknown worlds`);\n  }\n\n  return result;\n}\n\n/**\n * Checks the status summary counts for Realm worlds against the last loaded\n * dungeon lists for each world to update them if needed.\n */\nfunction checkForUpdatedRealmDungeons(\n  worlds: mainSchemas.World[],\n  dungeons: DungeonState,\n  dispatch: Dispatch,\n  now: number = Date.now(),\n) {\n  const describe = (\n    description: string,\n    summary: { master_count: number; clear_count: number } | undefined,\n  ) => (summary ? ` ${description} ${summary.master_count}/${summary.clear_count}/x,` : '');\n\n  for (const w of _.sortBy(worlds, 'id')) {\n    const summary1 = (w.dungeon_status_summary || {})[1];\n    const summary2 = (w.dungeon_status_summary || {})[2];\n    if (!summary1 || !summary2 || !w.dungeon_term_list || w.dungeon_term_list.length === 0) {\n      continue;\n    }\n\n    const newLength = w.dungeon_term_list.filter(i => +i.opened_at < now / 1000).length;\n    logger.debug(\n      `World ${w.name}:` +\n        describe('normal', summary1) +\n        describe('elite', summary2) +\n        ` ${w.dungeon_term_list.length} total, ${newLength} current`,\n    );\n\n    if (!dungeons.byWorld[w.id]) {\n      continue;\n    }\n\n    const newCompleted = summary1.clear_count + summary2.clear_count;\n    const newMastered = summary1.master_count + summary2.master_count;\n\n    const worldDungeons = dungeons.byWorld[w.id].map(i => dungeons.dungeons[i]);\n    const oldLength = worldDungeons.length;\n    const oldCompleted = _.sumBy(worldDungeons, i => +i.isComplete);\n    const oldMastered = _.sumBy(worldDungeons, i => +i.isMaster);\n    logger.debug(\n      `  loaded ${worldDungeons.length}, completed ${oldCompleted}, mastered ${oldMastered}`,\n    );\n\n    if (oldLength > newLength) {\n      logger.warn(`Unexpected world / dungeon results for ${w.id}: ${oldLength} vs. ${newLength}`);\n      dispatch(forgetWorldDungeons(w.id));\n    } else if (newLength > oldLength) {\n      logger.debug(`  New dungeons have been released for ${w.id}`);\n      dispatch(forgetWorldDungeons(w.id));\n    } else {\n      const isNewComplete = newCompleted === newLength && newCompleted > oldCompleted;\n      const isNewMaster = newMastered === newLength && newMastered > oldMastered;\n      if (isNewComplete || isNewMaster) {\n        // Note: This log message simplifies isNewComplete vs. isNewMaster, but it should suffice.\n        logger.debug(\n          `  ${w.id} was ${isNewMaster ? 'mastered' : 'completed'} without our knowledge`,\n        );\n        dispatch(finishWorldDungeons(w.id, { isComplete: isNewComplete, isMaster: isNewMaster }));\n      }\n      // TODO? Could do even more here - e.g., if all of summary1 is completed, mark all non-elite as complete\n    }\n  }\n}\n\n/**\n * Checks Record worlds to see if any are listing new dungeons.\n */\nfunction checkForUpdatedRecordDungeons(\n  worlds: mainSchemas.World[],\n  newWorlds: { [id: number]: World },\n  dungeons: DungeonState,\n  dispatch: Dispatch,\n) {\n  for (const w of _.sortBy(worlds, 'id')) {\n    if (\n      !newWorlds[w.id] ||\n      newWorlds[w.id].category !== WorldCategory.Record ||\n      !dungeons.byWorld[w.id]\n    ) {\n      continue;\n    }\n\n    const worldDungeons = dungeons.byWorld[w.id].map(i => dungeons.dungeons[i]);\n    const oldLength = worldDungeons.length;\n    const oldCompleted = _.sumBy(worldDungeons, i => +i.isComplete);\n\n    if (oldLength === oldCompleted && w.has_new_dungeon) {\n      logger.debug(`World ${w.name} has new dungeons (was at ${oldCompleted}/${oldLength})`);\n      dispatch(forgetWorldDungeons(w.id));\n    }\n  }\n}\n\nfunction handleWinBattle(data: schemas.WinBattle, store: Store<IState>) {\n  if (data.result.is_dungeon_clear) {\n    store.dispatch(\n      updateDungeon(+data.result.dungeon_id, {\n        isComplete: true,\n        isMaster: data.result.dungeon_rank === 3,\n      }),\n    );\n    for (const i of data.result.unlock_dungeons) {\n      store.dispatch(\n        updateDungeon(+i.dungeon_id, {\n          isUnlocked: true,\n        }),\n      );\n    }\n  }\n}\n\n// noinspection JSUnusedGlobalSymbols\nconst dungeonsHandler: Handler = {\n  [StartupHandler]: (data: mainSchemas.Main, store: Store<IState>, request: HandlerRequest) => {\n    const lang = getRequestLang(request);\n    const { worlds, events, crystal_towers: crystalTowers } = data.appInitData;\n\n    const newWorlds = convertWorlds(worlds, events, crystalTowers, lang, data.textMaster);\n    store.dispatch(updateWorlds(newWorlds));\n\n    checkForUpdatedRealmDungeons(worlds, store.getState().dungeons, store.dispatch);\n    checkForUpdatedRecordDungeons(worlds, newWorlds, store.getState().dungeons, store.dispatch);\n    // FIXME: Track half-price dungeons\n  },\n\n  dungeons(data: dungeonsSchemas.Dungeons, store: Store<IState>, { query }: HandlerRequest) {\n    if (!query || !query.world_id) {\n      logger.error('Unrecognized dungeons query');\n      return;\n    }\n\n    let forceUnlock = false;\n    const worlds = store.getState().worlds.worlds;\n    if (worlds && worlds[query.world_id]) {\n      forceUnlock = shouldForceUnlock(worlds[query.world_id]);\n    }\n\n    const newDungeons = convertWorldDungeons(data, forceUnlock);\n\n    store.dispatch(unlockWorld(query.world_id));\n    store.dispatch(addWorldDungeons(query.world_id, newDungeons));\n  },\n\n  win_battle: handleWinBattle,\n  battle_win: handleWinBattle,\n  'battle/win': handleWinBattle,\n\n  progress_battle_list_gimmick(\n    data: dungeonsSchemas.ProgressBattleListGimmick,\n    store: Store<IState>,\n  ) {\n    if (data.gimmick_effect.effect && data.gimmick_effect.effect.prize_master) {\n      store.dispatch(openDungeonChest(data.user.dungeon_id));\n    }\n  },\n};\n\nexport default dungeonsHandler;\n","import { ItemTypeName } from '../../data/items';\nimport { Asset, AssetCollection, NumberAsString, RelativeUrlPath, Timestamp } from './common';\nimport { User } from './user';\n\nexport enum NodeType {\n  // noinspection JSUnusedGlobalSymbols\n  Start = 1,\n  Regular = 2,  // Normal \"Corrupted\" paintings (unconfirmed)\n  Free = 3,     // Free play \"Record\" paintings (unconfirmed)\n  Final = 4,    // Unconfirmed\n}\n\nexport enum RewardType {\n  // noinspection JSUnusedGlobalSymbols\n  Completion = '1',\n  FirstTime = '2',\n  Mastery = '3',\n  // Recurring (?) time-based (?) bonuses - e.g., for Magicite\n  Bonus = '7',\n  // One-time bonuses - e.g., for Neo Torments, or damage-based for\n  // \"Damage Race - Ancient Foes\",\n  GradeAOrSub30 = '8',\n  GradeBOrSub40 = '9',\n  GradeCOrSub50 = '10',\n  GradeDOrSub60 = '11',\n  GradeEOrHp100 = '12',\n  GradeFOrHp90 = '13',\n  Hp80 = '14',\n  Hp70 = '15',\n  Hp60 = '16',\n  Hp50 = '17',\n}\n\nexport const MinRewardGrade = 8;\n\nexport interface DungeonPrizeItem {\n  type_name: ItemTypeName;\n  num: number;\n  image_path: RelativeUrlPath;\n  is_got_grade_bonus_prize: number;  // 1 if an already received 1-time bonus\n  grade_bonus_description?: string;\n  disp_order?: number;\n  name: string;\n  id: number;\n  clear_battle_time?: number;  // Clear time, in milliseconds\n}\n\nexport interface Dungeon {\n  id: number;\n  name: string;\n  series_id: number;\n  prologue: string;\n  epilogue: string;\n  is_clear: boolean;\n  is_master: boolean;\n  is_new: boolean;\n  is_unlocked: boolean;\n  type: number;   // Whether it's on page 1 (normal) or page 2 (elite, part 2, etc.)\n\n  // Does not take 1/2 stamina into account.  Summing stamina_list, dividing\n  // by 2 and rounding down, minimum 1, is necessary to handle that.\n  total_stamina: number;\n  stamina_list: number[];\n\n  opened_at: Timestamp;\n  closed_at: Timestamp;\n\n  challenge_level: number;\n  progress_map_level: number;\n  button_style: string;   // \"NORMAL\", \"EXTRA\", or \"DOOM\"\n  prizes: {\n    [s in RewardType]: DungeonPrizeItem[];\n  };\n}\n\n// A node in a record dungeon's graph\nexport interface DungeonNode {\n  world_id: number;\n  x: number;\n  y: number;\n  path_info: null | {\n    [id: string]: NumberAsString;  // ID of node reachable from here\n  };\n  dungeon_id: number;   // 0 for starting node\n  id: number;\n  type: NodeType;\n  remaining_treasure_num: number;\n}\n\n// Sample URL: http://ffrk.denagames.com/dff/world/dungeons?world_id=104001\nexport interface Dungeons {\n  assets: Asset[];\n\n  // Assets for Nightmare dungeons\n  room_of_abyss_assets?: {\n    common: AssetCollection;\n    picture: AssetCollection;\n  };\n\n  dungeons: Dungeon[];\n\n  // Record Dungeons nodes\n  dungeon_list_nodes?: DungeonNode[];\n  dungeon_id_node_id_map?: Array<{\n    [id: string]: string;\n  }>;\n}\n\n// Sample URL: http://ffrk.denagames.com/dff/event/original_scenario/11002/progress_battle_list_gimmick\nexport interface ProgressBattleListGimmick {\n  user: User;\n  gimmick: {\n    id: number;\n    has_shown: number;\n  };\n  gimmick_effect: {\n    // We've only ever observed one gimmick (treasure chests), but others may\n    // exist, so leave lots of flexibility in what we expect here.\n    item_possession_limits?: Array<{\n      current_num: number;\n      item_type_name: string;\n      max_num: number;\n      enable_give_num: number;\n    }>;\n    effect?: {\n      assets: AssetCollection;\n      prize_master: {\n        [id: string]: DungeonPrizeItem;\n      };\n    };\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"right\":\"NNpoPcRR0RbIu0lAWibbb\"};","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\n\nimport * as _ from 'lodash';\n\nimport { RecordMateriaDetail } from '../actions/recordMateria';\nimport { IState } from '../reducers';\nimport { getRecordMateriaDetail } from '../selectors/recordMateriaDetail';\nimport { Page } from './Page';\nimport { RecordMateriaRoutes } from './RecordMateriaRoutes';\n\ninterface Props {\n  recordMateria: { [id: number]: RecordMateriaDetail };\n  hasInventory: boolean;\n}\n\nexport class RecordMateriaPage extends React.Component<Props & RouteComponentProps> {\n  renderContents() {\n    const { recordMateria, hasInventory, match, location, history } = this.props;\n    if (_.isEmpty(recordMateria)) {\n      return (\n        <>\n          <p>Record materia information has not been loaded.</p>\n          <p>\n            Within FFRK, please go under the Annex, under the Library, and choose Record Materia.\n          </p>\n        </>\n      );\n    } else if (!hasInventory) {\n      return (\n        <>\n          <p>Record materia inventory has not been loaded.</p>\n          <p>Please restart FFRK then go under Party, or go under the Annex, under the Library.</p>\n        </>\n      );\n    } else {\n      return (\n        <RecordMateriaRoutes\n          recordMateria={recordMateria}\n          isAnonymous={!process.env.IS_ELECTRON}\n          match={match}\n          location={location}\n          history={history}\n        />\n      );\n    }\n  }\n\n  render() {\n    return <Page title=\"Record Materia\">{this.renderContents()}</Page>;\n  }\n}\n\nexport default connect((state: IState) => ({\n  recordMateria: getRecordMateriaDetail(state),\n  hasInventory: state.recordMateria.inventory != null,\n}))(RecordMateriaPage);\n","import * as _ from 'lodash';\nimport { createSelector } from 'reselect';\n\nimport { Character } from '../actions/characters';\nimport { getPrereqs, getStatus, RecordMateriaDetail } from '../actions/recordMateria';\nimport { IState } from '../reducers';\nimport { RecordMateriaState } from '../reducers/recordMateria';\n\nexport const getRecordMateriaDetail = createSelector<\n  IState,\n  RecordMateriaState,\n  { [id: number]: Character },\n  { [id: number]: RecordMateriaDetail }\n>(\n  [(state: IState) => state.recordMateria, (state: IState) => state.characters.characters],\n  (\n    { recordMateria, inventory, favorites, obtained }: RecordMateriaState,\n    characters: { [id: number]: Character },\n  ): { [id: number]: RecordMateriaDetail } => {\n    return _.mapValues(recordMateria, i => {\n      const isInInventory = inventory == null ? true : inventory[i.id];\n      const isFavorite = favorites == null ? false : favorites[i.id];\n      const isObtained = obtained == null ? false : obtained[i.id];\n      return {\n        ...i,\n        ...getStatus(\n          i,\n          characters[i.characterId],\n          getPrereqs(i, recordMateria),\n          isInInventory,\n          isFavorite,\n          isObtained,\n        ),\n      };\n    });\n  },\n);\n","import * as React from 'react';\nimport { Route, RouteComponentProps } from 'react-router';\nimport { NavLink } from 'react-router-dom';\n\nimport { AttackReplacement } from '../components/recordMateria/AttackReplacement';\nimport { DamageHealing } from '../components/recordMateria/DamageHealing';\nimport { Misc } from '../components/recordMateria/Misc';\nimport { RecordMateriaGrid } from '../components/recordMateria/RecordMateriaGrid';\nimport { RecordMateriaProps } from '../components/recordMateria/RecordMateriaList';\nimport { StatBuffs } from '../components/recordMateria/StatBuffs';\n\nconst styles = require('./RecordMateriaRoutes.scss');\n\nexport class RecordMateriaRoutes extends React.Component<RecordMateriaProps & RouteComponentProps> {\n  renderPart = (Part: React.ComponentType<RecordMateriaProps>) => (\n    <Part recordMateria={this.props.recordMateria} isAnonymous={this.props.isAnonymous} />\n  );\n  renderAll = () => this.renderPart(RecordMateriaGrid);\n  renderStatBuffs = () => this.renderPart(StatBuffs);\n  renderDamageHealing = () => this.renderPart(DamageHealing);\n  renderAttackReplacement = () => this.renderPart(AttackReplacement);\n  renderMisc = () => this.renderPart(Misc);\n\n  render() {\n    const { match } = this.props;\n\n    const items: Array<[string, string, () => React.ReactNode]> = [\n      ['All', '', this.renderAll],\n      ['Stat Buffs', '/statBuffs', this.renderStatBuffs],\n      ['Damage / Healing', '/damageHealing', this.renderDamageHealing],\n      ['Atk. Replacement', '/attackReplacement', this.renderAttackReplacement],\n      ['Misc.', '/misc', this.renderMisc],\n    ];\n\n    return (\n      <div className={styles.component}>\n        <ul className=\"nav nav-tabs\">\n          {items.map(([text, subUrl, render], index) => (\n            <li className=\"nav-item\" key={index}>\n              <NavLink exact className=\"nav-link\" activeClassName=\"active\" to={match.url + subUrl}>\n                {text}\n              </NavLink>\n            </li>\n          ))}\n        </ul>\n\n        {items.map(([text, subUrl, render], index) => (\n          <Route exact key={index} path={match.url + subUrl} render={render} />\n        ))}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport { RecordMateriaProps } from './RecordMateriaList';\nimport { RecordMateriaTableGroup } from './RecordMateriaTableGroup';\n\nimport tables from './AttackReplacementDefinitions';\n\nexport class AttackReplacement extends React.PureComponent<RecordMateriaProps> {\n  render() {\n    return <RecordMateriaTableGroup id=\"attackReplacement\" {...this.props} tables={tables} />;\n  }\n}\n","import * as React from 'react';\n\nimport * as _ from 'lodash';\n\nimport { RecordMateriaList, RecordMateriaProps } from './RecordMateriaList';\nimport { TableDefinition, TableRow } from './RecordMateriaTableDefinitions';\n\nconst styles = require('./RecordMateriaTable.scss');\n\ninterface Props extends RecordMateriaProps {\n  tooltipId: string;\n  table: TableDefinition;\n}\n\nexport class RecordMateriaTable extends React.Component<Props> {\n  renderCell = (row: TableRow, rowIndex: number, contents: string[], index: number) => {\n    const { tooltipId, recordMateria, isAnonymous } = this.props;\n    const show = _.filter(_.flatMap(contents, s => row.items[s]));\n    return (\n      <td key={index}>\n        <RecordMateriaList\n          tooltipId={tooltipId}\n          recordMateria={recordMateria}\n          isAnonymous={isAnonymous}\n          show={show}\n        />\n      </td>\n    );\n  };\n\n  renderRow = (row: TableRow, index: number) => {\n    const { table } = this.props;\n    return (\n      <tr key={index}>\n        <th scope=\"row\">{row.header}</th>\n        {table.contents.map((contents, i) => this.renderCell(row, index, contents, i))}\n      </tr>\n    );\n  };\n\n  render() {\n    const { table } = this.props;\n    const style = { width: (100 / (table.headers.length + 1)).toFixed(1) + '%' };\n    return (\n      <>\n        <h4>{table.title}</h4>\n        <table className={`table table-bordered ${styles.component}`}>\n          <tbody>\n            <tr>\n              <th style={style} />\n              {table.headers.map((header, i) => (\n                <th key={i} style={style}>\n                  {header}\n                </th>\n              ))}\n            </tr>\n            {table.rows.map(this.renderRow)}\n          </tbody>\n        </table>\n      </>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport { RecordMateriaDetail, RecordMateriaStatus } from '../../actions/recordMateria';\nimport { LangType } from '../../api/apiUrls';\nimport { LangContext } from '../../contexts/LangContext';\nimport { enlir } from '../../data';\nimport { CharacterRecordMateria, getByCharacter } from './byCharacter';\nimport { StatusIcon } from './StatusIcon';\n\nconst styles = require('./RecordMateriaList.scss');\n\nexport interface RecordMateriaProps {\n  recordMateria: { [id: number]: RecordMateriaDetail };\n  isAnonymous?: boolean;\n}\n\ninterface Props extends RecordMateriaProps {\n  tooltipId: string;\n  show: CharacterRecordMateria[];\n}\n\nexport class RecordMateriaList extends React.Component<Props> {\n  // noinspection JSUnusedGlobalSymbols\n  static contextType = LangContext;\n  context!: React.ContextType<typeof LangContext>;\n\n  renderItem = (rm: RecordMateriaDetail | undefined, index: number) => {\n    const { tooltipId } = this.props;\n    const [characterName, order] = this.props.show[index];\n    if (rm) {\n      return (\n        <li key={index} data-tip={rm.id} data-for={tooltipId}>\n          {!this.props.isAnonymous && <StatusIcon status={rm.status} />}\n          {rm.characterName} {rm.order}\n        </li>\n      );\n    } else if (\n      this.context === LangType.Gl &&\n      enlir.charactersByName[characterName] &&\n      !enlir.charactersByName[characterName].gl\n    ) {\n      // Our record materia data comes from the game, so characters who aren't\n      // in GL won't have RM data.  Display nothing in that case.  (This code\n      // should still allow us to handle newly released characters - our copy\n      // of Enlir data will mistakenly have !gl, but we'll have RM data from\n      // the game, so things should work.)\n      return null;\n    } else {\n      return (\n        <li key={index}>\n          {!this.props.isAnonymous && <StatusIcon status={RecordMateriaStatus.Unknown} />}\n          {characterName} {order}\n        </li>\n      );\n    }\n  };\n\n  render() {\n    const { recordMateria, show } = this.props;\n    const items = getByCharacter(recordMateria, show);\n    return <ul className={styles.component}>{items.map(this.renderItem)}</ul>;\n  }\n}\n","import * as _ from 'lodash';\n\nimport { Order, RecordMateriaDetail } from '../../actions/recordMateria';\nimport { enlir } from '../../data';\n\n// Character GL name and Order, for easy selection\nexport type CharacterRecordMateria = [string, Order];\n\nconst makeCharacterLookup = _.memoize((recordMateria: { [id: number]: RecordMateriaDetail }) =>\n  _.keyBy(recordMateria, (i: RecordMateriaDetail) => {\n    // Use the canonical GL name for the character if we can find it.\n    // Otherwise, use the name attached to the record materia.\n    const characterName = enlir.characters[i.characterId]\n      ? enlir.characters[i.characterId].name\n      : i.characterName;\n    return characterName + '-' + i.order;\n  }),\n);\n\n/**\n * Returns a mapping of characters by GL (global) name and Order.  This makes\n * it easy to write custom lists of record materia without having to look up a\n * bunch of ID numbers.\n */\nexport function getByCharacter(\n  recordMateria: { [id: number]: RecordMateriaDetail },\n  characters: CharacterRecordMateria[],\n) {\n  const characterLookup = makeCharacterLookup(recordMateria);\n  return characters.map(([characterName, order]) => characterLookup[characterName + '-' + order]);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"unknown\":\"_1efZzwvsvB8yk4t0bdzVXg\",\"lockedLowLevel\":\"_2718sji1BH8gpbKbejWm5T\",\"lockedMissingPrereq\":\"_1YFEgB0uwvE3KqSvEtL4BQ\",\"unlocked\":\"_14yi7pIBbNZQSHSzupXswu\",\"collected\":\"_19hTwm1QjhDX_MIdTWDfxn\",\"favorite\":\"_1KJMLPF2OD1gz_h_VizGEG\",\"vault\":\"D6DJsxC4XTxVBEnlrd4i5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"lscBfCTtUUrz1qNQ2spLP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_2wBStylK3pbWqj58l8M11B\"};","import * as React from 'react';\n\ninterface Props {\n  text: string;\n}\n\nexport class BrTextToP extends React.Component<Props & React.HTMLAttributes<HTMLElement>> {\n  render() {\n    const { text, ...props } = this.props;\n    const lines = text.split('<br>');\n    return (\n      <>\n        {lines.map((line, i) => <p key={i} {...props}>{line}</p>)}\n      </>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_1e1gvvpypvl6tGeGvKpx7v\",\"iconsBlock\":\"_39Ous_mQBS8mndzypGlB1O\",\"textBlock\":\"_304bGGEYDVKTKJBroZdODF\",\"statusBlock\":\"_1LF3raQ7auNGT1a8XKFqy2\",\"enlirDescription\":\"_3srYucIjrA67EYfiYn7djp\",\"unlockCondition\":\"_2mtzew2HUq7l7kEmHPCR68\"};","import { TableDefinition } from './RecordMateriaTableDefinitions';\n\nconst physicalNonElementalTable: TableDefinition = {\n  title: 'PHY Non-Elemental',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'AoE',\n      items: {\n        3: [['Yang', '3'], ['Yda', '3']],\n        2: [['Leo', '2'], ['Machina', '2'], ['Orlandeau', '2'], ['Yda', '2'], ['Yang', '2']],\n        1: [['Bard', '1b']],\n      },\n    },\n    {\n      header: 'Instant',\n      items: {\n        3: [['Kelger', '3'], ['Noctis', '3']],\n        2: [['Lightning', '2'], ['Queen', '2'], ['Yuffie', '2']],\n      },\n    },\n    {\n      header: 'Single',\n      items: {\n        3: [['Kimahri', '3'], ['Prishe', '3'], ['Master', '3'], ['Gladiator', '3']],\n        2: [['Sazh', '2'], ['Ranger', '2'], ['Noel', '2']],\n        1: [\n          ['Josef', '1b'],\n          ['Lion', '1'],\n          ['Cecil (Dark Knight)', '1b'],\n          ['Shadow', '1'],\n          ['Squall', '1a'],\n          ['Wakka', '1b'],\n          ['Viking', '1b'],\n          ['Cecil (Dark Knight)', '1a'],\n        ],\n      },\n    },\n  ],\n};\n\nconst physicalPercentNonElementalTable: TableDefinition = {\n  title: '% PHY Non-Elemental',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: '% AoE',\n      items: {\n        3: [['Ricard', '3'], ['Shadow', '3'], ['Samurai', '3']],\n        2: [['Ayame', '2']],\n      },\n    },\n    {\n      header: '% p3.0+',\n      items: {\n        3: [['Dragoon', '3'], ['Setzer', '3'], ['Leila', '3'], ['Raijin', '3']],\n        2: [['Jecht', '2']],\n      },\n    },\n    {\n      header: '% p2.0+',\n      items: {\n        3: [\n          ['Ranger', '3'],\n          ['Ward', '3'],\n          ['Lion', '3'],\n          ['Rikku', '3'],\n          ['Freya', '3'],\n          ['Gau', '3'],\n        ],\n        2: [['Fran', '2'], ['Wol', '2'], ['Kiros', '2'], ['Kimahri', '2']],\n        1: [\n          ['Ranger', '1b'],\n          ['Gladiator', '1b'],\n          ['Master', '1'],\n          ['Ricard', '1b'],\n          ['Squall', '1b'],\n          ['Cinque', '1'],\n        ],\n      },\n    },\n    {\n      header: '% p1.0+',\n      items: {\n        3: [['Queen', '3'], ['Shelke', '3'], ['Quina', '3'], ['Dark Knight', '3']],\n        2: [['Prishe', '2'], ['Thief', '2'], ['Dark Knight', '2']],\n        1: [['Mustadio', '1'], ['Meliadoul', '1'], ['Quina', '1a'], ['Tidus', '1b']],\n      },\n    },\n    {\n      header: '% p1.0-',\n      items: {\n        1: [['Dark Knight', '1b'], ['Cecil (Paladin)', '1b'], ['Rinoa', '1']],\n      },\n    },\n  ],\n};\n\nconst physicalElementalTable: TableDefinition = {\n  title: 'PHY Elemental and % PHY Elemental',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'Bio',\n      items: {\n        3: [['Thief', '3']],\n      },\n    },\n    {\n      header: 'Dark',\n      items: {\n        3: [['Kiros', '3']],\n        1: [['Leon', '1b'], ['Garland', '1']],\n      },\n    },\n    {\n      header: 'Earth',\n      items: {\n        3: [['Seifer', '3'], ['Ursula', '3'], ['Spellblade', '3']],\n      },\n    },\n    {\n      header: 'Fire',\n      items: {\n        3: [['Galuf', '3']],\n        2: [['Scott', '2'], ['Spellblade', '2']],\n        1: [['Seifer', '1']],\n      },\n    },\n    {\n      header: 'Holy',\n      items: {\n        3: [['Beatrix', '3']],\n        1: [['Warrior of Light', '1b'], ['Agrias', '1']],\n      },\n    },\n    {\n      header: 'Ice',\n      items: {\n        3: [['Ayame', '3'], ['Xezat', '3'], ['Umaro', '3']],\n        2: [['Spellblade', '2']],\n        1: [['Celes', '1']],\n      },\n    },\n    {\n      header: 'Lightning',\n      items: {\n        3: [['Reno', '3'], ['Reks', '3'], ['King', '3'], ['Ramza', '3']],\n        2: [['Spellblade', '2']],\n      },\n    },\n    {\n      header: 'Water',\n      items: {\n        3: [['Paine', '3']],\n      },\n    },\n    {\n      header: 'Wind',\n      items: {},\n    },\n  ],\n};\n\nconst blackNonElementalTable: TableDefinition = {\n  title: 'BLK Non-Elemental',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'AoE',\n      items: {\n        3: [['Nabaat', '3'], ['Strago', '3']],\n      },\n    },\n    {\n      header: 'Single',\n      items: {\n        3: [['Cloud of Darkness', '3'], ['Bard', '3'], ['Hilda', '3']],\n        2: [['Vivi', '2']],\n      },\n    },\n    {\n      header: '% Single',\n      items: {\n        1: [['Cloud of Darkness', '1'], ['Cait Sith', '1']],\n      },\n    },\n  ],\n};\n\nconst blackElementalTable: TableDefinition = {\n  title: 'BLK Elemental',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'Bio',\n      items: {},\n    },\n    {\n      header: 'Dark',\n      items: {\n        3: [['Emperor', '3']],\n        2: [['Cloud of Darkness', '2']],\n      },\n    },\n    {\n      header: 'Earth',\n      items: {\n        3: [['Enna', '3']],\n      },\n    },\n    {\n      header: 'Fire',\n      items: {\n        3: [['Black Mage', '3'], ['Magus', '3'], ['Red Mage', '3']],\n        2: [['Black Mage', '2'], ['Magus', '2'], ['Maria', '2'], ['Rubicante', '2']],\n        1: [['Red Mage', '1'], ['Selphie', '1']],\n      },\n    },\n    {\n      header: 'Holy',\n      items: {},\n    },\n    {\n      header: 'Ice',\n      items: {\n        3: [['Magus', '3'], ['Red Mage', '3'], ['Ysayle', '3']],\n        2: [['Magus', '2']],\n        1: [['Tellah', '1'], ['Edea', '1'], ['Selphie', '1']],\n      },\n    },\n    {\n      header: 'Lightning',\n      items: {\n        3: [['Magus', '3'], ['Red Mage', '3'], ['Marach', '3'], ['Rapha', '3'], ['Desch', '3']],\n        2: [['Magus', '2'], ['Marach', '2'], ['Selphie', '1']],\n        1: [['Marach', '1']],\n      },\n    },\n    {\n      header: 'Water',\n      items: {\n        3: [['Meia', '3']],\n      },\n    },\n    {\n      header: 'Wind',\n      items: {\n        3: [['Barbariccia', '3']],\n        2: [['Emperor', '2']],\n      },\n    },\n    {\n      header: '(various)',\n      items: {\n        3: [['Summoner', '3']],\n        2: [['Seymour', '2']],\n      },\n    },\n  ],\n};\n\nconst ninjaElementalTable: TableDefinition = {\n  title: 'NIN Elemental',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'Fire',\n      items: {\n        3: [['Ninja', '3']],\n      },\n    },\n  ],\n};\n\nconst whiteDamageTable: TableDefinition = {\n  title: 'WHT Damage',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: '(non-elemental)',\n      items: {\n        3: [['Vanille', '3']],\n        2: [['Aphmau', '2'], ['Ovelia', '2']],\n      },\n    },\n    {\n      header: 'Holy',\n      items: {\n        2: [['Selphie', '2']],\n      },\n    },\n  ],\n};\n\nconst healTable: TableDefinition = {\n  title: 'Heal Allies',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'Cure',\n      items: {\n        3: [['White Mage', '3'], ['Red Mage', '3']],\n        2: [['Iris', '2'], ['Sarah', '2'], ['Vanille', '2'], ['White Mage', '2']],\n        1: [['Raijin', '1'], ['Garnet', '1b']],\n      },\n    },\n    {\n      header: 'Esuna',\n      items: {\n        3: [['Devout', '3']],\n        2: [['Devout', '2']],\n        1: [['Ceodore', '1'], ['Ramza', '1'], ['Fujin', '1']],\n      },\n    },\n  ],\n};\n\nconst inflictStatusTable: TableDefinition = {\n  title: 'Inflict Status',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'KO',\n      items: {\n        1: [['Exdeath', '1']],\n      },\n    },\n    {\n      header: 'Petrify',\n      items: {\n        3: [['Cid (IV)', '3']],\n      },\n    },\n    {\n      header: 'Silence',\n      items: {\n        3: [['Mustadio', '3']],\n      },\n    },\n    {\n      header: 'Sleep',\n      items: {\n        3: [['Bard', '3']],\n      },\n    },\n    {\n      header: 'Stop',\n      items: {\n        2: [['Mustadio', '2']],\n        1: [['Reno', '1']],\n      },\n    },\n  ],\n};\n\nexport default [\n  physicalNonElementalTable,\n  physicalPercentNonElementalTable,\n  physicalElementalTable,\n  blackNonElementalTable,\n  blackElementalTable,\n  ninjaElementalTable,\n  whiteDamageTable,\n  healTable,\n  inflictStatusTable,\n];\n","import * as React from 'react';\n\nimport { RecordMateriaProps } from './RecordMateriaList';\nimport { RecordMateriaTableGroup } from './RecordMateriaTableGroup';\n\nimport tables from './DamageHealingDefinitions';\n\nexport class DamageHealing extends React.PureComponent<RecordMateriaProps> {\n  render() {\n    return <RecordMateriaTableGroup id=\"damageHealing\" {...this.props} tables={tables} />;\n  }\n}\n","import { TableDefinition } from './RecordMateriaTableDefinitions';\n\nconst elementalTable: TableDefinition = {\n  title: 'Elemental',\n  headers: ['1.3x', '1.2x', '1.1x'],\n  contents: [['13'], ['12'], ['11']],\n  rows: [\n    {\n      header: '(vs. weakness)',\n      items: {\n        13: [['Tyro', '3']],\n        12: [['Luneth', '2'], ['Reks', '2'], ['Tyro', '1b'], ['Dr. Mog', '2']],\n        11: [['Tyro', '1a'], ['Quistis', '1'], ['Nabaat', '1']],\n      },\n    },\n    {\n      header: 'Bio',\n      items: {\n        13: [['Edgar', '3'], ['Quistis', '3']],\n      },\n    },\n    {\n      header: 'Dark',\n      items: {\n        13: [['Garland', '3'], ['Riku', '3']],\n        12: [['Gabranth', '2'], ['Golbez', '2'], ['Kuja', '2'], ['Riku', '2']],\n        11: [['Kuja', '1'], ['Riku', '1'], ['Gabranth', '1']],\n      },\n    },\n    {\n      header: 'Earth',\n      items: {\n        13: [['Tifa', '3']],\n        12: [['Cinque', '2']],\n        11: [['Ingus', '1a'], ['Rude', '1'], ['Enna', '1']],\n      },\n    },\n    {\n      header: 'Fire',\n      items: {\n        13: [['Vivi', '3'], ['Axel', '3']],\n        12: [['Edge', '2'], ['Axel', '2']],\n        11: [['Refia', '1a'], ['Rubicante', '1'], ['Lulu', '1'], ['Axel', '1']],\n      },\n    },\n    {\n      header: 'Holy',\n      items: {\n        13: [['Cecil (Paladin)', '3'], ['Roxas', '3']],\n        12: [['Warrior of Light', '2'], ['Roxas', '2']],\n        11: [['Dorgann', '1'], ['Aerith', '1'], ['Roxas', '1']],\n      },\n    },\n    {\n      header: 'Ice',\n      items: {\n        13: [['Squall', '3']],\n        12: [['Josef', '2'], ['Lulu', '2'], ['Ysayle', '2']],\n      },\n    },\n    {\n      header: 'Lightning',\n      items: {\n        13: [['Lightning', '3']],\n        12: [['Ashe', '2'], ['Raijin', '2']],\n        11: [['Echo', '1']],\n      },\n    },\n    {\n      header: 'Water',\n      items: {\n        13: [['Tidus', '3']],\n        12: [['Strago', '2']],\n        11: [['Arc', '1a'], ['Strago', '1a']],\n      },\n    },\n    {\n      header: 'Wind',\n      items: {\n        13: [['Bartz', '3'], ['Wedge', '3']],\n        12: [['Barbariccia', '2'], ['Cid (VII)', '2'], ['Fujin', '2'], ['Thancred', '2']],\n        11: [['Luneth', '1a'], ['Bartz', '1']],\n      },\n    },\n  ],\n};\n\nconst abilityTable: TableDefinition = {\n  title: 'Abilities',\n  headers: ['~1.4x', '~1.3x', '~1.15x', '13% Dualcast', '8% Dualcast'],\n  contents: [['1_4', '1_35'], ['1_3', '1_25'], ['1_2', '1_15'], ['13w'], ['8w']],\n  rows: [\n    {\n      header: 'Celerity',\n      items: {\n        '1_35': [['Locke', '3']],\n        '1_25': [['Shelke', '2']],\n        '13w': [['Vaan', '2']],\n      },\n    },\n    {\n      header: 'Darkness',\n      items: {\n        '1_4': [['Cecil (Dark Knight)', '3'], ['Zeid', '3']],\n        '1_3': [['Seifer', '2']],\n        '1_15': [['Zeid', '1'], ['Gaffgarion', '1'], ['Sice', '1']],\n        '13w': [['Exdeath', '2'], ['Zeid', '2'], ['Sice', '2']],\n      },\n    },\n    {\n      header: 'Dragoon',\n      items: {\n        '1_35': [['Cid (VII)', '3'], ['Estinien', '3']],\n        '1_3': [['Aranea', '2'], ['Fang', '2'], ['Ricard', '2'], ['Wrieg', '2']],\n        '1_15': [['Freya', '1'], ['Ward', '1']],\n      },\n    },\n    {\n      header: '(any jump ability or SB)',\n      items: {\n        '1_35': [['Kain', '3']],\n        '1_3': [['Kain', '2']],\n        '1_25': [['Dragoon', '2'], ['Estinien', '2']],\n        '1_2': [['Kain', '1a']],\n      },\n    },\n    {\n      header: 'Heavy Physical',\n      items: {\n        '1_4': [['Cinque', '3']],\n      },\n    },\n    {\n      header: 'Knight',\n      items: {\n        '1_4': [['Agrias', '3'], ['Biggs', '3']],\n        '1_3': [['Agrias', '2'], ['Dorgann', '2'], ['Marche', '2']],\n        '1_15': [['Curilla', '1'], ['Haurchefant', '1']],\n        '13w': [['Basch', '2']],\n      },\n    },\n    {\n      header: 'Machinist',\n      items: {\n        '1_35': [['Laguna', '3']],\n        '1_3': [['Setzer', '2']],\n        '1_15': [['Cid (IV)', '1']],\n        '13w': [['Balthier', '2'], ['Prompto', '2']],\n      },\n    },\n    {\n      header: 'Monk',\n      items: {\n        '1_4': [['Sabin', '3'], ['Eight', '3']],\n        '1_3': [['Zell', '2']],\n        '1_15': [['Monk', '1a'], ['Yda', '1']],\n        '13w': [['Master', '2'], ['Sabin', '2'], ['Eight', '2']],\n        '8w': [['Monk', '1b']],\n      },\n    },\n    {\n      header: 'Ninja',\n      items: {\n        '1_4': [['Edge', '3']],\n        '1_3': [['Shadow', '2']],\n        '1_15': [['Kiros', '1']],\n      },\n    },\n    {\n      header: 'Samurai',\n      items: {\n        '1_4': [['Auron', '3'], ['Jack', '3']],\n        '1_3': [['Cyan', '2']],\n        '1_15': [['Ayame', '1']],\n        '13w': [['Auron', '2'], ['Jack', '2']],\n      },\n    },\n    {\n      header: 'Sharpshooter',\n      items: {\n        '1_4': [['Irvine', '3']],\n        '1_3': [['Rufus', '2']],\n        '1_15': [['Rufus', '1']],\n      },\n    },\n    {\n      header: 'Spellblade',\n      items: {\n        '1_4': [['Celes', '3'], ['Machina', '3'], ['Sora', '3']],\n        '1_3': [['Celes', '2'], ['Paine', '2'], ['Sora', '2'], ['Xezat', '2']],\n        '1_15': [['Scott', '1'], ['Paine', '1'], ['Reks', '1'], ['Machina', '1'], ['Sora', '1']],\n        '13w': [['Bartz', '2']],\n      },\n    },\n    {\n      header: 'Support',\n      items: {\n        '1_4': [['Faris', '3'], ['Meliadoul', '3'], ['Morrow', '3']],\n        '1_3': [['Quina', '1b']],\n      },\n    },\n    {\n      header: 'Thief',\n      items: {\n        '1_4': [['Zidane', '3']],\n        '1_3': [['Rikku', '2']],\n        '1_15': [['Thief (I)', '1']],\n        '13w': [['Zidane', '2']],\n      },\n    },\n    {\n      header: 'Witch',\n      items: {\n        '1_35': [['Edea', '3']],\n        '1_3': [['Rapha', '2']],\n        '8w': [['Rapha', '1']],\n      },\n    },\n  ],\n};\n\nconst physicalTable: TableDefinition = {\n  title: 'Physical Damage',\n  headers: ['1.3x', '1.2x', '1.1x'],\n  contents: [['1_3'], ['1_2'], ['1_1']],\n  rows: [\n    {\n      header: 'PHY Axe',\n      items: {\n        '1_3': [['Berserker', '3'], ['Guy', '3']],\n        '1_2': [['Berserker', '1b']],\n        '1_1': [['Berserker', '1a'], ['Gladiator', '1a']],\n      },\n    },\n    {\n      header: 'PHY Blitzball',\n      items: {\n        '1_3': [['Wakka', '3']],\n        '1_1': [['Jecht', '1']],\n      },\n    },\n    {\n      header: 'PHY Bow',\n      items: {\n        '1_3': [['Fran', '3']],\n        '1_2': [['Faris', '2'], ['Fran', '1b']],\n        '1_1': [['Ranger', '1a'], ['Maria', '1b']],\n      },\n    },\n    {\n      header: 'PHY Dagger',\n      items: {\n        '1_3': [['Ignis', '3'], ['Vaan', '3'], ['Lilisette', '3']],\n        '1_2': [['Leila', '2'], ['Locke', '2'], ['Marcus', '2']],\n        '1_1': [['Leila', '1'], ['Thancred', '1'], ['Ignis', '1']],\n      },\n    },\n    {\n      header: 'PHY Fist',\n      items: {\n        '1_3': [['Zell', '3']],\n        '1_2': [['Galuf', '2'], ['Tifa', '2']],\n        '1_1': [['Tifa', '1'], ['Amarant', '1']],\n      },\n    },\n    {\n      header: 'PHY Gun',\n      items: {\n        '1_3': [['Balthier', '3'], ['Prompto', '3'], ['Cater', '3']],\n        '1_2': [['Elena', '2'], ['Irvine', '1b'], ['Vincent', '2']],\n        '1_1': [['Laguna', '1'], ['King', '1'], ['Cater', '1']],\n      },\n    },\n    {\n      header: 'PHY Gun-Arm',\n      items: {\n        '1_3': [['Barret', '3']],\n        '1_2': [['Barret', '2']],\n      },\n    },\n    {\n      header: 'PHY Hairpin',\n      items: {\n        '1_3': [['Red XIII', '3']],\n      },\n    },\n    {\n      header: 'PHY Hammer',\n      items: {\n        '1_2': [['Cid (IV)', '2']],\n        '1_1': [['Viking', '1a']],\n      },\n    },\n    {\n      header: 'PHY Instrument',\n      items: {\n        '1_3': [['Edward', '3']],\n        '1_2': [['Eiko', '2']],\n        '1_1': [['Bard', '1a']],\n      },\n    },\n    {\n      header: 'PHY Katana',\n      items: {\n        '1_3': [['Sephiroth', '3']],\n        '1_2': [['Sephiroth', '2']],\n        '1_1': [['Cyan', '1a'], ['Auron', '1']],\n      },\n    },\n    {\n      header: 'PHY Spear',\n      items: {\n        '1_3': [['Fang', '3']],\n        '1_2': [['Edgar', '2'], ['Nine', '2'], ['Quina', '2']],\n        '1_1': [['Kimahri', '1a'], ['Fang', '1'], ['Estinien', '1'], ['Aranea', '1']],\n      },\n    },\n    {\n      header: 'PHY Sword',\n      items: {\n        '1_3': [['Cloud', '3'], ['Warrior', '3']],\n        '1_2': [['Beatrix', '2'], ['Cecil (Dark Knight)', '2'], ['Biggs', '2']],\n        '1_1': [\n          ['Warrior', '1'],\n          ['Cloud', '1a'],\n          ['Zack', '1'],\n          ['Marche', '1'],\n          ['Morrow', '1'],\n          ['Biggs', '1'],\n        ],\n      },\n    },\n    {\n      header: 'PHY Thrown',\n      items: {\n        '1_3': [['Refia', '3']],\n        '1_2': [['Ninja', '2'], ['Refia', '2']],\n        '1_1': [['Ninja', '1a'], ['Yuffie', '1']],\n      },\n    },\n    {\n      header: 'PHY Whip',\n      items: {\n        '1_2': [['Quistis', '2']],\n      },\n    },\n    {\n      header: 'PHY Hat',\n      items: {\n        '1_1': [['Wedge', '1']],\n      },\n    },\n    {\n      header: 'PHY Helm',\n      items: {\n        '1_3': [['Aranea', '3']],\n        '1_2': [['Viking', '2']],\n      },\n    },\n    {\n      header: 'PHY Lt. Armor',\n      items: {\n        '1_1': [['Ursula', '1']],\n      },\n    },\n  ],\n};\n\nconst magicTable: TableDefinition = {\n  title: 'Magic Damage and Healing',\n  headers: ['~1.3x', '~1.2x', '~1.1x'],\n  contents: [['1_3', '1_25'], ['1_2', '1_15'], ['1_1']],\n  rows: [\n    {\n      header: 'BLK (always)',\n      items: {\n        '1_25': [['Rinoa', '3']],\n        '1_2': [['Dr. Mog', '2']],\n        '1_15': [['Rinoa', '2']],\n      },\n    },\n    {\n      header: 'BLK Dagger',\n      items: {\n        '1_1': [['Palom', '1']],\n      },\n    },\n    {\n      header: 'BLK Bow',\n      items: {\n        '1_2': [['Serah', '2']],\n        '1_1': [['Maria', '1a'], ['Maria', '1b']],\n      },\n    },\n    {\n      header: 'BLK Rod',\n      items: {\n        '1_2': [['Papalymo', '2'], ['Reno', '2']],\n        '1_1': [['Meia', '1'], ['Fusoya', '2'], ['Vivi', '1a']],\n      },\n    },\n    {\n      header: 'BLK Staff',\n      items: {\n        '1_3': [['Matoya', '3'], ['Shantotto', '3']],\n        '1_2': [['Shantotto', '2']],\n        '1_1': [['Shantotto', '1'], ['Montblanc', '1']],\n      },\n    },\n    {\n      header: 'BLK Sword',\n      items: {\n        '1_1': [['Desch', '1']],\n      },\n    },\n    {\n      header: 'BLK Thrown',\n      items: {\n        '1_3': [['Reynn', '3']],\n        '1_2': [['Hope', '2']],\n        '1_1': [['Hope', '1']],\n      },\n    },\n    {\n      header: 'BLK Whip',\n      items: {\n        '1_3': [['Seven', '3']],\n      },\n    },\n    {\n      header: 'BLK Hat',\n      items: {\n        '1_2': [['Wedge', '2']],\n      },\n    },\n    {\n      header: 'BLK Lt. Armor',\n      items: {\n        '1_1': [['Cid Raines', '1']],\n      },\n    },\n    {\n      header: 'SUM (always)',\n      items: {\n        '1_3': [['Yuna', '3']],\n        '1_2': [['Braska', '2'], ['Rydia', '1b'], ['Summoner', '2']],\n        '1_1': [['Meia', '1'], ['Krile', '1']],\n      },\n    },\n    {\n      header: 'SUM Rod',\n      items: {\n        '1_1': [['Meia', '2']],\n      },\n    },\n    {\n      header: 'WHT Damage',\n      items: {\n        '1_3': [['Penelo', '3'], ['Rem', '3']],\n        '1_2': [['Rem', '2'], [\"Y'shtola\", '2']],\n      },\n    },\n    {\n      header: 'BLK/WHT Damage',\n      items: {\n        '1_1': [['Fusoya', '2']],\n      },\n    },\n    {\n      header: 'WHT Healing',\n      items: {\n        '1_3': [['Aria', '3'], ['Lenna', '3'], ['Minwu', '3']],\n        '1_2': [['Aemo', '2'], ['Aerith', '2'], ['Elarra', '2'], ['Minwu', '2'], ['Dr. Mog', '2']],\n        '1_1': [\n          ['Elarra', '1'],\n          ['Lenna', '1'],\n          ['Yuna', '1'],\n          [\"Y'shtola\", '1'],\n          ['Iris', '1'],\n          ['Alma', '1'],\n          ['Deuce', '1'],\n        ],\n      },\n    },\n  ],\n};\n\nconst magicDualcastTable: TableDefinition = {\n  title: 'Magic Dualcast',\n  headers: ['20%', '15%', '13%', '8%'],\n  contents: [['20w'], ['15w'], ['13w'], ['8w']],\n  rows: [\n    {\n      header: 'Black Magic',\n      items: {\n        '15w': [['Magus', '1b'], ['Matoya', '2']],\n        '13w': [['Red Mage', '2'], ['Terra', '2']],\n        '8w': [['Magus', '1a']],\n      },\n    },\n    {\n      header: 'Summoner',\n      items: {\n        '20w': [['Garnet', '2']],\n      },\n    },\n    {\n      header: 'White Magic',\n      items: {\n        '15w': [['Alma', '2'], ['Devout', '1b']],\n        '8w': [['Devout', '1a'], ['Porom', '1']],\n      },\n    },\n    {\n      header: 'Bard',\n      items: {\n        '13w': [['Hilda', '2']],\n      },\n    },\n  ],\n};\n\nexport default [elementalTable, abilityTable, physicalTable, magicTable, magicDualcastTable];\n","import * as React from 'react';\n\nimport { RecordMateriaProps } from './RecordMateriaList';\nimport { RecordMateriaTableGroup } from './RecordMateriaTableGroup';\n\nimport tables from './MiscDefinitions';\n\nexport class Misc extends React.PureComponent<RecordMateriaProps> {\n  render() {\n    return <RecordMateriaTableGroup id=\"attackReplacement\" {...this.props} tables={tables} />;\n  }\n}\n","import { TableDefinition } from './RecordMateriaTableDefinitions';\n\nconst statusTable: TableDefinition = {\n  title: 'Status',\n  headers: ['Start (RM3)', 'Start (RM1-2)', 'Low HP or Counter'],\n  contents: [['3'], ['2', '1'], ['counter', 'low']],\n  rows: [\n    {\n      header: 'Haste',\n      items: {\n        3: [['Gilgamesh', '3'], ['Marcus', '3'], ['Zack', '3'], ['Noel', '3']],\n        2: [['Gau', '2'], ['Lion', '2'], ['Thief (I)', '2'], ['Montblanc', '2'], ['Ranger', '2']],\n        1: [\n          ['Luneth', '1b'],\n          ['Zidane', '1'],\n          ['Balthier', '1'],\n          ['Orlandeau', '1'],\n          ['Eight', '1'],\n        ],\n        low: [['Tidus', '1a']],\n        counter: [['Iris', '3']],\n      },\n    },\n    {\n      header: 'Protect',\n      items: {\n        3: [['Gilgamesh', '3']],\n        2: [['Knight', '2'], ['Gladiolus', '2']],\n        1: [['Gordon', '1b'], ['Refia', '1b']],\n        counter: [['Steiner', '1b'], ['Angeal', '1'], ['Gogo (VI)', '1']],\n        low: [['Cecil (Paladin)', '1a'], ['Edgar', '1']],\n      },\n    },\n    {\n      header: 'Shell',\n      items: {\n        3: [['Gilgamesh', '3']],\n        2: [['Rude', '2']],\n        1: [['Arc', '1b']],\n        low: [['Warrior of Light', '1a'], ['Rydia', '1a']],\n      },\n    },\n    {\n      header: 'Reflect',\n      items: {\n        1: [['Gogo', '1'], ['Red XIII', '1a']],\n      },\n    },\n    {\n      header: 'Regen (hi)',\n      items: {\n        2: [['Cait Sith', '2'], ['Lenna', '2']],\n        low: [['Red XIII', '1b'], ['Wakka', '2']],\n      },\n    },\n    {\n      header: 'Regen (mid)',\n      items: {\n        1: [['Ingus', '1b']],\n      },\n    },\n    {\n      header: 'Regen (lo)',\n      items: {\n        2: [['Rude', '2'], ['Gogo', '2']],\n        1: [['Sabin', '1'], ['Prishe', '1'], ['Noel', '1'], ['Lann', '1']],\n        low: [['Garnet', '1a'], ['Sazh', '1']],\n      },\n    },\n    {\n      header: 'Retaliate',\n      items: {\n        2: [['Gogo', '2']],\n        low: [['Cyan', '1b']],\n      },\n    },\n    {\n      header: 'Draw Fire',\n      items: {\n        2: [['Amarant', '2'], ['Delita', '2']],\n      },\n    },\n    {\n      header: 'Sentinel',\n      items: {\n        3: [['Curilla', '3'], ['Marche', '3']],\n      },\n    },\n    {\n      header: 'P. Blink',\n      items: {\n        3: [['Ace', '3'], ['Yuffie', '3']],\n        low: [['Ninja', '1b']],\n      },\n    },\n    {\n      header: 'M. Blink',\n      items: {\n        3: [['Vayne', '3']],\n        1: [['Ovelia', '1'], ['Reynn', '1'], ['Seven', '1']],\n        low: [['Kimahri', '1b']],\n      },\n    },\n    {\n      header: 'Doom',\n      items: {\n        3: [['Kuja', '3']],\n      },\n    },\n    {\n      header: 'Hi Fastcast',\n      items: {\n        3: [['Orlandeau', '3']],\n      },\n    },\n    {\n      header: 'Last Stand',\n      items: {\n        3: [['Amarant', '3']],\n      },\n    },\n    {\n      header: 'Reraise',\n      items: {\n        3: [['Scott', '3']],\n      },\n    },\n    {\n      header: 'Berserk',\n      items: {\n        1: [['Galuf', '1a'], ['Umaro', '1'], ['Cid (VII)', '1a'], ['Fran', '1a']],\n      },\n    },\n  ],\n};\n\nconst expTable: TableDefinition = {\n  title: 'Exp. Up',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['1', '2']],\n  rows: [\n    {\n      header: '40% chance',\n      items: {\n        3: [['Luneth', '3'], ['Elarra', '3']],\n      },\n    },\n    {\n      header: '20% chance',\n      items: {\n        2: [['Onion Knight', '2'], ['Palom', '2'], ['Relm', '2']],\n        1: [['Cid (VII)', '1b']],\n      },\n    },\n  ],\n};\n\nconst selfHealTable: TableDefinition = {\n  title: 'Self Heal',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'Counter',\n      items: {\n        3: [['Gaffgarion', '3'], ['Monk', '3']],\n        2: [['Cecil (Paladin)', '2'], ['Monk', '2'], ['Gaffgarion', '2']],\n        1: [['Vanille', '1']],\n      },\n    },\n    {\n      header: 'Drain Attack',\n      items: {\n        3: [['Emperor', '3']],\n        2: [['Prishe', '2'], ['Thief', '2'], ['Dark Knight', '2']],\n        1: [['Dark Knight', '1b'], ['Rinoa', '1'], ['Quina', '1a']],\n      },\n    },\n    {\n      header: 'Heal',\n      items: {\n        2: [['Noctis', '2']],\n        1: [['Cecil (Paladin)', '1b']],\n      },\n    },\n  ],\n};\n\nconst counterTable: TableDefinition = {\n  title: 'Counter',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: 'PHY',\n      items: {\n        3: [['Gaffgarion', '3']],\n        2: [['Samurai', '2'], ['Ignis', '2'], ['Gaffgarion', '2']],\n        1: [['Galuf', '1b'], ['Cloud', '1b']],\n      },\n    },\n    {\n      header: 'MAG',\n      items: {\n        1: [['Emperor', '1'], ['Strago', '1b']],\n      },\n    },\n    {\n      header: 'Self heal',\n      items: {\n        3: [['Gaffgarion', '3'], ['Monk', '3']],\n        2: [['Monk', '2'], ['Cecil (Paladin)', '2'], ['Gaffgarion', '2']],\n        1: [['Vanille', '1']],\n      },\n    },\n    {\n      header: 'Reduce dmg.',\n      items: {\n        2: [['Zack', '2']],\n      },\n    },\n    {\n      header: 'Gain status',\n      items: {\n        3: [['Iris', '3']],\n        1: [['Steiner', '1b'], ['Angeal', '1'], ['Gogo (VI)', '1']],\n      },\n    },\n  ],\n};\n\nconst sbTable: TableDefinition = {\n  title: 'SB Gauge',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: '500 points',\n      items: {\n        2: [['Tyro', '2'], ['Cloud', '2']],\n      },\n    },\n    {\n      header: '1.5x abilities',\n      items: {\n        2: [['Ramza', '2'], ['Tidus', '2']],\n      },\n    },\n    {\n      header: '1.25x all',\n      items: {\n        2: [['Steiner', '2']],\n      },\n    },\n    {\n      header: '1.5x on dmg.',\n      items: {\n        2: [['Squall', '2']],\n      },\n    },\n  ],\n};\n\nconst atbTable: TableDefinition = {\n  title: 'ATB Gauge',\n  headers: ['RM3', 'RM1-2'],\n  contents: [['3'], ['2', '1']],\n  rows: [\n    {\n      header: '50% chance',\n      items: {\n        2: [['Kelger', '2']],\n        1: [['Zell', '1b']],\n      },\n    },\n    {\n      header: '15% chance',\n      items: {\n        1: [['Elena', '1'], ['Lightning', '1'], ['Wakka', '1a']],\n      },\n    },\n  ],\n};\n\nconst abilityRefillTable: TableDefinition = {\n  title: 'Ability Refill',\n  headers: ['100% chance', '≤50% chance'],\n  contents: [['100'], ['50', '40']],\n  rows: [\n    {\n      header: 'Black Magic',\n      items: {\n        100: [['Black Mage', '1b']],\n        50: [['Matoya', '1'], ['Terra', '1'], ['Black Mage', '1a']],\n      },\n    },\n    {\n      header: 'Black or White Magic',\n      items: {\n        100: [['Fusoya', '1b'], ['Tama', '2']],\n        40: [['Fusoya', '1a']],\n      },\n    },\n    {\n      header: 'White Magic',\n      items: {\n        100: [['Aria', '2'], ['White Mage', '1b']],\n        50: [['Larsa', '1'], ['White Mage', '1a']],\n      },\n    },\n    {\n      header: 'Summoning',\n      items: {\n        100: [['Summoner', '1b']],\n        50: [['Summoner', '1a']],\n      },\n    },\n    {\n      header: 'White Magic or Summoning',\n      items: {\n        40: [['Aemo', '1']],\n      },\n    },\n    {\n      header: 'Combat',\n      items: {\n        100: [['Warrior', '2']],\n        50: [['Setzer', '1']],\n      },\n    },\n    {\n      header: 'Celerity',\n      items: {\n        50: [['Kelger', '1'], ['Locke', '1'], ['Shelke', '1']],\n      },\n    },\n    {\n      header: 'Support',\n      items: {\n        100: [['Morrow', '2'], ['Red XIII', '2']],\n        50: [['Faris', '1'], ['Barret', '1']],\n      },\n    },\n    {\n      header: 'Bard',\n      items: {\n        100: [['Edward', '1b']],\n        50: [['Edward', '1a']],\n      },\n    },\n    {\n      header: 'Dancer',\n      items: {\n        100: [['Mog', '1b'], ['Lilisette', '2']],\n        50: [['Mog', '1a'], ['Lilisette', '1']],\n      },\n    },\n    {\n      header: 'Dragoon',\n      items: {\n        100: [['Dragoon', '1b']],\n        50: [['Dragoon', '1a']],\n      },\n    },\n    {\n      header: 'Knight',\n      items: {\n        100: [['Gilgamesh', '2']],\n        50: [['Beatrix', '1']],\n      },\n    },\n    {\n      header: 'Machinist',\n      items: {\n        100: [['King', '2'], ['Cater', '2']],\n      },\n    },\n    {\n      header: 'Monk',\n      items: {\n        50: [['Yang', '1']],\n      },\n    },\n    {\n      header: 'Ninja',\n      items: {\n        50: [['Edge', '1']],\n      },\n    },\n    {\n      header: 'Samurai',\n      items: {\n        100: [['Samurai', '1b']],\n        50: [['Samurai', '1a'], ['Jack', '1']],\n      },\n    },\n    {\n      header: 'Spellblade',\n      items: {\n        100: [['Spellblade', '1b']],\n        50: [['Xezat', '1'], ['Spellblade', '1a']],\n      },\n    },\n    {\n      header: 'Thief',\n      items: {\n        100: [['Thief', '1b']],\n        50: [['Rikku', '1'], ['Thief', '1a']],\n      },\n    },\n  ],\n};\n\nexport default [\n  statusTable,\n  expTable,\n  selfHealTable,\n  counterTable,\n  sbTable,\n  atbTable,\n  abilityRefillTable,\n];\n","import * as React from 'react';\n\nimport { ColDef, GridApi, GridReadyEvent, RowNode } from 'ag-grid';\nimport { AgGridReact } from 'ag-grid-react';\nimport * as ReactTooltip from 'react-tooltip';\n\nimport * as _ from 'lodash';\n\nimport { RecordMateriaDetail } from '../../actions/recordMateria';\nimport { series, SeriesId } from '../../data/series';\nimport { GridContainer } from '../common/GridContainer';\nimport { DescriptionCell } from './DescriptionCell';\nimport { RecordMateriaTooltip } from './RecordMateriaTooltip';\nimport { StatusCell } from './StatusCell';\n\ninterface Props {\n  recordMateria: { [id: number]: RecordMateriaDetail };\n  isAnonymous?: boolean;\n}\n\ninterface State {\n  filter: string | undefined;\n  count: number | undefined;\n}\n\ntype Comparator = ColDef['comparator'];\nfunction compareByNumberField(fieldName: string): Comparator {\n  return (valueA, valueB, nodeA, nodeB) => {\n    const getField = (node: RowNode | undefined) => ((node || { data: {} }).data || {})[fieldName];\n    return getField(nodeA) - getField(nodeB);\n  };\n}\n\nexport class RecordMateriaGrid extends React.Component<Props, State> {\n  columnDefs: ColDef[];\n  objectValues = _.memoize(_.values);\n  api: GridApi | undefined;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.columnDefs = [\n      {\n        headerName: 'Series',\n        width: 65,\n        field: 'characterId',\n        valueGetter: ({ data }: { data: RecordMateriaDetail }) =>\n          series.short[data.seriesId as SeriesId],\n        comparator: compareByNumberField('characterId'),\n      },\n      { headerName: 'Character', width: 115, field: 'characterName' },\n      { headerName: 'RM', width: 45, field: 'order' },\n      { headerName: 'Name', width: 175, field: 'name' },\n      {\n        headerName: 'Description',\n        width: 330,\n        field: 'description',\n        valueGetter: ({ data }: { data: RecordMateriaDetail }) =>\n          data.description.replace('<br>', ' '),\n        cellRendererFramework: DescriptionCell,\n      },\n    ];\n    if (!this.props.isAnonymous) {\n      this.columnDefs.push({\n        headerName: 'Status',\n        width: 150,\n        field: 'status',\n        valueGetter: ({ data }: { data: RecordMateriaDetail }) => data.statusDescription,\n        cellRendererFramework: StatusCell,\n        comparator: compareByNumberField('status'),\n      });\n    }\n    this.state = {\n      filter: '',\n      count: undefined,\n    };\n  }\n\n  handleGridReady = ({ api }: GridReadyEvent) => {\n    this.api = api;\n    this.setState({ count: api.getDisplayedRowCount() });\n  };\n\n  handleFilter = (e: React.FormEvent<HTMLInputElement>) => {\n    this.setState({ filter: e.currentTarget.value });\n  };\n\n  getRowNodeId = (row: RecordMateriaDetail) => '' + row.id;\n\n  componentDidUpdate() {\n    this.updateCount();\n  }\n\n  updateCount() {\n    if (this.api) {\n      const newCount = this.api.getDisplayedRowCount();\n      if (this.state.count !== newCount) {\n        this.setState({ count: newCount });\n      }\n    }\n  }\n\n  render() {\n    const { recordMateria } = this.props;\n    const { count } = this.state;\n    return (\n      <GridContainer style={{ height: '500px', width: '100%' }}>\n        <div className=\"form-group\">\n          <input\n            className=\"form-control form-control-sm\"\n            placeholder=\"Search...\"\n            value={this.state.filter}\n            onChange={this.handleFilter}\n          />\n        </div>\n        <AgGridReact\n          enableSorting={true}\n          enableColResize={true}\n          columnDefs={this.columnDefs}\n          rowData={this.objectValues(recordMateria)}\n          quickFilterText={this.state.filter}\n          deltaRowDataMode={true}\n          getRowNodeId={this.getRowNodeId}\n          onGridReady={this.handleGridReady}\n          onViewportChanged={ReactTooltip.rebuild}\n          onRowDataChanged={ReactTooltip.rebuild}\n          onFilterChanged={ReactTooltip.rebuild}\n        />\n        <div className=\"text-right mt-1 text-muted\">{count != null && count + ' materia'}</div>\n        <RecordMateriaTooltip\n          id={DescriptionCell.ID}\n          descriptionOnly={true}\n          recordMateria={recordMateria}\n        />\n      </GridContainer>\n    );\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: any;\n\n  [s: string]: any;\n}\n\n// Also referenced in app.html and app.global.scss\n// noinspection SpellCheckingInspection\nconst theme = 'ag-theme-balham';\n\nexport class GridContainer extends React.Component<Props> {\n  render() {\n    const { className, children, ...props } = this.props;\n    return (\n      <div className={(className || '') + ' ' + theme} {...props}>\n        {children}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport { ICellRendererParams } from 'ag-grid';\n\nimport { RecordMateriaDetail } from '../../actions/recordMateria';\n\ninterface Props {\n  value: string;\n  data: RecordMateriaDetail;\n}\n\nexport class DescriptionCell extends React.PureComponent<ICellRendererParams & Props> {\n  static ID = 'RECORD_MATERIA_DESCRIPTION_CELL';\n  render() {\n    const { value, data } = this.props;\n    return (\n      <span data-tip={data.id} data-for={DescriptionCell.ID}>\n        {value}\n      </span>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport { RecordMateriaDetail, RecordMateriaStatus } from '../../actions/recordMateria';\nimport { StatusIcon } from './StatusIcon';\n\ninterface Props {\n  value: RecordMateriaStatus;\n  data: RecordMateriaDetail;\n}\n\nexport class StatusCell extends React.PureComponent<Props> {\n  render() {\n    const { data } = this.props;\n    return (\n      <span>\n        <StatusIcon status={data.status} /> {data.statusDescription}\n      </span>\n    );\n  }\n}\n","import * as React from 'react';\n\nimport { RecordMateriaProps } from './RecordMateriaList';\nimport { RecordMateriaTableGroup } from './RecordMateriaTableGroup';\n\nimport tables from './StatBuffsDefinitions';\n\nexport class StatBuffs extends React.PureComponent<RecordMateriaProps> {\n  render() {\n    return <RecordMateriaTableGroup id=\"statBuff\" {...this.props} tables={tables} />;\n  }\n}\n","import { TableDefinition } from './RecordMateriaTableDefinitions';\n\nconst atkTable: TableDefinition = {\n  title: 'ATK Buff',\n  headers: ['≥ +15% ATK', '+13% ATK/x', '+10% ATK/x', '+10-13% ATK'],\n  contents: [['15'], ['13x'], ['10x'], ['13', '10']],\n  rows: [\n    {\n      header: '(always)',\n      items: {\n        '13x': [['Vayne', '3'], ['Firion', '3']],\n        '10x': [\n          ['Ceodore', '3'],\n          ['Larsa', '3'],\n          ['Marcus', '3'],\n          ['Noel', '3'],\n          ['Zack', '3'],\n          ['Firion', '2'],\n          ['Josef', '1a'],\n          ['Laguna', '2'],\n          ['Irvine', '1a'],\n          ['Leo', '1'],\n          ['Sephiroth', '1'],\n        ],\n        '10': [\n          ['Firion', '1'],\n          ['Zell', '1a'],\n          ['Bard', '2'],\n          ['Gau', '2'],\n          ['Lann', '2'],\n          ['Lion', '2'],\n          ['Thief (I)', '2'],\n        ],\n      },\n    },\n    {\n      header: '(downside)',\n      items: {\n        '15': [['Ricard', '1a'], ['Josef', '3'], ['Sice', '3']],\n        '10x': [['Kain', '1b'], ['Irvine', '2'], ['Cid (XIV)', '1'], ['Noctis', '1']],\n        '10': [\n          ['Berserker', '2'],\n          ['Guy', '1'],\n          ['Leon', '2'],\n          ['Gau', '1'],\n          ['Vaan', '1'],\n          ['Delita', '1'],\n          ['Nine', '1'],\n        ],\n      },\n    },\n    {\n      header: 'Axe',\n      items: {\n        '10x': [['Guy', '2']],\n      },\n    },\n    {\n      header: 'Dagger',\n      items: {\n        '13x': [['Thancred', '3'], ['Thief (I)', '3']],\n        '10': [['Marcus', '1']],\n      },\n    },\n    {\n      header: 'Fist',\n      items: {\n        '15': [['Elena', '3']],\n        '13x': [['Jecht', '3']],\n        '13': [['Ursula', '2']],\n        '10x': [['Snow', '2']],\n      },\n    },\n    {\n      header: 'Gun',\n      items: {\n        '15': [['Rufus', '3']],\n        '13x': [['Cid (XIV)', '3']],\n        '10x': [['Sazh', '3']],\n        '13': [['Cid (XIV)', '2']],\n        '10': [['Prompto', '1']],\n      },\n    },\n    {\n      header: 'Hammer',\n      items: {\n        15: [['Viking', '3']],\n        13: [['Umaro', '2']],\n      },\n    },\n    {\n      header: 'Katana',\n      items: {\n        '13x': [['Cyan', '3']],\n      },\n    },\n    {\n      header: 'Spear',\n      items: {\n        '15': [['Nine', '3']],\n        '13x': [['Gordon', '3'], ['Wrieg', '3']],\n        '13': [['Ward', '2']],\n      },\n    },\n    {\n      header: 'Sword',\n      items: {\n        '13x': [['Warrior of Light', '3']],\n        '10': [['Queen', '1']],\n      },\n    },\n    {\n      header: 'Thrown',\n      items: {\n        '13x': [['Lann', '3']],\n      },\n    },\n    {\n      header: 'Lt. Armor',\n      items: {\n        '13x': [['Wol', '3']],\n        '10x': [['Freya', '2']],\n      },\n    },\n    {\n      header: 'H. Armor',\n      items: {\n        '13x': [['Leon', '3']],\n      },\n    },\n    {\n      header: 'Shield',\n      items: {\n        '15': [['Gladiolus', '3']],\n        '13x': [['Minfilia', '3']],\n        '13': [['Minfilia', '2']],\n        '10': [['Basch', '1'], ['Minfilia', '1']],\n      },\n    },\n  ],\n};\n\nconst atkMagTable: TableDefinition = {\n  title: 'ATK/MAG Buff',\n  headers: ['+13% ATK/MAG', '+10% ATK/MAG', '+10% ATK/MAG (w/ downside)'],\n  contents: [['13'], ['10'], ['10-']],\n  rows: [\n    {\n      header: '(always)',\n      items: {\n        '10': [['Yuffie', '3']],\n        '10-': [['Desch', '2']],\n      },\n    },\n    {\n      header: 'Fist',\n      items: {\n        13: [['Rude', '3']],\n        10: [['Vayne', '2'], ['Cid Raines', '2']],\n      },\n    },\n  ],\n};\n\nconst magTable: TableDefinition = {\n  title: 'MAG Buff',\n  headers: ['≥ +15% MAG', '+13% MAG/x', '+10-13% MAG', '+10% MAG (w/ downside)'],\n  contents: [['15'], ['13x'], ['13', '10'], ['10-']],\n  rows: [\n    {\n      header: '(always)',\n      items: {\n        '15': [['Vivi', '1b'], ['Echo', '3'], ['Serah', '3']],\n        '13x': [['Ace', '3'], ['Terra', '3']],\n        '10': [['Krile', '2'], ['Montblanc', '2'], ['Reynn', '2']],\n        '10-': [\n          ['Ashe', '1'],\n          ['Echo', '2'],\n          ['Serah', '1'],\n          ['Braska', '1'],\n          ['Eiko', '1'],\n          ['Kefka', '1'],\n          ['Ysayle', '1'],\n          ['Barbariccia', '1'],\n          ['Golbez', '1'],\n        ],\n      },\n    },\n    {\n      header: 'Book',\n      items: {\n        10: [['Alphinaud', '1']],\n      },\n    },\n    {\n      header: 'Bow',\n      items: {\n        15: [['Maria', '3']],\n      },\n    },\n    {\n      header: 'Doll',\n      items: {\n        15: [['Lulu', '3']],\n      },\n    },\n    {\n      header: 'Fists',\n      items: {\n        15: [['Cid Raines', '3']],\n      },\n    },\n    {\n      header: 'Gun',\n      items: {\n        10: [['Vincent', '1']],\n      },\n    },\n    {\n      header: 'Instrument',\n      items: {\n        15: [['Kefka', '3']],\n        10: [['Kefka', '2']],\n      },\n    },\n    {\n      header: 'Rod',\n      items: {\n        '15': [['Palom', '3']],\n        '13x': [['Golbez', '3'], ['Papalymo', '3']],\n        '10': [['Papalymo', '1'], ['Seymour', '1']],\n      },\n    },\n    {\n      header: 'Staff',\n      items: {\n        '15': [['Braska', '3']],\n        '13x': [['Seymour', '3']],\n        '10': [['Onion Knight', '1']],\n      },\n    },\n    {\n      header: 'Sword',\n      items: {\n        15: [['Ashe', '3']],\n        13: [['Nabaat', '2']],\n      },\n    },\n    {\n      header: 'Thrown',\n      items: {\n        '15': [['Hope', '3']],\n        '13x': [['Fujin', '3']],\n        '13': [['Ace', '2'], ['Enna', '2']],\n        '10': [['Ace', '1'], ['Edea', '2']],\n      },\n    },\n    {\n      header: 'Whip',\n      items: {\n        '15': [['Krile', '3']],\n        '13x': [['Rydia', '3']],\n        '10': [['Rydia', '2'], ['Seven', '2']],\n      },\n    },\n    {\n      header: 'Robe',\n      items: {\n        15: [['Montblanc', '3']],\n      },\n    },\n    {\n      header: 'H. Armor',\n      items: {\n        '13x': [['Exdeath', '3']],\n      },\n    },\n  ],\n};\n\nconst magMndTable: TableDefinition = {\n  title: 'MAG/MND Buff',\n  headers: ['+13% MAG/MND', '+10% MAG/MND'],\n  contents: [['13'], ['10']],\n  rows: [\n    {\n      header: '(always)',\n      items: {\n        10: [['Fusoya', '3']],\n      },\n    },\n    {\n      header: 'Book',\n      items: {\n        13: [['Alphinaud', '3']],\n        10: [['Alphinaud', '2'], ['Dr. Mog', '1']],\n      },\n    },\n    {\n      header: 'Dagger',\n      items: {\n        13: [['Garnet', '3']],\n      },\n    },\n    {\n      header: 'Instrument',\n      items: {\n        13: [['Cait Sith', '3']],\n      },\n    },\n    {\n      header: 'Rod',\n      items: {\n        13: [['Aerith', '3']],\n        10: [['Tellah', '2']],\n      },\n    },\n    {\n      header: 'Staff',\n      items: {\n        13: [['Onion Knight', '3'], ['Tellah', '3']],\n        10: [['Arc', '2']],\n      },\n    },\n    {\n      header: 'Hat',\n      items: {\n        13: [['Gogo', '3']],\n      },\n    },\n    {\n      header: 'Robe',\n      items: {\n        13: [['Arc', '3']],\n      },\n    },\n    {\n      header: 'Lt. Armor',\n      items: {\n        13: [['Rubicante', '3'], ['Tama', '3']],\n      },\n    },\n  ],\n};\n\nconst mndTable: TableDefinition = {\n  title: 'MND Buff',\n  headers: ['+25% MND', '+10-13% MND/x', '+20% MND', '+20% MND (w/ downside)', '+10% MND'],\n  contents: [['25'], ['13x', '10x'], ['20'], ['20-'], ['10']],\n  rows: [\n    {\n      header: '(always)',\n      items: {\n        '10x': [['Ceodore', '3'], ['Larsa', '3']],\n        '20': [['Gogo (VI)', '2']],\n        '10': [['Larsa', '2']],\n        '20-': [['Aria', '1'], ['Mog', '2'], ['Penelo', '2'], ['Sarah', '1']],\n      },\n    },\n    {\n      header: 'Book',\n      items: {\n        25: [['Orran', '3']],\n        20: [['Orran', '2']],\n        10: [['Orran', '1']],\n      },\n    },\n    {\n      header: 'Bow',\n      items: {\n        25: [['Rosa', '3']],\n        20: [['Rosa', '2']],\n        10: [['Rosa', '1']],\n      },\n    },\n    {\n      header: 'Dagger',\n      items: {\n        10: [['Rem', '1']],\n      },\n    },\n    {\n      header: 'Instrument',\n      items: {\n        25: [['Deuce', '3'], ['Eiko', '3']],\n        10: [['Deuce', '2'], ['Hilda', '1']],\n      },\n    },\n    {\n      header: 'Rod',\n      items: {\n        25: [['Aemo', '3'], ['Selphie', '3']],\n        20: [['Yuna', '2']],\n        10: [['Relm', '1'], ['Tama', '1']],\n      },\n    },\n    {\n      header: 'Spear',\n      items: {\n        25: [['Mog', '3']],\n      },\n    },\n    {\n      header: 'Staff',\n      items: {\n        '25': [['Aphmau', '3'], ['Sarah', '3']],\n        '10x': [['Alma', '3']],\n        '20': [['Porom', '2']],\n        '10': [['Minwu', '1'], ['Aphmau', '1'], ['Penelo', '1']],\n      },\n    },\n    {\n      header: 'Hat',\n      items: {\n        25: [['Porom', '3']],\n      },\n    },\n    {\n      header: 'Robe',\n      items: {\n        '25': [['Relm', '3']],\n        '13x': [['Ovelia', '3']],\n      },\n    },\n  ],\n};\n\nconst defResTable: TableDefinition = {\n  title: 'DEF/RES Buff',\n  headers: ['+25% DEF', '+20% DEF/RES', '+20% DEF', '+20% RES', '+10% DEF or RES'],\n  contents: [['25d'], ['20dr'], ['20d'], ['20r'], ['10dr', '10d']],\n  rows: [\n    {\n      header: '(always)',\n      items: {\n        '20d': [\n          ['Gabranth', '3'],\n          ['Scott', '3'],\n          ['Gladiolus', '1'],\n          ['Leon', '1a'],\n          ['Snow', '1b'],\n          ['Vayne', '1'],\n        ],\n        '20r': [['Gordon', '1a']],\n        '10dr': [['Edward', '2']],\n        '10d': [['Snow', '1a']],\n      },\n    },\n    {\n      header: 'Gun',\n      items: {\n        '20dr': [['Vincent', '3']],\n      },\n    },\n    {\n      header: 'Spear',\n      items: {\n        '10d': [['Wrieg', '1']],\n      },\n    },\n    {\n      header: 'Sword',\n      items: {\n        '20dr': [['Delita', '3']],\n        '20d': [['Angeal', '2'], ['Curilla', '2']],\n      },\n    },\n    {\n      header: 'Bracer',\n      items: {\n        '25d': [['Angeal', '3']],\n      },\n    },\n    {\n      header: 'Hat',\n      items: {\n        '20dr': [['Gogo (VI)', '3']],\n      },\n    },\n    {\n      header: 'Helm',\n      items: {\n        '25d': [['Knight', '3']],\n        '10d': [['Dark Knight', '1a'], ['Knight', '1']],\n      },\n    },\n    {\n      header: 'Lt. Armor',\n      items: {\n        '25d': [['Snow', '3']],\n        '20d': [['Gladiator', '2'], ['Meliadoul', '2']],\n        '10d': [['Wol', '1']],\n      },\n    },\n    {\n      header: 'H. Armor',\n      items: {\n        '25d': [['Steiner', '3']],\n        '20dr': [['Dorgann', '3'], ['Leo', '3'], ['Ceodore', '2']],\n        '20d': [['Garland', '2']],\n        '10d': [['Gilgamesh', '1'], ['Steiner', '1a']],\n      },\n    },\n    {\n      header: 'Robe',\n      items: {\n        '20dr': [[\"Y'shtola\", '3']],\n      },\n    },\n    {\n      header: 'Shield',\n      items: {\n        '25d': [['Ingus', '3']],\n        '20dr': [['Basch', '3'], ['Haurchefant', '3']],\n        '20d': [['Haurchefant', '2'], ['Ingus', '2']],\n        '20r': [['Gordon', '2']],\n      },\n    },\n  ],\n};\n\nexport default [atkTable, atkMagTable, magTable, magMndTable, mndTable, defResTable];\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_29O5OY7wS4sHCIM8mdtXkT\"};","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Route, RouteComponentProps } from 'react-router';\nimport { Dispatch } from 'redux';\n\nimport { loadBanners } from '../actions/relicDraws';\nimport { BadRelicDrawMessage } from '../components/relicDraws/BadRelicDrawMessage';\nimport { RelicDrawBannerList } from '../components/relicDraws/RelicDrawBannerList';\nimport LoadMissingPrompt from '../components/shared/LoadMissingPrompt';\nimport { IState } from '../reducers';\nimport { progressKey } from '../sagas/loadBanners';\nimport {\n  getBannersAndGroups,\n  getMissingBanners,\n  RelicDrawBannersAndGroups,\n} from '../selectors/relicDraws';\nimport { Page } from './Page';\nimport RelicDrawBannerPage from './RelicDrawBannerPage';\nimport RelicDrawGroupPage from './RelicDrawGroupPage';\n\ninterface Props {\n  bannersAndGroups: RelicDrawBannersAndGroups;\n  missingBanners: number[];\n  dispatch: Dispatch;\n}\n\nexport class RelicDrawsPage extends React.PureComponent<Props & RouteComponentProps> {\n  groupLink = (group: string) => this.props.match.url + '/group-' + group;\n  bannerLink = (banner: string | number) => this.props.match.url + '/banner' + banner;\n  groupBannerLink = (group: string, banner: string | number) =>\n    this.props.match.url + '/group-' + group + '/banner' + banner;\n\n  handleLoad = () => {\n    const { missingBanners, dispatch } = this.props;\n    dispatch(loadBanners(missingBanners));\n  };\n\n  renderContents() {\n    const { bannersAndGroups, missingBanners, match } = this.props;\n    const details = bannersAndGroups['undefined'];\n    if (!details) {\n      return <BadRelicDrawMessage />;\n    }\n    const isAnonymous = !process.env.IS_ELECTRON;\n    return (\n      <>\n        <LoadMissingPrompt\n          missingCount={missingBanners.length}\n          missingText=\"Details for %s have not been loaded.\"\n          countText=\"banner\"\n          loadingText=\"Loading banner details\"\n          onLoad={this.handleLoad}\n          progressKey={progressKey}\n        />\n\n        {/* HACK: Support one layer of nesting (group -> banner) */}\n        <Route\n          path={this.groupBannerLink(':group', ':banner')}\n          render={(props: RouteComponentProps<any>) => (\n            <RelicDrawBannerPage\n              {...props}\n              isAnonymous={isAnonymous}\n              backLink={this.groupLink(props.match.params.group)}\n            />\n          )}\n        />\n\n        <Route\n          exact\n          path={this.groupLink(':group')}\n          render={(props: RouteComponentProps<any>) => (\n            <RelicDrawGroupPage\n              {...props}\n              isAnonymous={isAnonymous}\n              bannerLink={(banner: string | number) =>\n                this.groupBannerLink(props.match.params.group, banner)\n              }\n              groupLink={this.groupLink}\n              backLink={match.url}\n            />\n          )}\n        />\n        <Route\n          path={this.bannerLink(':banner')}\n          render={(props: RouteComponentProps<any>) => (\n            <RelicDrawBannerPage {...props} isAnonymous={isAnonymous} backLink={match.url} />\n          )}\n        />\n\n        <Route\n          exact\n          path={match.url}\n          render={() => (\n            <RelicDrawBannerList\n              details={details}\n              isAnonymous={isAnonymous}\n              bannerLink={this.bannerLink}\n              groupLink={this.groupLink}\n            />\n          )}\n        />\n      </>\n    );\n  }\n\n  render() {\n    return <Page title=\"Relic Draws\">{this.renderContents()}</Page>;\n  }\n}\n\nexport default connect((state: IState) => ({\n  bannersAndGroups: getBannersAndGroups(state),\n  missingBanners: getMissingBanners(state),\n}))(RelicDrawsPage);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_2EMVpxZlO8-JPMbVmq1xne\",\"image\":\"_3OUKRIyrrB0f_sLfou9yfy\",\"details\":\"_1R3eJiZqvUs4u646Les5hT\",\"count\":\"_2NYzzeyC3QWN7Im72S34Pb\",\"closedAt\":\"Jb21i9TPBO6JXjLTYMx5i\"};","import { AxiosResponse } from 'axios';\nimport { put, select, takeEvery } from 'redux-saga/effects';\nimport { getType } from 'typesafe-actions';\n\nimport { setProgress } from '../actions/progress';\nimport {\n  loadBanners,\n  setExchangeShopSelections,\n  setRelicDrawProbabilities,\n} from '../actions/relicDraws';\nimport { getLang } from '../actions/session';\nimport * as apiUrls from '../api/apiUrls';\nimport * as gachaSchemas from '../api/schemas/gacha';\nimport { convertExchangeShopSelections, convertRelicDrawProbabilities } from '../proxy/relicDraws';\nimport { IState } from '../reducers';\nimport { RelicDrawState } from '../reducers/relicDraws';\nimport { logger } from '../utils/logger';\nimport { callApi } from './util';\n\nexport const progressKey = 'banners';\n\nexport function* doLoadBanners(action: ReturnType<typeof loadBanners>) {\n  const allBannerIds = action.payload.bannerIds;\n  const session = yield select((state: IState) => state.session);\n  // FIXME: Throw an error if any of session is missing\n  const lang = getLang(session);\n\n  yield put(setProgress(progressKey, { current: 0, max: allBannerIds.length }));\n\n  for (let i = 0; i < allBannerIds.length; i++) {\n    const bannerId = allBannerIds[i];\n\n    yield put(setProgress(progressKey, { current: i, max: allBannerIds.length }));\n\n    logger.info(`Getting relic probabilities for banner ${bannerId}...`);\n    const probabilitiesResult = yield callApi(\n      apiUrls.gachaProbability(lang, bannerId),\n      session,\n      (response: AxiosResponse) => {\n        // FIXME: Validate data\n        const probabilities = convertRelicDrawProbabilities(\n          response.data as gachaSchemas.GachaProbability,\n        );\n        if (!probabilities) {\n          return undefined;\n        }\n\n        return setRelicDrawProbabilities(bannerId, probabilities);\n      },\n    );\n    if (probabilitiesResult != null) {\n      yield put(probabilitiesResult);\n    }\n\n    const { banners, selections } = (yield select(\n      (state: IState) => state.relicDraws,\n    )) as RelicDrawState;\n    if (banners[bannerId]) {\n      const exchangeShopId = banners[bannerId].exchangeShopId;\n      if (exchangeShopId && !selections[exchangeShopId]) {\n        logger.info(`Getting selections for banner ${bannerId} (shop ID ${exchangeShopId})...`);\n\n        const selectionsResult = yield callApi(\n          apiUrls.exchangeShopPrizeList(lang, exchangeShopId),\n          session,\n          (response: AxiosResponse) => {\n            // FIXME: Validate data\n            const shopSelections = convertExchangeShopSelections(\n              response.data as gachaSchemas.ExchangeShopPrizeList,\n            );\n            return setExchangeShopSelections(exchangeShopId, shopSelections);\n          },\n        );\n        if (selectionsResult != null) {\n          yield put(selectionsResult);\n        }\n      }\n    }\n  }\n\n  yield put(setProgress(progressKey, undefined));\n}\n\nexport function* watchLoadBanners() {\n  yield takeEvery(getType(loadBanners), doLoadBanners);\n}\n","/**\n * @file\n * Support for tracking relic banners (gacha banners)\n */\nimport { Store } from 'redux';\n\nimport * as _ from 'lodash';\n\nimport {\n  RelicDrawBanner,\n  RelicDrawGroup,\n  RelicDrawProbabilities,\n  setExchangeShopSelections,\n  setRelicDrawBanners,\n  setRelicDrawGroups,\n  setRelicDrawProbabilities,\n} from '../actions/relicDraws';\nimport { LangType } from '../api/apiUrls';\nimport * as gachaSchemas from '../api/schemas/gacha';\nimport { relativeUrl } from '../data/urls';\nimport { IState } from '../reducers';\nimport { logger } from '../utils/logger';\nimport { getRequestLang, Handler, HandlerRequest } from './common';\n\ninterface RelicDrawBannerResults {\n  banners: RelicDrawBanner[];\n  groups: {\n    [groupName: string]: RelicDrawGroup;\n  };\n}\n\nexport function convertBanner(\n  lang: LangType,\n  gacha: gachaSchemas.GachaSeriesList,\n  group?: string,\n): RelicDrawBanner {\n  return {\n    id: gacha.series_id,\n    openedAt: gacha.opened_at,\n    closedAt: gacha.closed_at,\n    sortOrder: gacha.priority,\n\n    canPull: _.some(gacha.box_list, i =>\n      _.some(\n        i.entry_point_list,\n        j => j.term_limit_num === 0 || j.purchased_count < j.term_limit_num,\n      ),\n    ),\n    canSelect:\n      gacha.total_executable_num > 0 &&\n      gacha.user_exchange_shop_exchanged_num < gacha.total_executable_num,\n\n    bannerRelics: _.sortBy(gacha.banner_list, 'disp_order')\n      .map(i => i.item_id)\n      .filter(i => i !== 0),\n\n    exchangeShopId: +gacha.exchange_shop_id || undefined,\n    imageUrl: relativeUrl(lang, gacha.line_up_image_path),\n    group,\n  };\n}\n\nexport function convertRelicDrawBanners(\n  lang: LangType,\n  { gacha_group, series_list }: gachaSchemas.GachaShow,\n): RelicDrawBannerResults {\n  const result: RelicDrawBannerResults = {\n    banners: [],\n    groups: {},\n  };\n  const sortedSeries = _.keyBy(series_list, 'series_id');\n\n  const processed = new Set<number>();\n\n  function process(series: gachaSchemas.GachaSeriesList, group?: string) {\n    if (!processed.has(series.series_id)) {\n      result.banners.push(convertBanner(lang, series, group));\n      processed.add(series.series_id);\n    }\n  }\n\n  for (const group of gacha_group) {\n    const thisGroup: RelicDrawGroup = {\n      groupName: 'group' + group.id,\n      imageUrl: relativeUrl(lang, group.line_up_image_path),\n      sortOrder: group.priority,\n    };\n    result.groups[thisGroup.groupName] = thisGroup;\n    group.content_series_ids\n      .map(i => sortedSeries[i])\n      .filter(i => i != null)\n      .forEach(i => process(i, thisGroup.groupName));\n  }\n\n  const archiveSeries = series_list.filter(i => i.is_book_gacha);\n  if (archiveSeries.length) {\n    const thisGroup: RelicDrawGroup = {\n      groupName: 'archive',\n      imageUrl: relativeUrl(\n        lang,\n        '/dff/static/lang/image/gacha_series/lineup_image/book_mission_gacha.png',\n      ),\n      sortOrder: -100,\n    };\n    result.groups[thisGroup.groupName] = thisGroup;\n    archiveSeries.forEach(i => process(i, thisGroup.groupName));\n  }\n\n  // These IDs can be extracted from app.js's REGULAR_SERIES_GACHA constants\n  const realmRelicDrawId = 687;\n  const seriesCount = 17;\n  const realmRelicDraws = series_list.filter(\n    i => i.series_id >= realmRelicDrawId && i.series_id < realmRelicDrawId + seriesCount,\n  );\n  if (realmRelicDraws.length) {\n    const thisGroup: RelicDrawGroup = {\n      groupName: 'realmRelicDraws',\n      imageUrl: relativeUrl(\n        lang,\n        '/dff/static/lang/image/gacha_series/lineup_image/series_687.png',\n      ),\n      sortOrder: -99,\n    };\n    result.groups[thisGroup.groupName] = thisGroup;\n    realmRelicDraws.forEach(i => process(i, thisGroup.groupName));\n  }\n\n  series_list.filter(i => i.priority !== 0).forEach(i => process(i));\n\n  return result;\n}\n\nexport function convertRelicDrawProbabilities(\n  data: gachaSchemas.GachaProbability,\n): RelicDrawProbabilities | null {\n  const entryPointIds = _.keys(data).filter(i => i.match(/^\\d+$/));\n  if (entryPointIds.length === 0) {\n    logger.error('Failed to find entry point ID for gacha/probability');\n    return null;\n  } else if (entryPointIds.length > 1) {\n    logger.warn(`Unexpected entry point IDs for gacha/probability: got ${entryPointIds.length}`);\n  }\n  const entryPointId = +entryPointIds[0];\n  const { prob_by_rarity, equipments } = data[entryPointId];\n\n  return {\n    byRarity: _.mapValues(prob_by_rarity, parseFloat),\n    byRelic: _.fromPairs(\n      equipments.filter(i => i.rarity >= 5).map(i => [i.id, parseFloat(i.probability)]),\n    ),\n  };\n}\n\nexport function convertExchangeShopSelections(\n  data: gachaSchemas.ExchangeShopPrizeList,\n): number[][] {\n  return _.sortBy(data.exchange_shop.prizes, ['disp_order', 'id']).map(i =>\n    i.item_package.items.map(j => j.item_id),\n  );\n}\n\nconst gachaHandler: Handler = {\n  'gacha/show'(data: gachaSchemas.GachaShow, store: Store<IState>, request: HandlerRequest) {\n    const { banners, groups } = convertRelicDrawBanners(getRequestLang(request), data);\n    store.dispatch(setRelicDrawBanners(banners));\n    store.dispatch(setRelicDrawGroups(_.values(groups)));\n  },\n\n  'gacha/probability'(\n    data: gachaSchemas.GachaProbability,\n    store: Store<IState>,\n    { query }: HandlerRequest,\n  ) {\n    if (!query || !query.series_id) {\n      logger.error('Unrecognized gacha/probability query');\n      return;\n    }\n\n    const probabilities = convertRelicDrawProbabilities(data);\n    if (!probabilities) {\n      return;\n    }\n    store.dispatch(setRelicDrawProbabilities(query.series_id, probabilities));\n  },\n\n  'exchange_shop/prize_list'(\n    data: gachaSchemas.ExchangeShopPrizeList,\n    store: Store<IState>,\n    { query }: HandlerRequest,\n  ) {\n    if (!query || !query.shop_id) {\n      logger.error('Unrecognized gacha/probability query');\n      return;\n    }\n\n    const selections = convertExchangeShopSelections(data);\n    store.dispatch(setExchangeShopSelections(query.shop_id, selections));\n  },\n};\n\nexport default gachaHandler;\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport { RelicDrawProbabilities } from '../actions/relicDraws';\nimport { BadRelicDrawMessage } from '../components/relicDraws/BadRelicDrawMessage';\nimport { RelicDrawBannerContents } from '../components/relicDraws/RelicDrawBannerContents';\nimport { IState } from '../reducers';\nimport { getBannerDetails, RelicDrawBannerDetails } from '../selectors/relicDraws';\n\ninterface RouteParams {\n  banner: string;\n}\n\ninterface Props {\n  banners: {\n    [bannerId: number]: RelicDrawBannerDetails;\n  };\n  probabilities: {\n    [bannerId: string]: RelicDrawProbabilities;\n  };\n  isAnonymous?: boolean;\n  backLink: string;\n}\n\nexport class RelicDrawBannerPage extends React.PureComponent<\n  Props & RouteComponentProps<RouteParams>\n> {\n  render() {\n    const { banners, probabilities, isAnonymous, match, backLink } = this.props;\n    const banner = banners[+match.params.banner];\n    const probability = probabilities[+match.params.banner];\n    if (!banner) {\n      return <BadRelicDrawMessage />;\n    }\n    // FIXME: Duplication/overlap with RelicDrawGroupPage\n    // FIXME: Correct back link\n    return (\n      <>\n        <img src={banner.imageUrl} />\n        <p>\n          <Link to={backLink}>back to list of banners</Link>\n        </p>\n        <RelicDrawBannerContents banner={banner} probabilities={probability} isAnonymous={isAnonymous} />\n      </>\n    );\n  }\n}\n\nexport default connect((state: IState) => ({\n  banners: getBannerDetails(state),\n  probabilities: state.relicDraws.probabilities,\n}))(RelicDrawBannerPage);\n","import * as React from 'react';\n\nimport * as _ from 'lodash';\n\nimport { getOffBannerRelics, RelicDrawProbabilities } from '../../actions/relicDraws';\nimport { enlir } from '../../data/enlir';\nimport { tierOrder } from '../../data/mrP';\nimport { RelicDrawBannerDetails } from '../../selectors/relicDraws';\nimport RelicDrawBannerTable from './RelicDrawBannerTable';\n\ninterface Props {\n  banner: RelicDrawBannerDetails;\n  probabilities?: RelicDrawProbabilities;\n  isAnonymous?: boolean;\n}\n\nfunction sortRelics(relicIds: number[]) {\n  return _.sortBy(relicIds, [\n    (i: number) =>\n      enlir.relics[i].character ? enlir.charactersByName[enlir.relics[i].character!].id : 0,\n    (i: number) => (enlir.relicSoulBreaks[i] ? -tierOrder[enlir.relicSoulBreaks[i].tier] : 0),\n    (i: number) =>\n      enlir.relicSoulBreaks[i]\n        ? -enlir.relicSoulBreaks[i].id\n        : enlir.relicLegendMateria[i]\n        ? -enlir.relicLegendMateria[i].id\n        : 0,\n  ]);\n}\n\nexport class RelicDrawBannerContents extends React.PureComponent<Props> {\n  renderSelections() {\n    const { banner, isAnonymous } = this.props;\n    if (!banner.selections || !banner.selections.length) {\n      return null;\n    }\n    return (\n      <RelicDrawBannerTable\n        title={'Available Selections'}\n        relics={banner.selections}\n        isAnonymous={isAnonymous}\n      />\n    );\n  }\n\n  renderFeatured() {\n    const { banner, probabilities, isAnonymous } = this.props;\n    if (!banner.bannerRelics || !banner.bannerRelics.length) {\n      return null;\n    }\n    return (\n      <RelicDrawBannerTable\n        title={'Featured Relics'}\n        relics={banner.bannerRelics}\n        probabilities={probabilities}\n        isAnonymous={isAnonymous}\n      />\n    );\n  }\n\n  renderAll() {\n    const { banner, probabilities, isAnonymous } = this.props;\n    if ((banner.bannerRelics && banner.bannerRelics.length) || !probabilities) {\n      return null;\n    }\n    return (\n      <RelicDrawBannerTable\n        title={'All Relics'}\n        relics={sortRelics(_.keys(probabilities.byRelic).map(i => +i))}\n        probabilities={probabilities}\n        isAnonymous={isAnonymous}\n      />\n    );\n  }\n\n  renderOffBanner() {\n    const { banner, probabilities, isAnonymous } = this.props;\n    const offBanner =\n      banner.bannerRelics && banner.bannerRelics.length && probabilities\n        ? sortRelics(getOffBannerRelics(banner, probabilities))\n        : undefined;\n    if (!offBanner) {\n      return null;\n    }\n    return (\n      <RelicDrawBannerTable\n        title={'Off-Banner'}\n        relics={offBanner}\n        probabilities={probabilities}\n        isAnonymous={isAnonymous}\n      />\n    );\n  }\n\n  renderFallback() {\n    const { banner, probabilities } = this.props;\n    if ((banner.bannerRelics && banner.bannerRelics.length) || probabilities) {\n      return null;\n    }\n    return (\n      <tr>\n        <td>No details are available for this banner.</td>\n      </tr>\n    );\n  }\n\n  render() {\n    return (\n      <>\n        {this.renderSelections()}\n        {this.renderFeatured()}\n        {this.renderAll()}\n        {this.renderOffBanner()}\n        {this.renderFallback()}\n      </>\n    );\n  }\n}\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport classNames from 'classnames';\nimport * as _ from 'lodash';\n\nimport { RelicDrawProbabilities } from '../../actions/relicDraws';\nimport { enlir, makeLegendMateriaAliases } from '../../data/enlir';\nimport { describeEnlirSoulBreak, formatMrP } from '../../data/mrP';\nimport { describeMrPLegendMateria } from '../../data/mrP/legendMateria';\nimport { IState } from '../../reducers';\nimport { getOwnedLegendMateria, getOwnedSoulBreaks } from '../../selectors/characters';\n\n// FIXME: Better styling - table widths are bad, because SB effects are way too narrow\n\n// HACK: FIXME: Better sharing of code\nimport {\n  getBraveColumns,\n  getBurstColumns,\n  soulBreakAliases,\n  styles as soulBreakStyles,\n  tierClass,\n} from '../soulBreaks/SoulBreakListItem';\n\nconst styles = require('./RelicDrawBannerTable.scss');\n\ninterface Props {\n  title: string;\n  relics: number[] | number[][];\n  probabilities?: RelicDrawProbabilities;\n  isAnonymous?: boolean;\n  ownedSoulBreaks: Set<number> | undefined;\n  ownedLegendMateria: Set<number> | undefined;\n}\n\nconst legendMateriaAliases = makeLegendMateriaAliases(enlir.legendMateria);\n\nexport class RelicDrawBannerTable extends React.Component<Props> {\n  renderRow(relicId: number, key: number, showProbability: boolean) {\n    const { probabilities, isAnonymous, ownedSoulBreaks, ownedLegendMateria } = this.props;\n    const relic = enlir.relics[relicId];\n    const { character, name, type, effect } = relic;\n    const sb = enlir.relicSoulBreaks[relicId];\n    const lm = enlir.relicLegendMateria[relicId];\n\n    const tierClassName = sb ? tierClass[sb.tier] : lm ? soulBreakStyles.legendMateria : undefined;\n    const isDupe = isAnonymous\n      ? false\n      : sb\n      ? ownedSoulBreaks && ownedSoulBreaks.has(sb.id)\n      : lm\n      ? ownedLegendMateria && ownedLegendMateria.has(lm.id)\n      : false;\n    const mrP = sb ? describeEnlirSoulBreak(sb) : null;\n    // FIXME: Icons for relic types; abbreviate relic effects\n\n    const commandColumns: Array<[string, string]> = [];\n    if (mrP && mrP.braveCommands) {\n      commandColumns.push(getBraveColumns(mrP, mrP.braveCommands));\n    }\n    if (mrP && mrP.burstCommands) {\n      commandColumns.push(...getBurstColumns(mrP.burstCommands));\n    }\n    const rowSpan = commandColumns.length ? commandColumns.length + 1 : undefined;\n\n    const className = classNames(tierClassName, { [styles.dupe]: isDupe });\n    return (\n      <React.Fragment key={key}>\n        <tr className={className} title={isDupe ? 'Dupe' : undefined}>\n          <td rowSpan={rowSpan}>{character}</td>\n          <td rowSpan={rowSpan}>{name}</td>\n          <td rowSpan={rowSpan}>{type}</td>\n          <td rowSpan={rowSpan}>{effect}</td>\n          <td rowSpan={rowSpan} className={soulBreakStyles.tier}>\n            {sb ? soulBreakAliases[sb.id] : lm ? legendMateriaAliases[lm.id] : undefined}\n          </td>\n          <td className={soulBreakStyles.name}>{sb ? sb.name : lm ? lm.name : undefined}</td>\n          <td>{mrP ? formatMrP(mrP) : lm ? describeMrPLegendMateria(lm) : undefined}</td>\n          {showProbability && <td rowSpan={rowSpan}>{probabilities!.byRelic[relicId]}%</td>}\n        </tr>\n        {commandColumns.map((columns, i) => (\n          <tr key={i} className={className + ' ' + styles.command}>\n            <td>{columns[0]}</td>\n            <td>{columns[1]}</td>\n          </tr>\n        ))}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const { title, relics, probabilities } = this.props;\n    const showProbability = probabilities != null;\n    const colCount = showProbability ? 8 : 7;\n    const relicsArray = (relics.length > 0 && Array.isArray(relics[0])\n      ? relics\n      : [relics]) as number[][];\n    const grouped = relicsArray.length > 1 && _.some(relicsArray, i => i.length > 1);\n    return (\n      <div className=\"table-responsive\">\n        <table className={classNames('table', { [styles.grouped]: grouped })}>\n          <thead>\n            <tr className=\"thead-dark\">\n              <th colSpan={colCount}>{title}</th>\n            </tr>\n            <tr>\n              <th>Character</th>\n              <th>Relic</th>\n              <th>Type</th>\n              <th>Effects</th>\n              <th>Tier</th>\n              <th>Name</th>\n              <th>Effects</th>\n              {showProbability && <th>Probability</th>}\n            </tr>\n          </thead>\n          {relicsArray.map((theseRelics, i) => (\n            <tbody key={i}>\n              {theseRelics.map((relicId, j) => this.renderRow(relicId, j, showProbability))}\n            </tbody>\n          ))}\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default connect((state: IState) => ({\n  ownedSoulBreaks: getOwnedSoulBreaks(state),\n  ownedLegendMateria: getOwnedLegendMateria(state),\n}))(RelicDrawBannerTable);\n","import * as _ from 'lodash';\n\nimport { arrayify } from '../../utils/typeUtils';\nimport { EnlirElement, EnlirFormula, EnlirLegendMateria, EnlirSkillType } from '../enlir';\nimport { describeDamage, describeDamageType, formatThreshold } from './attack';\nimport {\n  describeEnlirStatus,\n  describeStats,\n  formatDuration,\n  formatTriggeredEffect,\n  hitWeaknessTriggerText,\n  parseEnlirStatus,\n} from './status';\nimport { formatSmartEther, sbPointsAlias } from './statusAlias';\nimport {\n  appendElement,\n  damageTypeAbbreviation,\n  formatSchoolOrAbilityList,\n  getElementShortName,\n  getShortName,\n} from './types';\nimport { andList, percentToMultiplier, toMrPKilo } from './util';\n\nconst tranceTriggerText = '<20% HP';\nconst dmg = (isDamageTrigger: string | null) =>\n  isDamageTrigger && isDamageTrigger.match('dealing damage with') ? ' dmg' : '';\nconst whenDescription = (when: string | null) => (when ? ` if using ${when}` : '');\n\nfunction describeBattleStart(statuses: string) {\n  return (\n    statuses\n      .split(andList)\n      .map(i => describeEnlirStatus(i))\n      .join(', ') + ' at battle start'\n  );\n}\n\ntype HandlerList = Array<[RegExp | RegExp[], (parts: string[], allText: string) => string | null]>;\n\nfunction resolveWithHandlers(handlers: HandlerList, item: string): string | null {\n  for (const [re, formatter] of handlers) {\n    for (const i of arrayify(re)) {\n      const m = item.match(i);\n      if (m) {\n        return formatter(m.slice(1), m[0]);\n      }\n    }\n  }\n\n  return null;\n}\n\nconst skillEffectHandlers: HandlerList = [\n  [/^smart ether (\\d+) to the user$/, ([amount]) => formatSmartEther(amount)],\n  [\n    /^(?:restores )?(\\d+) HP to (?:an ally|the lowest HP% ally)$/,\n    ([fixedHp]) => `ally heal ${toMrPKilo(+fixedHp)} HP`,\n  ],\n  [\n    /^((?:[A-Z]{3}\\/)*[A-Z]{3}) -(\\d+|\\?)%$/,\n    ([stats, percent]) => `AoE -${percent}% ` + describeStats(stats.split('/')),\n  ],\n];\n\nconst simpleSkillHandlers: HandlerList = [\n  // Healing\n  [/^WHT: group, restores HP \\((\\d+|\\?)\\)$/, ([healFactor]) => `party h${healFactor}`],\n  [\n    /^NAT: (single|group), restores HP for (\\d+)% of the target's maximum HP$/,\n    ([who, healPercent]) => {\n      const whoDescription = who === 'single' ? 'ally' : 'party';\n      return `${whoDescription} heal ${healPercent}% HP`;\n    },\n  ],\n\n  // Attacks\n  [\n    /^(PHY|BLK|WHT): (single|random|group), (?:(\\d+)x )?([0-9\\.]+) (ranged )?(physical|magical)(?: ([^,]+))?(, .*)?$/,\n    ([\n      type,\n      attackType,\n      numAttacks,\n      attackMultiplier,\n      isRanged,\n      formula,\n      elements,\n      addedEffects,\n    ]) => {\n      const damageType = describeDamageType(formula as EnlirFormula, type as EnlirSkillType);\n\n      let damage =\n        (attackType === 'group' ? 'AoE ' : '') +\n        damageTypeAbbreviation(damageType) +\n        describeDamage(parseFloat(attackMultiplier), numAttacks ? +numAttacks : 1) +\n        appendElement(\n          elements ? (elements.split(/\\//) as EnlirElement[]) : [],\n          getElementShortName,\n        );\n      damage += isRanged ? ' rngd' : '';\n\n      const effects = !addedEffects\n        ? []\n        : addedEffects\n            .split(/, /)\n            .filter(i => i !== '')\n            .map(i => resolveWithHandlers(skillEffectHandlers, i));\n      if (_.some(effects, i => i == null)) {\n        return null;\n      }\n\n      return damage + (effects.length ? ', ' + effects.join(', ') : '');\n    },\n  ],\n\n  // Statuses\n  [\n    /^NAT: group, causes (.*) for (\\d+|\\?) seconds$/,\n    ([status, duration]) => {\n      return (\n        'AoE ' +\n        status\n          .split(andList)\n          .map(i => describeEnlirStatus(i))\n          .join(', ') +\n        ' ' +\n        duration +\n        's'\n      );\n    },\n  ],\n  [\n    /^NAT: group, ((?:[A-Z]{3}\\/)*[A-Z]{3}) -(\\d+|\\?)%$/,\n    ([stats, percent]) => `AoE -${percent}% ` + describeStats(stats.split('/')),\n  ],\n];\n\nconst legendMateriaHandlers: HandlerList = [\n  // Dualcast!\n  [\n    [\n      /^(\\d+)% chance to dualcast abilities that deal (.*) damage$/,\n      /^(\\d+)% chance to dualcast (.*) abilities$/,\n    ],\n    ([percent, schoolOrElement]) =>\n      `${percent}% dualcast ${formatSchoolOrAbilityList(schoolOrElement)}`,\n  ],\n\n  // Triplecast!!!\n  [\n    [\n      /^(\\d+)% chance to dualcast abilities that deal (.*) damage twice$/,\n      /^(\\d+)% chance to dualcast (.*) abilities twice$/,\n    ],\n    ([percent, schoolOrElement]) =>\n      `${percent}% triplecast ${formatSchoolOrAbilityList(schoolOrElement)}`,\n  ],\n\n  // Damage bonuses\n  [\n    [\n      /^Increases (\\w+) damage dealt by (\\d+)%$/,\n      /^(.*) (?:abilities|attacks) deal (\\d+)% more damage(?: when equipping (.*))?$/,\n    ],\n    ([schoolOrElement, percent, when]) => {\n      const multiplier = percentToMultiplier(percent);\n      return `${multiplier}x ${getShortName(schoolOrElement)} dmg` + whenDescription(when);\n    },\n  ],\n\n  // Healing bonuses\n  [\n    /^WHT abilities restore (\\d+)% more HP$/,\n    ([percent]) => {\n      const multiplier = percentToMultiplier(percent);\n      return `${multiplier}x WHT healing`;\n    },\n  ],\n\n  // Build-ups\n  [\n    [\n      /([A-Z]{3}) \\+(\\d+|\\?)% for each hit dealt with (.*) (?:abilities|attacks)(?: that deal (.*) damage)?, up to \\+?(\\d+|\\?)%/,\n      // \"that deal damage\" should never be used for this regex, but we leave it to keep groups consistent\n      /([A-Z]{3}) \\+(\\d+|\\?)% for each (.*) (?:ability|attack) used(?: that deal (.*) damage)?, up to \\+?(\\d+|\\?)%/,\n    ],\n    ([stat, bonus, type1, type2, max]) => {\n      let type = formatSchoolOrAbilityList(type1);\n      if (type2) {\n        type += ' ' + formatSchoolOrAbilityList(type2);\n      }\n      return `+${bonus}% ${stat} (max +${max}%) per ${type}`;\n    },\n  ],\n  [\n    /([A-Z]{3}) \\+(\\d+)% for each hit taken by damaging attacks, up to \\+(\\d+)%/,\n    ([stat, bonus, max]) => `+${bonus}% ${stat} (max +${max}%) per hit taken`,\n  ],\n\n  // Conditional bonuses\n  [\n    /^Increases damage dealt by ((?:\\d+\\/)+\\d+)% if ((?:\\d+\\/)+\\d+) of the target's stats are lowered$/,\n    ([bonus, statBreakCount]) => {\n      const bonusDescription = bonus.split('/').join('-');\n      return `+${bonusDescription}% dmg` + formatThreshold(statBreakCount, 'stats lowered');\n    },\n  ],\n\n  // Starting statuses\n  [/^Grants (.*) at the beginning of the battle$/, ([statuses]) => describeBattleStart(statuses)],\n\n  // Unique variations of starting statuses.\n  [\n    /^Grants (.*) at the beginning of the battle, grants (.*) to the user when Reraise is triggered$/,\n    ([statuses, reraiseStatus]) =>\n      describeBattleStart(statuses) +\n      ', ' +\n      formatTriggeredEffect('Reraise', describeEnlirStatus(reraiseStatus)),\n  ],\n  [\n    /^Grants (.*) at the beginning of the battle, begins the round with full ATB gauge$/,\n    ([statuses]) => describeBattleStart(statuses) + ', full ATB at round start',\n  ],\n\n  // Triggered self statuses\n  [\n    /^(?:(\\d+|\\?)% chance (?:of|to grant)|[Gg]rants) (.*?)(?: for (\\d+) seconds)? to the user after (?:using an? (.*) (?:ability|attack)|(dealing a critical hit)|(taking damage from an enemy))$/,\n    ([percent, status, duration, schoolOrElement, critical, takeDamage]) => {\n      // TODO: Consolidate trigger logic with status.ts?\n      const trigger = schoolOrElement\n        ? formatSchoolOrAbilityList(schoolOrElement)\n        : critical\n        ? 'crit'\n        : 'take dmg';\n      return formatTriggeredEffect(\n        trigger,\n        describeEnlirStatus(status) + (duration ? ' ' + duration + 's' : ''),\n        percent,\n      );\n    },\n  ],\n\n  // Status recovery\n  [\n    /^(\\d+)% chance to remove (.*) and (.*) to the user after being afflicted with .*$/,\n    ([percentChance, statuses1, statuses2]) =>\n      `${percentChance}% for auto-cure ${[...statuses1.split(', '), statuses2].join('/')}`,\n  ],\n\n  // Single-target white magic bonus effects\n  [\n    /^(\\d+|\\?)% chance to grant (.*) to the target after using a single-target White Magic ability that restores HP on an ally$/,\n    ([percent, status]) =>\n      formatTriggeredEffect('ally W.Mag heal', 'ally ' + describeEnlirStatus(status), percent),\n  ],\n  [\n    /^(\\d+|\\?)% chance to remove negative effects to the target after using a single-target White Magic ability that restores HP on an ally$/,\n    ([percent, status]) => formatTriggeredEffect('ally W.Mag heal', 'ally Esuna'),\n  ],\n\n  // Triggered simple skills\n  [\n    /^(\\d+|\\?)% chance to cast an ability \\((.*)\\) after (?:(using|dealing damage with) a (.*) (?:ability|attack)|(taking damage from an enemy))$/,\n    ([percent, effect, isDamageTrigger, schoolOrAbility, takeDamage]) => {\n      const description = resolveWithHandlers(simpleSkillHandlers, effect);\n      if (!description) {\n        return null;\n      }\n      const trigger = schoolOrAbility\n        ? getShortName(schoolOrAbility) + dmg(isDamageTrigger)\n        : 'take dmg';\n      return formatTriggeredEffect(trigger, description, percent);\n    },\n  ],\n\n  // Counter-attacks\n  [\n    /(\\d+|\\?)% chance to counter (?:enemy )?(.*) attacks with an ability \\((.*)\\)$/,\n    ([percent, attackType, effect]) => {\n      const description = resolveWithHandlers(simpleSkillHandlers, effect);\n      if (!description) {\n        return null;\n      }\n      return formatTriggeredEffect(`foe's ${attackType} atk`, description, percent);\n    },\n  ],\n\n  // Triggered status ailments (imperils)\n  [\n    /^(\\d+|\\?)% chance to cause (.*) to the target after (using|dealing damage with) a (.*) (?:ability|attack) on an enemy(?: when equipping (.*))?$/,\n    ([percent, status, isDamageTrigger, schoolOrAbility, when]) => {\n      const trigger = getShortName(schoolOrAbility) + dmg(isDamageTrigger) + whenDescription(when);\n      return formatTriggeredEffect(trigger, describeEnlirStatus(status), percent);\n    },\n  ],\n\n  // Trance effects\n  [\n    /^(Restores HP for 100% of the user's maximum HP(?:, grants (\\d+|\\?) SB points)? and )?[Gg]rants (.*?)(?: for (\\d+) seconds)? when HP fall below 20%$/,\n    ([isHeal, bonusSb, statusNames, duration]) => {\n      const status = statusNames.split(andList).map(i => parseEnlirStatus(i));\n\n      // Process duration from the last status - it's more likely to be interesting.\n      const lastStatus = status[status.length - 1];\n      if (duration) {\n        duration = formatDuration(+duration, 'second');\n      } else if (lastStatus.defaultDuration && !lastStatus.isVariableDuration) {\n        duration = formatDuration(lastStatus.defaultDuration, 'second');\n      }\n\n      let statusDescription =\n        status.map(i => (i.isTrance ? 'Trance: ' : '') + i.description).join(', ') +\n        (duration ? ' ' + duration : '');\n      if (bonusSb) {\n        statusDescription = sbPointsAlias(bonusSb) + ', ' + statusDescription;\n      }\n      if (isHeal) {\n        statusDescription = 'heal 100% HP, ' + statusDescription;\n      }\n      return formatTriggeredEffect(tranceTriggerText, statusDescription);\n    },\n  ],\n  // Josef's unique LM2.  We ought to parse this using the same logic that we\n  // do for the main function, but that's too much work...\n  [\n    /^Causes (.*), restores HP to all allies for (\\d+|\\?)% max HP and grants (.*) to all allies when HP fall below 20%$/,\n    ([selfStatus, healPercent, partyStatus]) => {\n      const selfStatusDescription = selfStatus\n        .split(andList)\n        .map(i => describeEnlirStatus(i))\n        .join(', ');\n      const partyStatusDescription = partyStatus\n        .split(andList)\n        .map(i => describeEnlirStatus(i))\n        .join(', ');\n      return formatTriggeredEffect(\n        tranceTriggerText,\n        `self ${selfStatusDescription}, party heal ${healPercent}% HP, ${partyStatusDescription}`,\n      );\n    },\n  ],\n\n  // Damage reduction and cover\n  [\n    /^Reduces damage taken by (.*) attacks by (\\d+)%$/,\n    ([element, percent]) => `-${percent}% ${formatSchoolOrAbilityList(element)} dmg taken`,\n  ],\n  [\n    /^(\\d+)% chance to cover PHY attacks that target allies, reducing damage taken by (\\d+)%$/,\n    ([percentChance, percentDamage]) =>\n      `${percentChance}% cover PHY w/ -${percentDamage}% dmg taken`,\n  ],\n  [\n    /^(\\d+)% chance to reduce damage taken by (\\d+)% when equipping (.*)$/,\n    ([percentChance, percentDamage, when]) =>\n      `${percentChance}% for -${percentDamage}% dmg taken${whenDescription(when)}`,\n  ],\n\n  // Drain HP\n  [\n    /^(\\d+|\\?)% chance of restoring HP to the user for (\\d+|\\?)% of the damage dealt with single-target (.*) attacks$/,\n    ([percentChance, healPercent, type]) =>\n      formatTriggeredEffect(\n        `single-target ${formatSchoolOrAbilityList(type)}`,\n        `heal ${healPercent}% of dmg`,\n        percentChance,\n      ),\n  ],\n\n  // Stat buffs and debuffs\n  [\n    /^Increases the duration of (.*) by (.*)%$/,\n    ([what, percent]) => `${percentToMultiplier(percent)}x ${what} duration`,\n  ],\n\n  // Unique effects\n  [\n    /^Exploiting elemental weakness grants (\\d+|\\?)% more Soul Break points \\(additive with the default 50% bonus\\)$/,\n    ([percent]) => formatTriggeredEffect(hitWeaknessTriggerText, `+${percent}% SB gauge`),\n  ],\n  [\n    /^(\\d+|\\?)% chance to increase Gil gained at the end of battle by (\\d+|\\?)% when equipping (.*)$/,\n    ([percentChance, percentBonus, when]) =>\n      `${percentBonus}% for bonus ${percentBonus}% Gil${whenDescription(when)}`,\n  ],\n  [\n    /^Increases base ([A-Z]{3}) by (\\d+|\\?)% base ([A-Z]{3})$/,\n    ([statDest, percent, statSource]) => `add ${percent}% of ${statSource} to ${statDest}`,\n  ],\n];\n\nexport function describeMrPLegendMateria({ effect }: EnlirLegendMateria): string | null {\n  const isUncertain = effect.endsWith('?');\n  const result = resolveWithHandlers(legendMateriaHandlers, effect.replace(/\\?$/, ''));\n  if (result && isUncertain) {\n    return result + '?';\n  } else {\n    return result;\n  }\n}\n","import * as _ from 'lodash';\n\nimport { MrPSoulBreak } from '.';\nimport { logger } from '../../utils/logger';\nimport { enDashJoin, slashMerge } from './util';\n\nexport const MAX_BRAVE_LEVEL = 3;\n\nfunction formatBraveMinLevel(level: number): string {\n  if (level === 0) {\n    return '';\n  }\n  return ' at brv.' + (level === 3 ? level : `${level}+`);\n}\n\nfunction formatBraveLevelRange(from: number, to: number): string {\n  if (from === -1 && to === -1) {\n    return '';\n  } else if (from === 0 && to === MAX_BRAVE_LEVEL) {\n    return '';\n  } else if (from === to) {\n    return ' at brv.' + from;\n  } else if (to === MAX_BRAVE_LEVEL) {\n    return formatBraveMinLevel(from);\n  } else if (from === 0) {\n    return ' up to brv.' + to;\n  } else {\n    return ' at brv.' + from + '-' + to;\n  }\n}\n\nconst isHeal = (s: string) => s.match(/\\bh\\d/) != null;\n\nfunction filterBraveLevels(allParts: string[]) {\n  const firstLevel = _.findIndex(allParts);\n  const lastLevel = _.findLastIndex(allParts);\n  return {\n    parts:\n      firstLevel === -1\n        ? []\n        : allParts.slice(firstLevel, lastLevel === -1 ? undefined : lastLevel + 1),\n    firstLevel,\n    lastLevel,\n  };\n}\n\nfunction getBraveDamage(mrP: MrPSoulBreak[]): string {\n  // tslint:disable-next-line prefer-const\n  let { parts, firstLevel, lastLevel } = filterBraveLevels(mrP.map(i => i.damage || ''));\n  const overstrike = parts.map(i => i.match('overstrike') != null);\n\n  // Separate the 'm' and 'p' damage markers, and remove \"overstrike,\" since\n  // we'll handle that separately.\n  parts = parts.map(i => i.replace(/\\b([mp])(\\d)/g, '$1 $2').replace(' overstrike', ''));\n\n  // Handle damage.\n  let damage = slashMerge(parts, { join: enDashJoin });\n\n  // Put the 'm' and 'p' back.\n  damage = damage.replace(/\\b([mp]) (\\d+)/g, '$1$2');\n  damage += formatBraveLevelRange(firstLevel, lastLevel);\n\n  // Add overstrike level.\n  const overstrikeLevel = overstrike.indexOf(true);\n  if (damage && overstrikeLevel !== -1) {\n    damage += ', overstrike' + formatBraveMinLevel(firstLevel + overstrikeLevel);\n  }\n\n  return damage;\n}\n\nfunction getBraveHeals(mrP: MrPSoulBreak[]): string {\n  const heals = mrP.map(i => i.other && i.other.split(/, /).find(isHeal));\n  const healCount = _.filter(heals).length;\n  if (healCount === 0) {\n    return '';\n  } else if (healCount === MAX_BRAVE_LEVEL + 1) {\n    return heals.join(enDashJoin);\n  } else {\n    // If this ever becomes an issue, we can re-implement this function using\n    // filterBraveLevels.\n    logger.warn('Unexpected healing for given braves');\n    return '';\n  }\n}\n\nfunction getBraveEffects(mrP: MrPSoulBreak[]): string {\n  // Array of arrays, indexed by brave level then effect number\n  const effects = mrP.map(i => (i.other ? i.other.split(/, /).filter(s => !isHeal(s)) : []));\n\n  if (!_.some(effects, i => i.length)) {\n    return '';\n  }\n\n  // Array of merged effects, indexed by effect level then effect index.  This\n  // assumes that effects mostly match up from one brave level to the next and\n  // will make for ugly results otherwise.\n  //\n  // We don't *have* to split up effects like this, but it helps slash merging;\n  // otherwise, if we have two effects, one which varies a lot and one which\n  // is constant, slashMerge may try to forcibly merging the parts, instead of\n  // using fallback for the varying effect and just merging the constant.\n  const combinedEffects: string[][] = [];\n  for (let effectIndex = 0; ; effectIndex++) {\n    const effectLevel = effects.findIndex(\n      e => e[effectIndex] != null && e[effectIndex].length !== 0,\n    );\n    if (effectLevel === -1) {\n      break;\n    }\n\n    combinedEffects[effectLevel] = combinedEffects[effectLevel] || [];\n    combinedEffects[effectLevel].push(\n      slashMerge(effects.slice(effectLevel).map(e => e[effectIndex]), { join: enDashJoin }),\n    );\n  }\n\n  const mergedEffects: Array<string | undefined> = combinedEffects.map(\n    (e, i) => e && e.join(' & ') + formatBraveMinLevel(i),\n  );\n\n  return _.filter(mergedEffects).join(', ');\n}\n\nexport function formatBraveCommands(mrP: MrPSoulBreak[]): string {\n  const damage = getBraveDamage(mrP);\n  const heal = getBraveHeals(mrP);\n  const effects = getBraveEffects(mrP);\n\n  return (mrP[0].instant ? 'instant ' : '') + _.filter([damage, heal, effects]).join(', ');\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tier\":\"_2NfJnz0XBlyZY8-vkqcCL5\",\"name\":\"_1PsauyCOoJGS_3XKFLGs20\",\"burstCommand\":\"Z4ikjcYZhldBRDIsjL-QI\",\"braveCommand\":\"Iut7wxa6HyciOuV1RmVq8\",\"school\":\"_2XuE8DTCocR3bSFNz_qd_J\",\"command\":\"_2wap32Hhj_BWT_JTyrXjz-\",\"jp\":\"_2kzVWNKqroj8cR2Xs_7rmB\",\"unique\":\"yDmAF2IntuMTKuhuxPs1f\",\"super\":\"_15CSp4WIQ7wuCs64qPs2Ya\",\"burst\":\"_2otJxubolDe5I4HkycfZwm\",\"overstrike\":\"J9RbyfRaSkfSIiynkCBFT\",\"ultra\":\"_2K5CvjVigk7BmgQLdkdm-Q\",\"chain\":\"_368HoCz6nsLo2qfCtq4uR_\",\"awakening\":\"_2Z6r1OS6LZ8fmA0lw-2nPV\",\"glint\":\"VvCZM1RTvCrPpN5vMYlQm\",\"legendMateria\":\"_1DWFZVruXrFM2wUc3pjW-q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"grouped\":\"mMlV4lczsIbkxD0MCJEFF\",\"dupe\":\"_3_aHSnp3fOZiHTjclb14RI\",\"command\":\"_3r7Yjlvk65zHdv5lp5fLoI\"};","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport { RelicDrawGroup } from '../actions/relicDraws';\nimport { BadRelicDrawMessage } from '../components/relicDraws/BadRelicDrawMessage';\nimport { RelicDrawBannerList } from '../components/relicDraws/RelicDrawBannerList';\nimport { IState } from '../reducers';\nimport { getBannersAndGroups, RelicDrawBannersAndGroups } from '../selectors/relicDraws';\n\ninterface RouteParams {\n  group: string;\n}\n\ninterface Props {\n  groups: {\n    [group: string]: RelicDrawGroup;\n  };\n  bannersAndGroups: RelicDrawBannersAndGroups;\n  isAnonymous?: boolean;\n  groupLink: (group: string) => string;\n  bannerLink: (bannerId: number) => string;\n  backLink: string;\n}\n\nexport class RelicDrawGroupPage extends React.PureComponent<\n  Props & RouteComponentProps<RouteParams>\n> {\n  render() {\n    const { groups, bannersAndGroups, isAnonymous, match, backLink } = this.props;\n    const group = groups[match.params.group];\n    const details = bannersAndGroups[match.params.group];\n    if (!group || !details) {\n      return <BadRelicDrawMessage />;\n    }\n    // FIXME: Should this back link actually go back in history? https://stackoverflow.com/q/46681387/25507\n    // FIXME: Scroll to top on mount - see https://reacttraining.com/react-router/web/guides/scroll-restoration\n    return (\n      <>\n        <img src={group.imageUrl} />\n        <p>\n          <Link to={backLink}>back to all banners</Link>\n        </p>\n        <RelicDrawBannerList\n          details={details}\n          isAnonymous={isAnonymous}\n          bannerLink={this.props.bannerLink}\n          groupLink={this.props.groupLink}\n        />\n      </>\n    );\n  }\n}\n\nexport default connect((state: IState) => ({\n  groups: state.relicDraws.groups,\n  bannersAndGroups: getBannersAndGroups(state),\n}))(RelicDrawGroupPage);\n","import * as React from 'react';\n\nimport { DonationInfo } from '../components/DonationInfo';\nimport { SiteHome } from '../components/home/SiteHome';\nimport { Page } from './Page';\n\nexport class SiteHomePage extends React.Component {\n  renderFooter = () => <DonationInfo />;\n\n  render() {\n    return (\n      <Page title=\"RK Squared\" footer={this.renderFooter}>\n        <SiteHome />\n      </Page>\n    );\n  }\n}\n\nexport default SiteHomePage;\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport {\n  downloadUrl,\n  ffrkCommunityUrl,\n  gameUrl,\n  misterPUrl,\n  redditUrl,\n} from '../../data/resources';\nimport { SiteExternalLink } from '../common/SiteExternalLink';\nimport { AppFeatures } from './AppFeatures';\n\nexport class SiteHome extends React.PureComponent {\n  render() {\n    return (\n      <div>\n        <p>\n          RK Squared is a record keeper for{' '}\n          <SiteExternalLink href={gameUrl}>Final Fantasy Record Keeper (FFRK)</SiteExternalLink>.\n          It's available both as a web site and as an application for the Mac and PC.\n        </p>\n\n        <h3>The site</h3>\n        <p>\n          Information about the game, gathered and presented with help from the{' '}\n          <SiteExternalLink href={ffrkCommunityUrl}>FFRK Community Database</SiteExternalLink>,{' '}\n          <SiteExternalLink href={misterPUrl}>MisterP's PDF</SiteExternalLink>, and{' '}\n          <SiteExternalLink href={redditUrl}>Reddit</SiteExternalLink>.\n        </p>\n\n        <h3>The application</h3>\n        <p>\n          The same information as the site, plus features to automatically track and manage your\n          game progress:\n        </p>\n        <AppFeatures />\n        <a href={downloadUrl} className=\"btn btn-primary\" target=\"_blank\">\n          Download Now\n        </a>\n        <Link to={'/appMoreInfo'} className=\"btn btn-default\">\n          More Info\n        </Link>\n      </div>\n    );\n  }\n}\n","export const gameUrl = 'https://www.finalfantasyrecordkeeper.com/';\n\nexport const downloadUrl = 'https://github.com/rk-squared/rk-squared/releases';\n\nexport const ffrkCommunityUrl =\n  'https://docs.google.com/spreadsheets/d/1f8OJIQhpycljDQ8QNDk_va1GJ1u7RVoMaNjFcHH0LKk';\nexport const ffrkCommunityHelp = 'Open the FFRK Community Google Docs spreadsheet in your browser.';\n\nexport const misterPUrl = 'http://happypluto.com/~misterp/r/ffrk.pdf';\nexport const misterPHelp = \"Open MisterP's FFRK PDF in your browser.\";\n\nexport const redditUrl = 'https://www.reddit.com/r/FFRecordKeeper/';\n","import * as React from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classNames from 'classnames';\n\nexport const SiteExternalLink = ({ children, className, ...props }: any) => (\n  <a target=\"_blank\" className={classNames('text-reset', className)} {...props}>\n    {children} <FontAwesomeIcon icon=\"external-link\" />\n  </a>\n);\n","import * as React from 'react';\n\nimport { HashLink } from 'react-router-hash-link';\n\nimport SoulBreakList from '../components/soulBreaks/SoulBreakList';\nimport { alphabet } from '../utils/textUtils';\nimport { Page } from './Page';\n\nconst soulBreakAnchor = (letter: string) => `soulBreaks-${letter}`;\n\nexport class SoulBreaksPage extends React.Component {\n  render() {\n    return (\n      <Page title=\"Soul Breaks\">\n        <nav className=\"navbar navbar-expand-lg sticky-top navbar-light bg-light\">\n          <div className=\"collapse navbar-collapse\">\n            <ul className=\"navbar-nav\">\n              {alphabet.map((letter, i) => (\n                <li className=\"nav-item\" key={i}>\n                  <HashLink className=\"nav-link\" to={'#' + soulBreakAnchor(letter)}>\n                    {letter}\n                  </HashLink>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </nav>\n\n        <SoulBreakList letterAnchor={soulBreakAnchor} isAnonymous={!process.env.IS_ELECTRON} />\n      </Page>\n    );\n  }\n}\n\nexport default SoulBreaksPage;\n","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport * as _ from 'lodash';\n\nimport { enlir, isCoreJob } from '../../data/enlir';\nimport { IState } from '../../reducers';\nimport { getOwnedSoulBreaks } from '../../selectors/characters';\nimport { alphabet, alphabetize } from '../../utils/textUtils';\nimport { CharacterSoulBreaks } from './CharacterSoulBreaks';\n\nconst styles = require('./SoulBreakList.scss');\n\nconst characters = alphabetize(_.values(enlir.characters).filter(i => !isCoreJob(i)), i => i.name);\n\ninterface Props {\n  // Optional function for generating HTML anchors for letters.\n  letterAnchor?: (letter: string) => string;\n\n  ownedSoulBreaks?: Set<number>;\n\n  isAnonymous?: boolean;\n}\n\nexport class SoulBreakList extends React.Component<Props> {\n  render() {\n    const { letterAnchor, isAnonymous, ownedSoulBreaks } = this.props;\n    return (\n      <>\n        {alphabet.map(\n          (letter, i) =>\n            characters[letter] && (\n              <div className={styles.component} key={i}>\n                <h3 id={letterAnchor ? letterAnchor(letter) : undefined}>{letter}</h3>\n                <div className=\"card-columns\">\n                  {characters[letter].map((character, j) => (\n                    <CharacterSoulBreaks\n                      character={character.name}\n                      ownedSoulBreaks={isAnonymous ? undefined : ownedSoulBreaks}\n                      key={j}\n                    />\n                  ))}\n                </div>\n              </div>\n            ),\n        )}\n      </>\n    );\n  }\n}\n\nexport default connect((state: IState) => ({\n  ownedSoulBreaks: getOwnedSoulBreaks(state),\n}))(SoulBreakList);\n","import * as React from 'react';\n\nimport * as _ from 'lodash';\n\nimport { enlir, EnlirSoulBreak } from '../../data/enlir';\nimport { tierOrder } from '../../data/mrP';\nimport { SoulBreakListItem } from './SoulBreakListItem';\n\nconst styles = require('./CharacterSoulBreaks.scss');\n\ninterface Props {\n  character: string;\n  ownedSoulBreaks?: Set<number>;\n}\n\nexport class CharacterSoulBreaks extends React.Component<Props> {\n  render() {\n    const { character, ownedSoulBreaks } = this.props;\n    // Class name to use, indexed by the boolean value of whether we have this\n    // soul break.\n    const owned = [ownedSoulBreaks ? styles.unowned : undefined, undefined];\n\n    // TODO: Show default tier someplace, like MrP does?\n    const soulBreaks = _.sortBy(enlir.soulBreaksByCharacter[character], [\n      (i: EnlirSoulBreak) => -tierOrder[i.tier],\n      (i: EnlirSoulBreak) => -i.id,\n    ]).filter(i => i.tier !== 'RW' && i.tier !== 'Default');\n\n    return (\n      <div className={'card ' + styles.component}>\n        <div className=\"card-body\">\n          <table className=\"table table-sm\">\n            <thead className=\"thead-dark\">\n              <tr>\n                <th colSpan={3}>{character}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {soulBreaks.map((sb, i) => (\n                <SoulBreakListItem\n                  soulBreak={sb}\n                  className={owned[ownedSoulBreaks ? +ownedSoulBreaks.has(sb.id) : 1]}\n                  key={i}\n                />\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_1B9n0CdI641qgW7dtFEv3e\",\"unowned\":\"_1K0e0yplUl1RIDxwoDJlKH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"_1OCL5nyEdqeN9e7tpoEweu\"};","import * as React from 'react';\nimport { connect } from 'react-redux';\n\nimport { getLang } from '../actions/session';\nimport { LangType } from '../api/apiUrls';\nimport { LangContext } from '../contexts/LangContext';\nimport { IState } from '../reducers';\nimport { AppLayout } from './AppLayout';\n\ninterface Props {\n  lang: LangType;\n  children: any;\n}\n\nexport class App extends React.Component<Props> {\n  render() {\n    const { lang, children } = this.props;\n    return (\n      <LangContext.Provider value={lang}>\n        <AppLayout>{children}</AppLayout>\n      </LangContext.Provider>\n    );\n  }\n}\n\nexport default connect((state: IState) => ({\n  lang: getLang(state.session),\n}))(App);\n","import * as React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { GoogleAd250x250 } from '../components/common/GoogleAd250x250';\nimport { routes } from '../routes';\n\nconst styles = require('./AppLayout.scss');\nconst logo = require('../images/logo.png');\n\ninterface Props {\n  children: any;\n}\n\nexport class AppLayout extends React.Component<Props> {\n  render() {\n    return (\n      <div className={`container-fluid ${styles.component}`}>\n        <div className=\"row\">\n          <nav className={`col-auto navbar navbar-expand-sm navbar-light bg-light ${styles.nav}`}>\n            <NavLink className=\"navbar-brand\" activeClassName=\"active\" to=\"/\">\n              <img src={logo} alt=\"RK²\" className={styles.logo} />\n            </NavLink>\n\n            <div className={`collapse navbar-collapse`}>\n              <ul className=\"navbar-nav mr-auto flex-column\">\n                {routes\n                  .filter(i => i.description != null)\n                  .map(({ description, path }, i) => (\n                    <li className=\"nav-item\" key={i}>\n                      <NavLink className=\"nav-link\" activeClassName=\"active\" to={path}>\n                        {description}\n                      </NavLink>\n                    </li>\n                  ))}\n              </ul>\n            </div>\n\n            {!process.env.IS_ELECTRON && (\n              <div className={styles.ad}>\n                <GoogleAd250x250 />\n              </div>\n            )}\n          </nav>\n\n          <div className={`col ${styles.content}`}>{this.props.children}</div>\n        </div>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\ndeclare const window: Window & {\n  adsbygoogle: Array<{}>;\n};\n\nexport class GoogleAd250x250 extends React.Component {\n  componentDidMount() {\n    // Native HTML + JS version:\n    /*\n      <script>\n        (adsbygoogle = window.adsbygoogle || []).push({});\n      </script>\n    */\n    // React version based on https://github.com/hustcc/react-adsense\n    if (window) {\n      try {\n        (window.adsbygoogle = window.adsbygoogle || []).push({});\n      } catch (e) {\n        // tslint:disable-next-line: no-console\n        console.log(e);\n      }\n    }\n  }\n\n  render() {\n    return (\n      <ins\n        className=\"adsbygoogle\"\n        style={{ display: 'inline-block', width: '250px', height: '250px' }}\n        data-ad-client=\"ca-pub-6658071778960718\"\n        data-ad-slot=\"1366338554\"\n      />\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"_8gcGbyRSHYeQU2kKn0HH_\",\"logo\":\"BR0nq7KR-eVlEvk2oCNWK\",\"component\":\"_2ZxlfTUHbp1t1kCntl_bxZ\",\"content\":\"ytuyKUJpXlhvQvRUHZoyj\",\"ad\":\"axmsH9oZss8f8WY0AMb9t\"};","module.exports = __webpack_public_path__ + \"static/media/logo.186385c2.png\";","import * as Modal from 'react-modal';\n\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faArchive } from '@fortawesome/pro-solid-svg-icons/faArchive';\nimport { faArrowDown } from '@fortawesome/pro-solid-svg-icons/faArrowDown';\nimport { faCheck } from '@fortawesome/pro-solid-svg-icons/faCheck';\nimport { faCoffeeTogo } from '@fortawesome/pro-solid-svg-icons/faCoffeeTogo';\nimport { faEllipsisH } from '@fortawesome/pro-solid-svg-icons/faEllipsisH';\nimport { faExternalLink } from '@fortawesome/pro-solid-svg-icons/faExternalLink';\nimport { faLock } from '@fortawesome/pro-solid-svg-icons/faLock';\nimport { faLockOpen } from '@fortawesome/pro-solid-svg-icons/faLockOpen';\nimport { faQuestion } from '@fortawesome/pro-solid-svg-icons/faQuestion';\nimport { faStar } from '@fortawesome/pro-solid-svg-icons/faStar';\nimport { faUnlock } from '@fortawesome/pro-solid-svg-icons/faUnlock';\n\n// https://stackoverflow.com/a/37480521/25507\n// We could use jQuery Slim, but if we use that, our bundle still pulls in\n// jQuery.  (Why?)  Should we use a CDN here instead?\nconst w = window as any;\nw.$ = w.jQuery = require('jquery');\nrequire('popper.js');\nrequire('bootstrap');\n\nimport 'ag-grid/dist/styles/ag-grid.css';\nimport 'ag-grid/dist/styles/ag-theme-balham.css';\n\nimport './app.global.scss';\n\nlibrary.add(\n  faArchive,\n  faArrowDown,\n  faCheck,\n  faCoffeeTogo,\n  faEllipsisH,\n  faExternalLink,\n  faLock,\n  faLockOpen,\n  faQuestion,\n  faStar,\n  faUnlock,\n);\n\nexport function initializeGlobalStyles(rootNode: HTMLElement) {\n  Modal.setAppElement(rootNode);\n}\n","import { History } from 'history';\nimport { Store } from 'redux';\n\nimport { IState } from '../reducers';\n\nlet configureStore: (initialState?: IState) => Store<IState>;\nlet history: History;\n\n// tslint:disable-next-line prefer-conditional-expression\nif (process.env.NODE_ENV === 'production') {\n  ({ configureStore, history } = require('./configureStore.production'));\n} else {\n  ({ configureStore, history } = require('./configureStore.development'));\n}\n\nexport { configureStore, history };\n","import { applyMiddleware, createStore, Store, StoreEnhancer } from 'redux';\n\nimport { routerMiddleware } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\nimport thunk from 'redux-thunk';\n\nimport { createRootReducer, IState } from '../reducers';\n\nconst history = createBrowserHistory();\nconst router = routerMiddleware(history);\n\nlet middleware: StoreEnhancer<{ dispatch: {} }, {}>;\nif (process.env.IS_ELECTRON) {\n  const { forwardToMain } = require('electron-redux');\n  middleware = applyMiddleware(forwardToMain, thunk, router);\n} else {\n  middleware = applyMiddleware(thunk, router);\n}\n\nconst enhancer = middleware;\n\nfunction configureStore(initialState?: IState): Store<IState> {\n  return initialState == null\n    ? createStore(createRootReducer(history), enhancer)\n    : createStore(createRootReducer(history), initialState, enhancer);\n}\n\nexport { history, configureStore };\n","import { Action, combineReducers, Reducer } from 'redux';\n\nimport { connectRouter, RouterState } from 'connected-react-router';\nimport { History } from 'history';\n\nimport { battle, BattleState } from './battle';\nimport { characters, CharacterState } from './characters';\nimport { dungeons, DungeonState } from './dungeons';\nimport { dungeonScores, DungeonScoreState } from './dungeonScores';\nimport { messages, MessagesState } from './messages';\nimport { options, Options } from './options';\nimport { prefs, PrefsState } from './prefs';\nimport { progress, ProgressState } from './progress';\nimport { proxy, ProxyStatus } from './proxy';\nimport { recordMateria, RecordMateriaState } from './recordMateria';\nimport { relicDraws, RelicDrawState } from './relicDraws';\nimport { session, Session } from './session';\nimport { worlds, WorldState } from './worlds';\n\nexport interface IState {\n  battle: BattleState;\n  characters: CharacterState;\n  dungeons: DungeonState;\n  dungeonScores: DungeonScoreState;\n  messages: MessagesState;\n  options: Options;\n  prefs: PrefsState;\n  progress: ProgressState;\n  proxy: ProxyStatus;\n  recordMateria: RecordMateriaState;\n  relicDraws: RelicDrawState;\n  session: Session;\n  worlds: WorldState;\n  router: RouterState;\n}\n\n// Hack: redux-persist uses _persist.  Pass a dummy reducer to silence\n// warnings, and add an interface for this to make it type-check.\ninterface PersistState {\n  _persist: (state: any) => any;\n}\n\n// noinspection JSUnusedGlobalSymbols\nexport const createRootReducer: (history?: History) => Reducer<IState, Action> = (\n  history?: History,\n) =>\n  combineReducers<IState & PersistState>({\n    battle,\n    characters,\n    dungeons,\n    dungeonScores,\n    options,\n    messages,\n    prefs,\n    progress,\n    proxy,\n    recordMateria,\n    relicDraws,\n    session,\n    worlds,\n\n    // Avoid requiring a history for the Electron main process's store -\n    // routing and browser history don't make much sense there.  (I don't know\n    // if this is the right way to handle this, but it seems to work...)\n    router: history ? connectRouter(history) : (state: any = null) => state,\n\n    // redux-persist uses _persist - see \"PersistState\" above\n    _persist: (state: any = null) => state,\n  });\n\n/// State keys to exclude from redux-persist\nexport const blacklist = ['messages', 'progress', 'proxy', 'session', 'router'];\n","import { getType } from 'typesafe-actions';\n\nimport { BattleAction, clearDropItems, DropItem, setDropItems } from '../actions/battle';\n\nexport interface BattleState {\n  dropItems: DropItem[] | null;\n}\n\nconst initialState = {\n  dropItems: null\n};\n\nexport function battle(state: BattleState = initialState, action: BattleAction): BattleState {\n  switch (action.type) {\n    case getType(setDropItems):\n      return {\n        ...state,\n        dropItems: action.payload.dropItems\n      };\n\n    case getType(clearDropItems):\n      return {\n        ...state,\n        dropItems: null\n      };\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","import { createAction } from 'typesafe-actions';\n\nexport interface DropItem {\n  // FFRK API values\n  amount?: number;\n  type?: number;     // omitted for record materia, which aren't real items\n  rarity?: number;   // omitted for record materia, which aren't real items\n  itemId?: number;\n\n  // Added by RK-Squared\n  name: string;\n  imageUrl?: string;\n}\n\nexport const setDropItems = createAction('SET_DROP_ITEMS', (dropItems: DropItem[]) => ({\n  type: 'SET_DROP_ITEMS',\n  payload: {\n    dropItems\n  }\n}));\n\nexport const clearDropItems = createAction('CLEAR_DROP_ITEMS');\n\nexport type BattleAction = ReturnType<typeof setDropItems | typeof clearDropItems>;\n","import { produce } from 'immer';\nimport { getType } from 'typesafe-actions';\n\nimport {\n  Character,\n  CharacterAction,\n  setCharacter,\n  setCharacters,\n  setLegendMateria,\n  setSoulBreaks,\n  updateCharacter,\n} from '../actions/characters';\n\nexport interface CharacterState {\n  characters: {\n    [id: number]: Character;\n  };\n  soulBreaks?: number[];\n  legendMateria?: number[];\n}\n\nconst initialState: CharacterState = {\n  characters: {},\n  soulBreaks: [],\n  legendMateria: [],\n};\n\nexport function characters(\n  state: CharacterState = initialState,\n  action: CharacterAction,\n): CharacterState {\n  return produce(state, (draft: CharacterState) => {\n    switch (action.type) {\n      case getType(setCharacter):\n        draft.characters[action.payload.id] = action.payload;\n        return;\n\n      case getType(setCharacters):\n        draft.characters = action.payload.characters;\n        return;\n\n      case getType(updateCharacter):\n        Object.assign(draft.characters[action.payload.id], action.payload.character);\n        return;\n\n      case getType(setSoulBreaks):\n        draft.soulBreaks = action.payload;\n        return;\n\n      case getType(setLegendMateria):\n        draft.legendMateria = action.payload;\n        return;\n    }\n  });\n}\n","import { createAction } from 'typesafe-actions';\n\nexport interface Character {\n  name: string;\n  id: number;\n  uniqueId: number;\n  level: number;\n  levelCap: number;\n}\n\nexport const setCharacters = createAction(\n  'SET_CHARACTERS',\n  (characters: { [id: number]: Character }) => ({\n    type: 'SET_CHARACTERS',\n    payload: {\n      characters,\n    },\n  }),\n);\n\nexport const setCharacter = createAction('SET_CHARACTER', (character: Character) => ({\n  type: 'SET_CHARACTER',\n  payload: character,\n}));\n\nexport const updateCharacter = createAction(\n  'UPDATE_CHARACTER',\n  (id: number, character: Partial<Character>) => ({\n    type: 'UPDATE_CHARACTER',\n    payload: {\n      id,\n      character,\n    },\n  }),\n);\n\nexport const setSoulBreaks = createAction('SET_SOUL_BREAKS', (soulBreakIds: number[]) => ({\n  type: 'SET_SOUL_BREAKS',\n  payload: soulBreakIds,\n}));\n\nexport const setLegendMateria = createAction(\n  'SET_LEGEND_MATERIA',\n  (legendMateriaIds: number[]) => ({\n    type: 'SET_LEGEND_MATERIA',\n    payload: legendMateriaIds,\n  }),\n);\n\nexport type CharacterAction = ReturnType<\n  | typeof setCharacter\n  | typeof setCharacters\n  | typeof updateCharacter\n  | typeof setSoulBreaks\n  | typeof setLegendMateria\n>;\n","import { getType } from 'typesafe-actions';\n\nimport {\n  DungeonScore,\n  DungeonScoresAction,\n  isScoreBetterThan,\n  setDungeonScore,\n  updateDungeonScore,\n} from '../actions/dungeonScores';\n\nexport interface DungeonScoreState {\n  scores: {\n    [dungeonId: number]: DungeonScore;\n  };\n}\n\nexport const initialState: DungeonScoreState = {\n  scores: {},\n};\n\nexport function dungeonScores(\n  state: DungeonScoreState = initialState,\n  action: DungeonScoresAction,\n): DungeonScoreState {\n  switch (action.type) {\n    case getType(setDungeonScore): {\n      const { dungeonId, score } = action.payload;\n      return {\n        ...state,\n        scores: {\n          ...state.scores,\n          [dungeonId]: score,\n        },\n      };\n    }\n\n    case getType(updateDungeonScore): {\n      const { dungeonId, newScore } = action.payload;\n      if (state.scores[dungeonId] && isScoreBetterThan(state.scores[dungeonId], newScore)) {\n        return state;\n      }\n      return {\n        ...state,\n        scores: {\n          ...state.scores,\n          [dungeonId]: newScore,\n        },\n      };\n    }\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","import { sprintf } from 'sprintf-js';\nimport { createAction } from 'typesafe-actions';\n\nimport { Dungeon } from './dungeons';\nimport { World, WorldCategory } from './worlds';\n\nimport * as _ from 'lodash';\n\nexport enum DungeonScoreType {\n  ClearTime = 1,\n  PercentHpOrClearTime = 2,\n  TotalDamage = 3,\n}\n\nexport interface DungeonScore {\n  type: DungeonScoreType;\n  time?: number;\n  totalDamage?: number;\n  maxHp?: number;\n  won: boolean;\n}\n\n/**\n * Estimates a dungeon score by looking at its completion status.\n *\n * For Torment dungeons in particular, we can look at grade prizes and estimate\n * a score based on that.\n */\nexport function estimateScore(dungeon: Dungeon, world: World): DungeonScore | null {\n  if (world.category !== WorldCategory.Torment) {\n    return null;\n  }\n\n  if (!dungeon.prizes.claimedGrade || !dungeon.prizes.unclaimedGrade) {\n    return null;\n  }\n  const claimed = dungeon.prizes.claimedGrade.length;\n  const unclaimed = dungeon.prizes.unclaimedGrade.length;\n\n  // Count the number of prizes claimed vs. expected, and use that to estimate\n  // completion status.\n  //\n  // Hack: We hard-code the number of prizes expected.  (FFRK doesn't provide a\n  // machine-readable list of prizes.  We didn't want to parse the string\n  // descriptions that it does provide, and we haven't necessarily saved them\n  // and don't want to make the user re-scan dungeons to get them.)\n  //\n  // Prizes: 1 or 2 (D???) for sub 30, 2 each for sub 40 and 50, 1 or 2 (D???) for 1 minute\n  // 2 (D240) or 3 for victory, 3 each for 90%, 80%, 70%, 60%, 2 for 50%\n  const timePrizes = [[30, 1], [40, 2], [50, 2], [60, 1]];\n  const percentPrizes = [[100, 3], [90, 3], [80, 3], [70, 3], [60, 3], [50, 2]];\n  if (dungeon.difficulty === 240) {\n    percentPrizes[0][1]--;\n  }\n  if (dungeon.difficulty === 0) {\n    timePrizes[0][1]++;\n    timePrizes[timePrizes.length - 1][1]++;\n  }\n\n  // Safety check for unexpected rewards\n  const totalPrizeCount = _.sum(timePrizes.map(i => i[1])) + _.sum(percentPrizes.map(i => i[1]));\n  if (totalPrizeCount !== claimed + unclaimed) {\n    return null;\n  }\n\n  // These numbers don't apply to every torment, but they're close enough.\n  const maxHpByDifficulty: { [difficulty: number]: number } = {\n    240: 6e5,\n    280: 1e6,\n    0: 2e6,\n  };\n  const maxHp = maxHpByDifficulty[dungeon.difficulty] || maxHpByDifficulty[0];\n\n  let totalSeen = 0;\n  for (const [time, count] of timePrizes) {\n    if (totalSeen === unclaimed) {\n      return {\n        type: DungeonScoreType.PercentHpOrClearTime,\n        won: true,\n        time: time * 1000,\n        maxHp,\n        totalDamage: maxHp,\n      };\n    }\n    totalSeen += count;\n  }\n  for (const [percent, count] of percentPrizes) {\n    if (totalSeen === unclaimed) {\n      return {\n        type: DungeonScoreType.PercentHpOrClearTime,\n        won: false,\n        maxHp,\n        totalDamage: (maxHp * percent) / 100,\n      };\n    }\n    totalSeen += count;\n  }\n\n  return null;\n}\n\nexport function isSub30(score: DungeonScore): boolean {\n  // FFRK shows hundredths of seconds but manipulates milliseconds, and I\n  // *think* it truncates down to hundredth...\n  return score.won && score.time != null && score.time < 30 * 1000 + 10;\n}\n\nfunction formatTime(time?: number): string {\n  if (time == null) {\n    return '';\n  }\n  const hundredths = Math.floor((time % 1000) / 10);\n  const seconds = Math.floor((time / 1000) % 60);\n  const minutes = Math.floor(time / 1000 / 60);\n  if (minutes) {\n    return sprintf('%i:%02i.%02i', minutes, seconds, hundredths);\n  } else {\n    return sprintf('%02i.%02i', seconds, hundredths);\n  }\n}\n\nfunction formatDamage(totalDamage?: number): string {\n  return totalDamage == null ? '' : `${totalDamage.toLocaleString()} HP`;\n}\n\nfunction formatPercent(totalDamage?: number, maxHp?: number): string {\n  if (totalDamage == null || !maxHp) {\n    return '';\n  } else {\n    return Math.floor((totalDamage / maxHp) * 100) + '%';\n  }\n}\n\nexport function formatScore(score: DungeonScore): string {\n  switch (score.type) {\n    case DungeonScoreType.ClearTime:\n      return formatTime(score.time);\n\n    case DungeonScoreType.TotalDamage:\n      return formatDamage(score.totalDamage);\n\n    case DungeonScoreType.PercentHpOrClearTime:\n      return score.won ? formatTime(score.time) : formatPercent(score.totalDamage, score.maxHp);\n  }\n}\n\nexport function formatEstimatedScore(score: DungeonScore): string {\n  const maybe = (op: string, result: string) => (result ? op + result : result);\n  switch (score.type) {\n    case DungeonScoreType.ClearTime:\n      return maybe('≤', formatTime(score.time));\n\n    case DungeonScoreType.TotalDamage:\n      return maybe('≥', formatTime(score.totalDamage));\n\n    case DungeonScoreType.PercentHpOrClearTime: {\n      return score.won\n        ? maybe('≤', formatTime(score.time))\n        : maybe('≥', formatPercent(score.totalDamage, score.maxHp));\n    }\n  }\n}\n\nexport function compareScore(scoreA: DungeonScore, scoreB: DungeonScore): number {\n  if (scoreA.type !== scoreB.type) {\n    // Arguably a precondition violation...\n    return 0;\n  }\n\n  // Returns 1, 0, or -1, if f indicates that a is better, equal to, or worse than b.\n  type Op<T> = (a: T, b: T) => boolean;\n  const compare = (f: Op<number>, a: number | undefined, b: number | undefined): number => {\n    if (b == null) {\n      return 1;\n    } else if (a == null) {\n      return -1;\n    } else if (a === b) {\n      return 0;\n    } else {\n      return f(a, b) ? 1 : -1;\n    }\n  };\n\n  switch (scoreA.type) {\n    case DungeonScoreType.ClearTime:\n      return compare(_.lt, scoreA.time, scoreB.time);\n    case DungeonScoreType.TotalDamage:\n      return compare(_.gt, scoreA.totalDamage, scoreB.totalDamage);\n    case DungeonScoreType.PercentHpOrClearTime:\n      if (scoreA.won && !scoreB.won) {\n        return 1;\n      } else if (scoreA.won) {\n        return compare(_.lt, scoreA.time, scoreB.time);\n      } else {\n        return compare(_.gt, scoreA.totalDamage, scoreB.totalDamage);\n      }\n  }\n}\n\nexport function isScoreBetterThan(scoreA: DungeonScore, scoreB: DungeonScore): boolean {\n  return compareScore(scoreA, scoreB) > 0;\n}\n\nexport function shouldUseEstimatedScore(\n  score: DungeonScore | undefined,\n  estimatedScore: DungeonScore | undefined,\n): boolean {\n  if (!estimatedScore) {\n    return false;\n  } else if (!score) {\n    return true;\n  } else if (estimatedScore.type !== score.type) {\n    return false;\n  } else {\n    return isScoreBetterThan(estimatedScore, score);\n  }\n}\n\nexport const setDungeonScore = createAction(\n  'SET_DUNGEON_SCORE',\n  (dungeonId: number, score: DungeonScore) => ({\n    type: 'SET_DUNGEON_SCORE',\n    payload: {\n      dungeonId,\n      score,\n    },\n  }),\n);\n\nexport const updateDungeonScore = createAction(\n  'UPDATE_DUNGEON_SCORE',\n  (dungeonId: number, newScore: DungeonScore) => ({\n    type: 'UPDATE_DUNGEON_SCORE',\n    payload: {\n      dungeonId,\n      newScore,\n    },\n  }),\n);\n\nexport type DungeonScoresAction = ReturnType<typeof setDungeonScore | typeof updateDungeonScore>;\n","import { getType } from 'typesafe-actions';\n\nimport { hideMessage, Message, MessagesAction, showMessage } from '../actions/messages';\n\nimport * as _ from 'lodash';\n\n/**\n * Messages to display to the end user.  Messages are currently stored in a\n * simple, presumably sparse, ever-incrementing array.\n */\nexport interface MessagesState {\n  messages: Message[];\n}\n\nexport const initialState = {\n  messages: [],\n};\n\nexport function messages(\n  state: MessagesState = initialState,\n  action: MessagesAction,\n): MessagesState {\n  switch (action.type) {\n    case getType(showMessage): {\n      // If this message has an ID, then discard any previous messages with\n      // that ID.\n      const newMessages = action.payload.id\n        ? _.filter(state.messages, i => i.id !== action.payload.id)\n        : state.messages.slice();\n\n      newMessages.push(action.payload);\n      return {\n        ...state,\n        messages: newMessages,\n      };\n    }\n\n    case getType(hideMessage): {\n      let newMessages: Message[];\n      const messageIdOrIndex = action.payload;\n      if (typeof messageIdOrIndex === 'number') {\n        newMessages = _.omit(state.messages, messageIdOrIndex);\n      } else {\n        newMessages = _.filter(state.messages, i => i.id !== messageIdOrIndex);\n      }\n      return {\n        ...state,\n        messages: newMessages,\n      };\n    }\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","/**\n * @file\n * Reducer for options affecting FFRK\n */\n\nimport { getType } from 'typesafe-actions';\n\nimport { defaultOptions, Options, OptionsAction, setOption } from '../actions/options';\n\nexport { Options };\n\nexport function options(state: Options = defaultOptions, action: OptionsAction): Options {\n  switch (action.type) {\n    case getType(setOption):\n      return {\n        ...state,\n        ...action.payload\n      };\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","import { createAction } from 'typesafe-actions';\n\nexport interface Options {\n  alwaysShowTimer?: boolean;\n  staticBattleBackground?: boolean;\n  saveTrafficCaptures?: boolean;\n\n  // Obsolete options\n  hideNewcomerBanners?: boolean;\n}\n\nexport const defaultOptions: Options = {\n  alwaysShowTimer: false,\n  staticBattleBackground: false,\n  saveTrafficCaptures: false,\n\n  // Obsolete options\n  hideNewcomerBanners: false,\n};\n\nexport const setOption = createAction('SET_OPTION', (newOptions: Options) => ({\n  type: 'SET_OPTION',\n  payload: newOptions,\n}));\n\nexport type OptionsAction = ReturnType<typeof setOption>;\n","/**\n * @file\n * Reducer for user preferences within RK Squared\n */\n\nimport { getType } from 'typesafe-actions';\n\nimport { PrefsAction, showItemType, showItemTypes } from '../actions/prefs';\nimport { ItemType } from '../data/items';\n\nimport * as _ from 'lodash';\n\nexport interface PrefsState {\n  showItemType: {\n    [t in ItemType]: boolean;\n  };\n}\n\nconst initialState = {\n  showItemType: _.fromPairs(\n    Object.keys(ItemType).map(i => [ItemType[i as any], true])\n  ) as { [t in ItemType]: boolean }\n};\n\nexport function prefs(state: PrefsState = initialState, action: PrefsAction): PrefsState {\n  switch (action.type) {\n    case getType(showItemType):\n      return {\n        ...state,\n        showItemType: {\n          ...state.showItemType,\n          [action.payload.type]: action.payload.show\n        }\n      };\n\n    case getType(showItemTypes):\n      return {\n        ...state,\n        showItemType: {\n          ...state.showItemType,\n          ...action.payload.updates\n        }\n      };\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","/**\n * @file\n * Tracks progress bars and loading operations\n */\n\nimport { getType } from 'typesafe-actions';\n\nimport { Progress, ProgressAction, setProgress } from '../actions/progress';\n\nexport interface ProgressState {\n  [key: string]: Progress;\n}\n\nexport function progress(state: ProgressState = {}, action: ProgressAction): ProgressState {\n  switch (action.type) {\n    case getType(setProgress):\n      if (action.payload.progress) {\n        return {\n          ...state,\n          [action.payload.key]: action.payload.progress\n        };\n      } else {\n        const result = {\n          ...state\n        };\n        delete result[action.payload.key];\n        return result;\n      }\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","/**\n * @file\n * Reducer for tracking proxy status\n */\n\nimport { getType } from 'typesafe-actions';\n\nimport { ProxyAction, ProxyStatus, updateProxyStatus } from '../actions/proxy';\n\nexport { ProxyStatus };\n\nexport function proxy(state: ProxyStatus = {}, action: ProxyAction): ProxyStatus {\n  switch (action.type) {\n    case getType(updateProxyStatus):\n      return {\n        ...state,\n        ...action.payload\n      };\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n","import { createAction } from 'typesafe-actions';\n\nexport interface ProxyStatus {\n  ipAddress?: string[];\n  port?: number;\n  lastTraffic?: number;\n  capturePath?: string;\n}\n\nexport const updateProxyStatus = createAction('UPDATE_PROXY_STATUS', (status: Partial<ProxyStatus>) => ({\n  type: 'UPDATE_PROXY_STATUS',\n  payload: status\n}));\n\nexport const updateLastTraffic = () => updateProxyStatus({lastTraffic: Date.now() / 1000});\n\nexport type ProxyAction = ReturnType<typeof updateProxyStatus>;\n","import { getType } from 'typesafe-actions';\n\nimport { produce } from 'immer';\nimport * as _ from 'lodash';\n\nimport {\n  obtainRecordMateria,\n  RecordMateria,\n  RecordMateriaAction,\n  setRecordMateria,\n  setRecordMateriaInventory,\n  updateRecordMateriaInventory,\n} from '../actions/recordMateria';\nimport { arrayify } from '../utils/typeUtils';\n\nexport interface RecordMateriaState {\n  recordMateria: {\n    [id: number]: RecordMateria;\n  };\n\n  // Whether each record materia is a favorite, and whether it's in inventory\n  // (instead of the vault).  Storing these separately from the recordMateria\n  // list is a bit artificial, but it lets us process the main record materia\n  // list all at once from the Library page while still updating these whenever\n  // the party list is loaded.\n  //\n  // (The alternative would be to process the record materia list from the party\n  // list, vault (if possible), and Enlir.)\n  favorites:\n    | undefined\n    | {\n        [id: number]: boolean;\n      };\n  inventory:\n    | undefined\n    | {\n        [id: number]: boolean;\n      };\n\n  // Whether each record materia is obtained.  We used to derive this from the\n  // Library page and store it with RecordMateria, but it's not consistently\n  // reported here, so we also track it here, derived from the party list, and\n  // use this to help maintain RecordMateria.obtained.\n  obtained:\n    | undefined\n    | {\n        [id: number]: boolean;\n      };\n}\n\nconst initialState = {\n  recordMateria: {},\n  favorites: undefined,\n  inventory: undefined,\n  obtained: undefined,\n};\n\nconst toSet = (ids: number[]) => _.fromPairs(_.map(ids, i => [i, true]));\n\nexport function recordMateria(\n  state: RecordMateriaState = initialState,\n  action: RecordMateriaAction,\n): RecordMateriaState {\n  return produce(state, (draft: RecordMateriaState) => {\n    switch (action.type) {\n      case getType(obtainRecordMateria):\n        const ids = arrayify(action.payload.id);\n\n        for (const i of ids) {\n          if (draft.recordMateria[i]) {\n            draft.recordMateria[i].obtained = true;\n          }\n        }\n\n        if (draft.obtained != null) {\n          for (const i of ids) {\n            draft.obtained[i] = true;\n          }\n        }\n\n        if (draft.inventory != null) {\n          for (const i of ids) {\n            draft.inventory[i] = true;\n          }\n        }\n\n        return;\n\n      case getType(setRecordMateria):\n        draft.recordMateria = action.payload.recordMateria;\n\n        // Record materia as obtained from\n\n        return;\n\n      case getType(setRecordMateriaInventory): {\n        const all = [...action.payload.inventory, ...action.payload.warehouse];\n\n        for (const i of all) {\n          if (draft.recordMateria[i]) {\n            draft.recordMateria[i].obtained = true;\n          }\n        }\n\n        draft.inventory = toSet(action.payload.inventory);\n        draft.favorites = toSet(action.payload.favorites);\n        draft.obtained = toSet(all);\n\n        return;\n      }\n\n      case getType(updateRecordMateriaInventory): {\n        const { id, inventory, favorite } = action.payload;\n        if (draft.inventory != null && inventory != null) {\n          draft.inventory[id] = inventory;\n        }\n        if (draft.favorites != null && favorite != null) {\n          draft.favorites[id] = favorite;\n        }\n        if (draft.obtained != null && (inventory != null || favorite != null)) {\n          draft.obtained[id] = true;\n        }\n        return;\n      }\n    }\n  });\n}\n","import { produce } from 'immer';\nimport { getType } from 'typesafe-actions';\n\nimport * as _ from 'lodash';\n\nimport {\n  ExchangeShopSelections,\n  RelicDrawAction,\n  RelicDrawBanner,\n  RelicDrawGroup,\n  RelicDrawProbabilities,\n  setExchangeShopSelections,\n  setRelicDrawBanners,\n  setRelicDrawGroups,\n  setRelicDrawProbabilities,\n} from '../actions/relicDraws';\n\nexport interface RelicDrawState {\n  banners: {\n    [bannerId: number]: RelicDrawBanner;\n  };\n  groups: {\n    [group: string]: RelicDrawGroup;\n  };\n  probabilities: {\n    // should be [bannerId: number], but string is easier for Lodash to work with\n    [bannerId: string]: RelicDrawProbabilities;\n  };\n  selections: {\n    [exchangeShopId: number]: ExchangeShopSelections;\n  };\n}\n\nconst initialState: RelicDrawState = {\n  banners: {},\n  groups: {},\n  probabilities: {},\n  selections: {},\n};\n\nexport function relicDraws(\n  state: RelicDrawState = initialState,\n  action: RelicDrawAction,\n): RelicDrawState {\n  return produce(state, (draft: RelicDrawState) => {\n    switch (action.type) {\n      case getType(setRelicDrawBanners): {\n        const newBanners = _.keyBy(action.payload, 'id');\n        draft.banners = newBanners;\n        draft.probabilities = _.pickBy(\n          draft.probabilities,\n          (value, key) => newBanners[key] != null,\n        );\n        // TODO: Also expire old exchange shop selections here?\n        return;\n      }\n\n      case getType(setRelicDrawGroups):\n        draft.groups = _.keyBy(action.payload, 'groupName');\n        return;\n\n      case getType(setRelicDrawProbabilities):\n        draft.probabilities[action.payload.bannerId] = action.payload.probabilities;\n        return;\n\n      case getType(setExchangeShopSelections): {\n        const { exchangeShopId, selections } = action.payload;\n        draft.selections = draft.selections || {};\n        draft.selections[exchangeShopId] = selections;\n      }\n    }\n  });\n}\n","import { getType } from 'typesafe-actions';\n\nconst u = require('updeep');\n\nimport { unlockWorld, updateWorlds, World, WorldAction } from '../actions/worlds';\n\nexport interface WorldState {\n  worlds?: {\n    [id: number]: World\n  };\n}\n\nexport function worlds(state: WorldState = {}, action: WorldAction): WorldState {\n  switch (action.type) {\n    case getType(updateWorlds):\n      return {\n        ...state,\n        worlds: action.payload.worlds\n      };\n\n    case getType(unlockWorld):\n      return u.updateIn(['worlds', action.payload], {isUnlocked: true}, state);\n\n    /* istanbul ignore next */\n    default:\n      return state;\n  }\n}\n"],"sourceRoot":""}